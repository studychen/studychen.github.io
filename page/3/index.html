<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-arrays-sort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/arrays-sort/" class="article-date">
  <time datetime="2016-08-25T11:47:36.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/arrays-sort/">百度面试题 20个数组 每个500个元素 升序排列 找出前500的数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一道面试题"><a href="#一道面试题" class="headerlink" title="一道面试题"></a>一道面试题</h1><p>有20个数组，每个数组有500个元素，升序排列，现在在这20*500个数中找出排名前500的数。</p>
<p>转载请注明出处 <a href="http://www.alijava.com/arrays-sort/" target="_blank" rel="external">http://www.alijava.com/arrays-sort/</a></p>
<h1 id="方法思路分析"><a href="#方法思路分析" class="headerlink" title="方法思路分析"></a>方法思路分析</h1><p>笔者想到3种方法，有更好的方法欢迎评论留言。</p>
<ol>
<li><p>直接暴力求解，将20个数组合并，然后排序，取出500个数</p>
</li>
<li><p>使用归并。 对于排好序的 序列，我们要注意使用归并。<br>先将第1个和第2个归并，得到500个数据（没必要归并得到总的1000个数）。然后再加结果和第3个归并，得到500个数据，再与第4个归并，等等。</p>
</li>
<li><p>利用堆。保持一个20的堆，然后先将每个数组的第1个数入堆。</p>
<p> 20个元素的堆一直保持容量为20个，20个数组的最小元素可以将20个数组的第0个元素入堆，最小堆的性质，顶点为最小值。这时候得到了500个结果里的第0个结果。然后再把下一个元素入20个元素的堆，堆插入的时候会保持性质不变，最小元素依然在顶点。再取出20个元素的顶点，得到500个结果里的第1个结果。</p>
<p>假设 [1,3,4,5,6]  [2,3,4,5,6] [3,4,5,6,7]<br>最小的是比较 1 2 3 得到1<br>次小的是将刚才的1替换为它后面的元素3, 再加上刚才的元素2 3，得到2</p>
<p> 注意这儿需要保持数来自于哪个数组，以及其在数组里的位置</p>
</li>
</ol>
<h1 id="实力代码"><a href="#实力代码" class="headerlink" title="实力代码"></a>实力代码</h1><h2 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法1，直接将20个数组合并，排序，然后取前500个</span></div><div class="line"><span class="comment">// 复杂度是 10000log(10000)</span></div><div class="line">Integer[] allData = <span class="keyword">new</span> Integer[<span class="number">20</span> * <span class="number">500</span>];</div><div class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> ii = <span class="number">0</span>; ii &lt; rowSize; ii++) &#123;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; columnSize; i++) &#123;</div><div class="line">allData[a++] = data[ii][i];</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">Arrays.sort(allData);</div><div class="line">Integer[] result1 = Arrays.copyOfRange(allData, <span class="number">0</span>, columnSize);</div><div class="line">System.out.println(<span class="string">"method 1 result:        "</span> + Arrays.toString(result1));</div></pre></td></tr></table></figure>
<h2 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h2><p>先定义一个 merge 函数，从两个数组里面得到前500个数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * <span class="doctag">@param</span> first</div><div class="line"> *            数组1</div><div class="line"> * <span class="doctag">@param</span> second</div><div class="line"> *            数组2</div><div class="line"> * <span class="doctag">@param</span> n</div><div class="line"> *            数组的长度，假定 first 和 second 的长度均为 n</div><div class="line"> * <span class="doctag">@return</span> 返回一个长度为 n 的数组</div><div class="line"> */</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Integer[] merge(Integer[] first, Integer[] second, <span class="keyword">int</span> n) &#123;</div><div class="line"></div><div class="line">	<span class="comment">// 构建一个数组，这是归并排序的缺点，需要额外空间</span></div><div class="line">	Integer[] temp = <span class="keyword">new</span> Integer[n];</div><div class="line"></div><div class="line">	<span class="keyword">int</span> f = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> s = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (i != n &amp;&amp; f &lt;= n &amp;&amp; s &lt;= n) &#123;</div><div class="line">		<span class="keyword">if</span> (first[f] &lt; second[s]) &#123;</div><div class="line">			temp[i++] = first[f++];</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			temp[i++] = second[s++];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> temp;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下来是总的归并代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法2，归并，先归并前两个数组，取前500个数据。将得到的结果再与第3个归并，重复</span></div><div class="line"><span class="comment">// 考虑一下,20个数组先两两归并，得到10个；10个再两两归并，得到5个。等等，直到最后1个</span></div><div class="line"><span class="comment">// 但这样归并的次数和从前往后两两归并的次数是一样的？所以还是 上述的从前往后好了</span></div><div class="line"><span class="comment">// 复杂度是 19*500</span></div><div class="line">Integer[] result2 = data[<span class="number">0</span>];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; rowSize; i++) &#123;</div><div class="line">	result2 = merge(result2, data[i], columnSize);</div><div class="line">&#125;</div><div class="line"></div><div class="line">System.out.println(<span class="string">"method 2 result:        "</span> + Arrays.toString(result2));</div><div class="line"></div><div class="line">System.out.println(<span class="string">"result1 equals result2: "</span> + Arrays.equals(result1, result2));</div></pre></td></tr></table></figure>
<h2 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h2><p>定义一个最小堆，有插入和删除方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * 最小堆和堆排序, 最小堆，顶点的元素是最小值， 根据《Java 语言程序设计 进阶篇》 p83 改写， 书上是最大堆. 堆排序</div><div class="line"> * 将元素都存入最小堆中，从最小堆里面每次取出顶点元素</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> tomchen</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> &lt;E&gt;</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinHeap</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;E extends Comparable&gt; <span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(E[] array)</span> </span>&#123;</div><div class="line">		MinHeap&lt;E&gt; heap = <span class="keyword">new</span> MinHeap&lt;E&gt;();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</div><div class="line">			heap.add(array[i]);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"Debug: heap is     "</span> + heap);</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</div><div class="line">			array[i] = heap.removeTop();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> ArrayList&lt;E&gt; data = <span class="keyword">new</span> ArrayList&lt;E&gt;();</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MinHeap</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 增加一个新元素，步骤是 1. 先把元素插入到 list 的末尾 2. 比较末尾元素和它的父元素，若小于，交换两者 3.</div><div class="line">	 * 重复上述步骤，直到到顶点位置或者子元素大于父元素 4. 不一定要遍历堆所有的元素，达到堆的性质后会提前结束</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> array</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E array)</span> </span>&#123;</div><div class="line"></div><div class="line">		data.add(array);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> child = data.size() - <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line"></div><div class="line">		<span class="comment">// 判断是否到达顶点</span></div><div class="line">		<span class="keyword">while</span> (child &gt; <span class="number">0</span>) &#123;</div><div class="line">			<span class="comment">// 父元素大于子元素，交换，保持父是小的</span></div><div class="line">			<span class="keyword">if</span> (data.get(parent).compareTo(array) &gt; <span class="number">0</span>) &#123;</div><div class="line">				data.set(child, data.get(parent));</div><div class="line">				data.set(parent, array);</div><div class="line"></div><div class="line">				child = parent;</div><div class="line">				parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="comment">// 已经是最小堆了，无需再比较</span></div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 删除顶点处的元素，步骤是： 1. 把末尾的元素复制到顶点处 2. 然后比较此时顶点的值和左右子树，保持最小堆的性质 3.</div><div class="line">	 * 交换顶点和左右子树较小的值 4. 重复上述步骤，直到已经成了最小堆或者遍历完 5. 注意可能存在左子树存在，右子树不存在情况 6.</div><div class="line">	 * 不一定要遍历堆所有的元素，达到堆的性质后会提前结束</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@return</span> 返回被删除的元素</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> E <span class="title">removeTop</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (data.isEmpty())</div><div class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line"></div><div class="line">		E removed = data.get(<span class="number">0</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 因为一直交换的是最后的元素，这儿将其保存</span></div><div class="line">		E last = data.get(data.size() - <span class="number">1</span>);</div><div class="line">		data.set(<span class="number">0</span>, last);</div><div class="line">		data.remove(data.size() - <span class="number">1</span>);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> parent = <span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> leftChild = parent * <span class="number">2</span> + <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> rightChild = parent * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line"></div><div class="line">		<span class="keyword">while</span> (leftChild &lt;= data.size() - <span class="number">1</span>) &#123;</div><div class="line"></div><div class="line">			<span class="keyword">int</span> minIndex = leftChild;</div><div class="line">			<span class="comment">// 右子树存在，判断左右子树哪个小，保存坐标</span></div><div class="line">			<span class="comment">// 如果不存在，那么使用左子树的坐标</span></div><div class="line">			<span class="comment">// 保存较小元素的坐标，可以省去考虑左右子树都存在，只有左存在的情况</span></div><div class="line">			<span class="keyword">if</span> (rightChild &lt;= data.size() - <span class="number">1</span>) &#123;</div><div class="line">				<span class="keyword">if</span> (data.get(rightChild).compareTo(data.get(leftChild)) &lt; <span class="number">0</span>) &#123;</div><div class="line">					minIndex = rightChild;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (data.get(minIndex).compareTo(last) &lt; <span class="number">0</span>) &#123;</div><div class="line">				data.set(parent, data.get(minIndex));</div><div class="line">				data.set(minIndex, last);</div><div class="line">				parent = minIndex;</div><div class="line">				leftChild = parent * <span class="number">2</span> + <span class="number">1</span>;</div><div class="line">				rightChild = parent * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">break</span>; <span class="comment">// 已经达到了最小堆的性质</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> removed;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> data.toString();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>为了能够记录堆里的元素来自哪个数组，以及在数组里的位置，我们使用一个内部类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataWithSource</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">DataWithSource</span>&gt; </span>&#123;</div><div class="line">	<span class="comment">// 数据</span></div><div class="line">	<span class="keyword">private</span> Integer value;</div><div class="line">	<span class="comment">// 来源的数组</span></div><div class="line">	<span class="keyword">private</span> Integer comeFrom;</div><div class="line">	<span class="comment">// 在数组中的 index</span></div><div class="line">	<span class="keyword">private</span> Integer index;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DataWithSource</span><span class="params">(Integer value, Integer comeFrom, Integer index)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.value = value;</div><div class="line">		<span class="keyword">this</span>.comeFrom = comeFrom;</div><div class="line">		<span class="keyword">this</span>.index = index;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getComeFrom</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> comeFrom;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> value;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Integer value)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.value = value;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> index;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(Integer index)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.index = index;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(DataWithSource o)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.value.compareTo(o.value);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面是方法3的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	Random r = <span class="keyword">new</span> Random();</div><div class="line"></div><div class="line">	<span class="keyword">int</span> rowSize = <span class="number">20</span>;</div><div class="line">	<span class="keyword">int</span> columnSize = <span class="number">500</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 注意 java 二维数组其实是一维数组，里面包含的也是一维数组</span></div><div class="line">	Integer[][] data = <span class="keyword">new</span> Integer[rowSize][columnSize];</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> ii = <span class="number">0</span>; ii &lt; rowSize; ii++) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; columnSize; i++) &#123;</div><div class="line">			data[ii][i] = r.nextInt(<span class="number">1600</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 将500个元素排序，升序</span></div><div class="line">		Arrays.sort(data[ii]);</div><div class="line">		<span class="comment">// System.out.println(Arrays.toString(data[ii]));</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 方法1，直接将20个数组合并，排序，然后取前500个</span></div><div class="line">	<span class="comment">// 复杂度是 10000log(10000)</span></div><div class="line">	Integer[] allData = <span class="keyword">new</span> Integer[<span class="number">20</span> * <span class="number">500</span>];</div><div class="line">	<span class="keyword">int</span> a = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> ii = <span class="number">0</span>; ii &lt; rowSize; ii++) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; columnSize; i++) &#123;</div><div class="line">			allData[a++] = data[ii][i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	Arrays.sort(allData);</div><div class="line">	Integer[] result1 = Arrays.copyOfRange(allData, <span class="number">0</span>, columnSize);</div><div class="line">	System.out.println(<span class="string">"method 1 result:        "</span> + Arrays.toString(result1));</div><div class="line"></div><div class="line">	<span class="comment">// 方法2，归并，先归并前两个数组，取前500个数据。将得到的结果再与第3个归并，重复</span></div><div class="line">	<span class="comment">// 考虑一下,20个数组先两两归并，得到10个；10个再两两归并，得到5个。等等，直到最后1个</span></div><div class="line">	<span class="comment">// 但这样归并的次数和从前往后两两归并的次数是一样的？所以还是 上述的从前往后好了</span></div><div class="line">	<span class="comment">// 复杂度是 19*500</span></div><div class="line">	Integer[] result2 = data[<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; rowSize; i++) &#123;</div><div class="line">		result2 = merge(result2, data[i], columnSize);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"method 2 result:        "</span> + Arrays.toString(result2));</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"result1 equals result2: "</span> + Arrays.equals(result1, result2));</div><div class="line"></div><div class="line">	<span class="comment">// 方法3，保持一个最小堆，这个堆存放来自20个数组的最小数</span></div><div class="line">	<span class="comment">// 每次取出一个数，然后将该数所在的数组的后面一个数入堆</span></div><div class="line">	<span class="comment">// 重复上面步骤，取出500个数</span></div><div class="line">	<span class="comment">// 注意建堆的时候需要保持 数来自哪个数组，用一个内部类实现</span></div><div class="line">	<span class="comment">// 复杂度是 500 * log(20)</span></div><div class="line">	Integer[] result3 = <span class="keyword">new</span> Integer[<span class="number">500</span>];</div><div class="line">	MinHeap&lt;DataWithSource&gt; heap = <span class="keyword">new</span> MinHeap&lt;DataWithSource&gt;();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rowSize; i++) &#123;</div><div class="line">		<span class="comment">// 记录下来源那个数组，以及在数组中的 index</span></div><div class="line">		DataWithSource d = <span class="keyword">new</span> DataWithSource(data[i][<span class="number">0</span>], i, <span class="number">0</span>);</div><div class="line">		heap.add(d);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> num = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (num &lt; columnSize) &#123;</div><div class="line">		<span class="comment">// 删除顶点元素</span></div><div class="line">		DataWithSource d = heap.removeTop();</div><div class="line">		result3[num++] = d.getValue();</div><div class="line"></div><div class="line">		<span class="comment">// 将 value 置为该数原数组里的下一个数</span></div><div class="line">		d.setValue(data[d.getComeFrom()][d.getIndex() + <span class="number">1</span>]);</div><div class="line"></div><div class="line">		<span class="comment">// 将其在数组中的 index +1</span></div><div class="line">		d.setIndex(d.getIndex() + <span class="number">1</span>);</div><div class="line">		heap.add(d);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	System.out.println(<span class="string">"method 3 result:        "</span> + Arrays.toString(result3));</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"result2 equals result3: "</span> + Arrays.equals(result2, result3));</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">method <span class="number">1</span> result:        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">79</span>, <span class="number">79</span>]</div><div class="line">method <span class="number">2</span> result:        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">79</span>, <span class="number">79</span>]</div><div class="line">result1 equals result2: <span class="keyword">true</span></div><div class="line">method <span class="number">3</span> result:        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">79</span>, <span class="number">79</span>]</div><div class="line">result2 equals result3: <span class="keyword">true</span></div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/arrays-sort/" data-id="ciyyds54y0001buxbsr6bc4rg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-recyclerview-push" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/recyclerview-push/" class="article-date">
  <time datetime="2016-08-25T11:20:58.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/recyclerview-push/">Android实现RecyclerView下拉刷新和上拉加载更多</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>先上效果图， Material Design风格的下拉刷新和上拉加载更多。</p>
<p><img src="http://img.blog.csdn.net/20160228161108026" alt="blog.csdn.net/never_cxb" title="screenshot" width="270" height="486"> </p>
<p>源码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>
<p>如果对于RecyclerView还不熟悉，参见这篇 <a href="http://blog.csdn.net/never_cxb/article/details/50495505" target="_blank" rel="external">Android Material Design学习之RecyclerView代替 ListView</a></p>
<p>本文链接 <a href="http://blog.csdn.net/never_cxb/article/details/50759109" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50759109</a> 转载请注明出处</p>
<h1 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h1><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p>上拉时候会有一个圆形动画，刷新加载数据。</p>
<p><img src="http://img.blog.csdn.net/20160228110719719" width="40%" height="40%" alt="http://blog.csdn.net/never_cxb/" align="center"></p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>使用Google官方的<code>android.support.v4.widget.SwipeRefreshLayout</code></p>
<h2 id="列表RecyclerView的xml布局"><a href="#列表RecyclerView的xml布局" class="headerlink" title="列表RecyclerView的xml布局"></a>列表RecyclerView的xml布局</h2><p>给原来的RecyclerView增加一个SwipeRefreshLayout的父布局<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:background=&quot;?attr/listBackground&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line">    &lt;android.support.v4.widget.SwipeRefreshLayout</div><div class="line">        android:id=&quot;@+id/swiperefreshlayout&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;&gt;</div><div class="line">        &lt;!-- 新闻列表展示--&gt;</div><div class="line">        &lt;android.support.v7.widget.RecyclerView</div><div class="line">            android:id=&quot;@+id/rcv_article_origin&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;match_parent&quot; /&gt;</div><div class="line">    &lt;/android.support.v4.widget.SwipeRefreshLayout&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>
<h2 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h2><p>这儿有几个注意点：<br><code>setColorSchemeColors()</code>可以控制圆形动画的颜色，最多设置4个。</p>
<p><code>setOnRefreshListener</code> 设置下拉刷新的回调事件。</p>
<p>下拉刷新后，使用 AsyncTask 根据当前RecyclerView中首个Item的id来加载更多数据。</p>
<p>数据加载完毕后，使用<code>setRefreshing(false);</code>取消动画。</p>
<p>如果刷新后得到0条记录，提示<code>没有数据更新</code>。若得到&gt;0条数据，把数据加到RecyclerView中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">mSwipeRefreshLayout.setColorSchemeColors(Color.RED, Color.BLUE);</div><div class="line">mSwipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() &#123;</div><div class="line">    @Override</div><div class="line">    public void onRefresh() &#123;</div><div class="line">        new MoreArticleTask().execute(mAdapter.getTopArticleId());</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">        </div><div class="line">// Integer 是输入参数</div><div class="line">// 得到比某个id大的新闻数组</div><div class="line">class MoreArticleTask extends AsyncTask&lt;Integer, Void, List&lt;SimpleArticleItem&gt;&gt; &#123;</div><div class="line">    @Override</div><div class="line">    protected List&lt;SimpleArticleItem&gt; doInBackground(Integer... params) &#123;</div><div class="line">        try &#123;</div><div class="line">            Thread.sleep(1500);</div><div class="line">        &#125; catch (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return getMoreById(mColumn, params[0]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onPostExecute(List&lt;SimpleArticleItem&gt; simpleArticleItems) &#123;</div><div class="line">        super.onPostExecute(simpleArticleItems);</div><div class="line"></div><div class="line">        if (mSwipeRefreshLayout != null) &#123;</div><div class="line">            mSwipeRefreshLayout.setRefreshing(false);</div><div class="line">        &#125;</div><div class="line">        //没有新的数据，提示消息</div><div class="line">        if (simpleArticleItems == null || simpleArticleItems.size() == 0) &#123;</div><div class="line">            Snackbar.with(mActivity.getApplicationContext()) // context</div><div class="line">                    .text(mActivity.getResources().getString(R.string.list_more_data)) // text to display</div><div class="line">                    .duration(Snackbar.SnackbarDuration.LENGTH_SHORT) // make it shorter</div><div class="line">                    .show(mActivity); // activity where it is displayed</div><div class="line">        &#125; else &#123;</div><div class="line">            mArticleList.addAll(simpleArticleItems);</div><div class="line">            mAdapter.notifyDataSetChanged();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="首次进入页面就显示加载ing的动画"><a href="#首次进入页面就显示加载ing的动画" class="headerlink" title="首次进入页面就显示加载ing的动画"></a>首次进入页面就显示加载ing的动画</h2><p>效果如下：</p>
<p><img src="http://img.blog.csdn.net/20160228111027125" width="40%" height="40%" alt="http://blog.csdn.net/never_cxb/" align="center"></p>
<p>直接使用 <code>mSwipeRefreshLayout.setRefreshing(true);</code>加载动画初始状态并不显示。</p>
<p>看了 <a href="http://stackoverflow.com/questions/26858692/swiperefreshlayout-setrefreshing-not-showing-indicator-initially" target="_blank" rel="external">http://stackoverflow.com/questions/26858692/swiperefreshlayout-setrefreshing-not-showing-indicator-initially</a> 的解答，<br>改用下面的代码，初始状态就有加载动画显示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mSwipeRefreshLayout.post(new Runnable() &#123;</div><div class="line">    @Override</div><div class="line">    public void run() &#123;</div><div class="line">        mSwipeRefreshLayout.setRefreshing(true);</div><div class="line">        new MoreArticleTask().execute(mAdapter.getTopArticleId());</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h1 id="上拉加载更多"><a href="#上拉加载更多" class="headerlink" title="上拉加载更多"></a>上拉加载更多</h1><p>RecyclerView 展示列表是个通用需求，那么当数据较多时候，如何实现分页加载呢？</p>
<p>比如笔者的项目中，先加载15条新闻，当滑动到底部时候，再加载15条。</p>
<h2 id="效果图-1"><a href="#效果图-1" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20160228112544303" width="40%" height="40%" alt="http://blog.csdn.net/never_cxb/" align="center"></p>
<h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><p>在RecyclerView底部增加一个Footer的ViewHolder，数据加载完毕取出底部的ViewHolder。</p>
<h2 id="底部Footer的xml布局文件"><a href="#底部Footer的xml布局文件" class="headerlink" title="底部Footer的xml布局文件"></a>底部Footer的xml布局文件</h2><p>很简单，就是一个ProgressBar。本项目为了Material Design，使用了一个开源ProgressBar  <a href="https://github.com/Todd-Davies/ProgressWheel" target="_blank" rel="external">https://github.com/Todd-Davies/ProgressWheel</a>，你也可以使用原生的ProgressBar。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!--上拉加载更多 RecyclerView 底部--&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:wheel=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line">    &lt;com.pnikosis.materialishprogress.ProgressWheel</div><div class="line">        android:id=&quot;@+id/rcv_load_more&quot;</div><div class="line">        android:layout_width=&quot;40dp&quot;</div><div class="line">        android:layout_height=&quot;40dp&quot;</div><div class="line">        android:layout_gravity=&quot;center_horizontal&quot;</div><div class="line">        wheel:matProg_barColor=&quot;@color/accent&quot;</div><div class="line">        wheel:matProg_progressIndeterminate=&quot;true&quot; /&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>
<p>##底部Footer的ViewHolder</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 底部加载更多</div><div class="line"> */</div><div class="line">class FooterViewHolder extends RecyclerView.ViewHolder &#123;</div><div class="line">    @InjectView(R.id.rcv_load_more)</div><div class="line">    ProgressWheel rcvLoadMore;</div><div class="line"></div><div class="line">    public FooterViewHolder(View itemView) &#123;</div><div class="line">        super(itemView);</div><div class="line">        ButterKnife.inject(this, itemView);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="在Fragment中给RecyclerView增加滑动监听"><a href="#在Fragment中给RecyclerView增加滑动监听" class="headerlink" title="在Fragment中给RecyclerView增加滑动监听"></a>在Fragment中给RecyclerView增加滑动监听</h2><p><code>layoutManager.getItemCount()</code> 可以得到当前RecyclerView中Item的总数目</p>
<p> <code>layoutManager.findLastVisibleItemPosition()</code> 得到最后一个可见的Item的位置position </p>
<p>如果 totalItemCount &lt; (lastVisibleItem + Constant.VISIBLE_THRESHOLD) </p>
<p>比如一共15个Item，当前到达第13个， Constant.VISIBLE_THRESHOLD设为3<br>总数小于最后一个+阈值，就加载更多新闻数据，同时把loading标记为 true 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">private boolean loading = false;</div><div class="line"></div><div class="line">@Override</div><div class="line">public void onActivityCreated(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">    super.onActivityCreated(savedInstanceState);</div><div class="line">    </div><div class="line">    mRecyclerView.setLayoutManager(new LinearLayoutManager(mActivity));</div><div class="line"></div><div class="line">    mAdapter = new OriginArticleAdapter(mActivity, mArticleList);</div><div class="line"></div><div class="line">    mRecyclerView.setAdapter(mAdapter);</div><div class="line"></div><div class="line">    mRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() &#123;</div><div class="line">  </div><div class="line">        @Override</div><div class="line">        public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123;</div><div class="line"></div><div class="line">            super.onScrolled(recyclerView, dx, dy);</div><div class="line"></div><div class="line">            LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();</div><div class="line"></div><div class="line">            int totalItemCount = layoutManager.getItemCount();</div><div class="line">            </div><div class="line">            int lastVisibleItem = layoutManager.findLastVisibleItemPosition();</div><div class="line">            </div><div class="line">            if (!loading &amp;&amp; totalItemCount &lt; (lastVisibleItem + Constant.VISIBLE_THRESHOLD)) &#123;</div><div class="line">                new ArticleTask(mActivity).execute(mAdapter.getBottomArticleId());</div><div class="line">                loading = true;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="在Fragment中控制底部Footer"><a href="#在Fragment中控制底部Footer" class="headerlink" title="在Fragment中控制底部Footer"></a>在Fragment中控制底部Footer</h2><p>我们依然使用AsyncTask。</p>
<p>注意 <code>onPreExecute()</code> 给 mArticleList 增加了一个null标记Footer，如果是第一次进入页面（mArticleList为空）不需要加Footer。</p>
<p>当数据加载完毕后，用  <code>mArticleList.remove(mArticleList.size() - 1);</code>把最下面的Footer删除。</p>
<p>再用 <code>mArticleList.addAll(moreArticles);</code> 增加新增的新闻数据，</p>
<p>并用 <code>mAdapter.notifyDataSetChanged();</code> 通知 RecyclerView.Adapter 有数据改变。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">private List&lt;SimpleArticleItem&gt; mArticleList = new ArrayList&lt;SimpleArticleItem&gt;();</div><div class="line"></div><div class="line">class ArticleTask extends AsyncTask&lt;Integer, Void, List&lt;SimpleArticleItem&gt;&gt; &#123;</div><div class="line"></div><div class="line">    private Context mContext;</div><div class="line"></div><div class="line">    public ArticleTask(Context context) &#123;</div><div class="line">        mContext = context;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Runs on the UI thread before &#123;@link #doInBackground&#125;.</div><div class="line">     */</div><div class="line">    @Override</div><div class="line">    protected void onPreExecute() &#123;</div><div class="line">        super.onPreExecute();</div><div class="line">        if (mArticleList != null &amp;&amp; mArticleList.size() &gt; 0) &#123;</div><div class="line">            mArticleList.add(null);</div><div class="line">            </div><div class="line">            // notifyItemInserted(int position)，这个方法是在第position位置</div><div class="line">            // 被插入了一条数据的时候可以使用这个方法刷新，</div><div class="line">            // 注意这个方法调用后会有插入的动画，这个动画可以使用默认的，也可以自己定义。</div><div class="line">            mAdapter.notifyItemInserted(mArticleList.size() - 1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * @param params 偏移量 aid</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    @Override</div><div class="line">    protected List&lt;SimpleArticleItem&gt; doInBackground(Integer... params) &#123;</div><div class="line">        try &#123;</div><div class="line">            Thread.sleep(1500);</div><div class="line">        &#125; catch (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return getArticleList(mColumn, params[0]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onPostExecute(final List&lt;SimpleArticleItem&gt; moreArticles) &#123;</div><div class="line">        // 新增新闻数据</div><div class="line">        super.onPostExecute(moreArticles);</div><div class="line">        if (mArticleList.size() == 0) &#123;</div><div class="line">            mArticleList.addAll(moreArticles);</div><div class="line">            mAdapter.notifyDataSetChanged();</div><div class="line">        &#125; else &#123;</div><div class="line">            //删除 footer</div><div class="line">            mArticleList.remove(mArticleList.size() - 1);</div><div class="line">            mArticleList.addAll(moreArticles);</div><div class="line">            mAdapter.notifyDataSetChanged();</div><div class="line">            loading = false;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Override-RecyclerView-Adapter-中的-getItemViewType"><a href="#Override-RecyclerView-Adapter-中的-getItemViewType" class="headerlink" title="Override RecyclerView.Adapter 中的 getItemViewType"></a>Override RecyclerView.Adapter 中的 getItemViewType</h2><p><code>extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;</code> 如果是null，返回Footer的Type；否则，返回正常新闻的Type。</p>
<p>本文，为了UI美观，把新闻分为两种：大于3幅图片 、小于3幅图片，相应返回不同的Type和ViewHolder。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">public final static int TYPE_MULTI_IMAGES = 2; // 多个图片的文章</div><div class="line">public final static int TYPE_FOOTER = 3;//底部--往往是loading_more</div><div class="line">public final static int TYPE_NORMAL = 1; // 正常的一条文章</div><div class="line">@Override</div><div class="line">public int getItemViewType(int position) &#123;</div><div class="line"></div><div class="line">    SimpleArticleItem article = articleList.get(position);</div><div class="line">    if (article == null) &#123;</div><div class="line">        return TYPE_FOOTER;</div><div class="line">    &#125; else if (article.getImageUrls().length &gt;= 3) &#123;</div><div class="line">        return TYPE_MULTI_IMAGES;</div><div class="line">    &#125; else &#123;</div><div class="line">        return TYPE_NORMAL;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Override-RecyclerView-Adapter-中的-onCreateViewHolder"><a href="#Override-RecyclerView-Adapter-中的-onCreateViewHolder" class="headerlink" title="Override RecyclerView.Adapter 中的 onCreateViewHolder"></a>Override RecyclerView.Adapter 中的 onCreateViewHolder</h2><p>在该方法中利用 <code>switch (viewType)</code> 返回不同的xml布局文件及ViewHolder<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</div><div class="line"></div><div class="line">    RecyclerView.ViewHolder vh;</div><div class="line">    View view;</div><div class="line">    switch (viewType) &#123;</div><div class="line">        //其他无法处理的情况使用viewholder_article_simple</div><div class="line">        default:</div><div class="line">        case TYPE_NORMAL:</div><div class="line">            view = mLayoutInflater.inflate(</div><div class="line">                    R.layout.item_article_normal, parent, false);</div><div class="line">            vh = new ItemArticleViewHolder(view);</div><div class="line">            return vh;</div><div class="line">        case TYPE_FOOTER:</div><div class="line">            view = mLayoutInflater.inflate(</div><div class="line">                    R.layout.recyclerview_footer, parent, false);</div><div class="line">            vh = new FooterViewHolder(view);</div><div class="line">            return vh;</div><div class="line">        case TYPE_MULTI_IMAGES:</div><div class="line">            view = mLayoutInflater.inflate(</div><div class="line">                    R.layout.item_article_multi_images, parent, false);</div><div class="line">            vh = new MultiImagesViewHolder(view);</div><div class="line">            return vh;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Override-RecyclerView-Adapter-中的-onBindViewHolder"><a href="#Override-RecyclerView-Adapter-中的-onBindViewHolder" class="headerlink" title="Override RecyclerView.Adapter 中的 onBindViewHolder"></a>Override RecyclerView.Adapter 中的 onBindViewHolder</h2><p>利用 instanceof 判断是何种类型的ViewHolder，来给控件赋值、绑定数据。</p>
<p>注意：因为Footer是用null表示的，为了防止NullPointerException，<br>我们先用if把FooterViewHolder的情况处理了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public void onBindViewHolder(final RecyclerView.ViewHolder holder, int position) &#123;</div><div class="line"></div><div class="line">    //这时候 article是 null，先把 footer 处理了</div><div class="line">    if (holder instanceof FooterViewHolder) &#123;</div><div class="line">        ((FooterViewHolder) holder).rcvLoadMore.spin();</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    SimpleArticleItem article = articleList.get(position);</div><div class="line">    String[] imageUrls = article.getImageUrls();</div><div class="line"></div><div class="line">    if (holder instanceof ItemArticleViewHolder) &#123;</div><div class="line">        ItemArticleViewHolder newHolder = (ItemArticleViewHolder) holder;</div><div class="line">        newHolder.rcvArticleTitle.setText(article.getTitle());</div><div class="line">        newHolder.rcvArticleDate.setText(article.getPublishDate());</div><div class="line">        //当图片小于3张时候 选取第1张图片</div><div class="line">        if (imageUrls.length &gt; 0) &#123;</div><div class="line">            newHolder.rcvArticlePhoto.setImageURI(Uri.parse(Constant.BUCKET_HOST_NAME</div><div class="line">                    + imageUrls[0]));</div><div class="line">        &#125; else &#123;</div><div class="line">            newHolder.rcvArticlePhoto.setImageURI(Uri.parse(ApiUrl.randomImageUrl(article.getId())));</div><div class="line">        &#125;</div><div class="line">        //注意这个阅读次数是 int 类型，需要转化为 String 类型</div><div class="line">        newHolder.rcvArticleReadtimes.setText(&quot;浏览: &quot; + article.getReadTimes());</div><div class="line"></div><div class="line">        newHolder.rcvArticleSummary.setText(article.getSummary());</div><div class="line">    &#125; else &#123;</div><div class="line">        MultiImagesViewHolder newHolder = (MultiImagesViewHolder) holder;</div><div class="line">        newHolder.articleTitle.setText(article.getTitle());</div><div class="line">        newHolder.articlePic1.setImageURI(Uri.parse(Constant.BUCKET_HOST_NAME + imageUrls[0]));</div><div class="line">        newHolder.articlePic2.setImageURI(Uri.parse(Constant.BUCKET_HOST_NAME + imageUrls[1]));</div><div class="line">        newHolder.articlePic3.setImageURI(Uri.parse(Constant.BUCKET_HOST_NAME + imageUrls[2]));</div><div class="line">        newHolder.countPics.setText(&quot;图片: &quot; + imageUrls.length);</div><div class="line">        newHolder.countRead.setText(&quot;浏览: &quot; + article.getReadTimes());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下拉刷新和上拉加载更多的源码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>
<p>本文链接 <a href="http://blog.csdn.net/never_cxb/article/details/50759109" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50759109</a> 转载请注明出处</p>
<h1 id="一些坑"><a href="#一些坑" class="headerlink" title="一些坑"></a>一些坑</h1><p>注意给RecyclerView setLayoutManager，不然RecyclerView可能不显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 1. get a reference to recyclerView</div><div class="line">RecyclerView recyclerView = (RecyclerView) findViewById(R.id.list);</div><div class="line"></div><div class="line">// 2. set layoutManger</div><div class="line">recyclerView.setLayoutManager(new LinearLayoutManager(this));</div></pre></td></tr></table></figure></p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><a href="http://android-pratap.blogspot.com/2015/06/endless-recyclerview-with-progress-bar.html" target="_blank" rel="external">LoadMore RecyclerView with progress bar showing at bottom</a></li>
<li><a href="http://blog.csdn.net/never_cxb/article/details/50495505" target="_blank" rel="external">Android Material Design学习之RecyclerView代替 ListView</a></li>
<li><a href="http://sapandiwakar.in/pull-to-refresh-for-android-recyclerview-or-any-other-vertically-scrolling-view/" target="_blank" rel="external">Swipe/Pull to Refresh for Android RecyclerView (or any other vertically scrolling view)</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/recyclerview-push/" data-id="ciyyds56c0014buxbjzq6k42z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-gif-record" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/gif-record/" class="article-date">
  <time datetime="2016-08-25T04:56:22.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/gif-record/">如何演示你的App? Android录制Gif动态图教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p><img src="http://img.blog.csdn.net/20160114151526418" width="280" height="400" alt="统计结果1" align="center"></p>
<p>Android App开发完了，自然希望录个gif做个展示。视频也可以做展示，但是需要上传到优酷、土豆等等，没有gif轻量简单省流量。</p>
<p>本文教大家如何录制gif，链接  <a href="http://www.alijava.com/gif-record/" target="_blank" rel="external">http://www.alijava.com/gif-record/</a>，转载请注明出处。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>生成gif的思路是两步</p>
<ol>
<li>把App操作过程录制成视频</li>
<li>根据视频转换成Gif</li>
</ol>
<blockquote>
<p>目前网上录制GIf的思路也基本都是分为这2步，不知道有没有更好的方法，一步就生成gif动态的？欢迎留言补充</p>
</blockquote>
<h2 id="利用adb-录制屏幕"><a href="#利用adb-录制屏幕" class="headerlink" title="利用adb 录制屏幕"></a>利用adb 录制屏幕</h2><p>在Android sdk下面有一些很有用的工具，adb位于platform-tools文件夹，开发者用它在设备上安装启动应用。早期的sdk版本中，adb位于tools文件夹中。</p>
<p>在终端（linux或者mac os）或者命令提示符（windows）键入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">adb help all</div></pre></td></tr></table></figure>
<p>可以列出所有可用的命令。</p>
<blockquote>
<p>注意，如果经常使用adb工具，建立把sdk的文件夹路径添加到PATH环境变量中。不加入到环境变量中，每次启动adb都需要cd到platform-tools文件夹的位置。</p>
</blockquote>
<p>我们录制屏幕利用 <code>adb shell screenrecord</code>命令，还可以使用<code>adb shell screenshot</code>进行截屏。下面是使用说明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">tomchen$ ./adb shell screenrecord --help</div><div class="line">Usage: screenrecord [options] &lt;filename&gt;</div><div class="line"></div><div class="line">Records the device&apos;s display to a .mp4 file.</div><div class="line"></div><div class="line">Options:</div><div class="line">--size WIDTHxHEIGHT</div><div class="line">    Set the video size, e.g. &quot;1280x720&quot;.  Default is the device&apos;s main</div><div class="line">    display resolution (if supported), 1280x720 if not.  For best results,</div><div class="line">    use a size supported by the AVC encoder.</div><div class="line">--bit-rate RATE</div><div class="line">    Set the video bit rate, in megabits per second.  Default 4Mbps.</div><div class="line">--time-limit TIME</div><div class="line">    Set the maximum recording time, in seconds.  Default / maximum is 180.</div><div class="line">--rotate</div><div class="line">    Rotate the output 90 degrees.</div><div class="line">--verbose</div><div class="line">    Display interesting information on stdout.</div><div class="line">--help</div><div class="line">    Show this message.</div><div class="line"></div><div class="line">Recording continues until Ctrl-C is hit or the time limit is reached.</div><div class="line"></div><div class="line">tomchen$ pwd</div><div class="line">/Applications/sdk/platform-tools</div></pre></td></tr></table></figure></p>
<p>可以用<code>--size</code>指定视频分辨率的大小，<code>--bit-rate</code>指定比特率的大小。一般我们不需要设置，用默认的就行了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tomchen$ ./adb shell screenrecord /sdcard/example.mp4</div></pre></td></tr></table></figure>
<p>然后就可以录制的，默认时间是180s ，一般不需要这么长，录制完之后我们<code>ctrl+c</code>提前结束就行。<br>下面利用 pull 命令把手机上的视频拷到电脑上（也可以用手机助手啥的）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adb push &lt;local&gt; &lt;remote&gt; 将电脑上的文件复制到手机（通常是 sd 卡）</div><div class="line">adb pull &lt;remote&gt; &lt;local&gt; 将手机上的文件复制到电脑</div></pre></td></tr></table></figure></p>
<p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tomchen$ ./adb pull /sdcard/example.mp4 ~/Documents/</div><div class="line">8786 KB/s (9449246 bytes in 1.050s)</div></pre></td></tr></table></figure></p>
<h2 id="Android-studio-自带录制功能"><a href="#Android-studio-自带录制功能" class="headerlink" title="Android studio 自带录制功能"></a>Android studio 自带录制功能</h2><p>现在一般都不要 Eclipse 开发 Android，转移到 Android Studio，录制屏幕的功能 google 自然想到了，点击开始按钮就行了（适合不熟悉命令行的同学们）<br>在 Android Studio 最下方的Android栏左边有一个按钮（下图红框圈出的部分），点击就可以实现录屏。还可以选择比特率、分辨率等，分辨率没空则采用默认值。</p>
<p><img src="http://img.blog.csdn.net/20160115102755678" width="80%" height="80%" alt="android" align="center"></p>
<p><strong>点击<code>Start Recording</code>就开始录制了，会弹出录制时间框</strong></p>
<p><img src="http://img.blog.csdn.net/20160115102907347" width="80%" height="80%" alt="android" align="center"></p>
<p><strong>录完之后点击<code>Stop Recording</code>，停止录制。</strong></p>
<p><img src="http://img.blog.csdn.net/20160115103003542" width="80%" height="80%" alt="android" align="center"></p>
<p><strong>最后会提示录制视频的保存位置，自己选个文件夹保存。</strong></p>
<p>Android Studio 也提供了截屏功能，就在录制按钮的上方</p>
<p><img src="http://img.blog.csdn.net/20160115102400372" width="50%" height="50%" alt="android" align="center"></p>
<p>点击截屏会弹出手机当前的操作界面，还可以用<code>Reload</code>刷新手机界面。</p>
<p><img src="http://img.blog.csdn.net/20160115103125635" width="80%" height="80%" alt="android" align="center"></p>
<h2 id="视频转-gif"><a href="#视频转-gif" class="headerlink" title="视频转 gif"></a>视频转 gif</h2><p>这儿方法也有很多</p>
<ul>
<li>格式工厂之类的，输入视频格式，导出为gif格式</li>
<li>截取很多帧图片，将多张图片拼接为gif</li>
<li>QQ影音工具箱自带了截取一段视频保存为gif格式</li>
</ul>
<p><strong>本文采用一种最简单的方法，利用一款叫 GifCam 的绿色版软件</strong></p>
<p>Windows 版本的GifCam 可以到这儿下载，不需要下载分数。 <a href="http://download.csdn.net/detail/never_cxb/9404806" target="_blank" rel="external">http://download.csdn.net/detail/never_cxb/9404806</a></p>
<p>使用方法很简单，</p>
<ol>
<li>用一个播放器打开咱们刚才录制好的mp4视频，然后拖动调整 GifCam 大小，让它的透明区域（录制gif区域）覆盖你要录制范围。</li>
<li>点击播放器播放视频，再点击GifCam的Rec按钮，就可以录制gif了。</li>
<li>录完点击stop按钮，选择gif文件保存位置。</li>
</ol>
<p><img src="http://img.blog.csdn.net/20160115103651009" alt="android"></p>
<hr>
<p>本文讲解Android 下如何录制App操作生成Gif动态图，链接  <a href="http://www.alijava.com/gif-record/" target="_blank" rel="external">http://www.alijava.com/gif-record/</a>，转载请注明出处。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/gif-record/" data-id="ciyyds55i000abuxb5vpwczbq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jsoup-crawler" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/jsoup-crawler/" class="article-date">
  <time datetime="2016-08-25T04:50:39.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/jsoup-crawler/">Java基于Jsoup爬虫给App提供数据</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>最近基于 Material Design 重构了自己的新闻 App，数据来源是个问题。</p>
<p>有前人分析了知乎日报、凤凰新闻等 API，根据相应的 URL 可以获取新闻的 JSON 数据。为了锻炼写代码能力，笔者打算爬虫新闻页面，自己获取数据构建 API。</p>
<p>本文链接 <a href="http://blog.csdn.net/never_cxb/article/details/50524571" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50524571</a> 转载请注明出处</p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p>下图是原网站的页面 </p>
<p><img src="http://img.blog.csdn.net/20160116094429306" width="50%" height="50%" alt="blog.csdn.net/never_cxb" align="center"></p>
<p>爬虫获取了数据，展示到 APP 手机端</p>
<p><img src="http://img.blog.csdn.net/20160116100112313" width="50%" height="50%" alt="blog.csdn.net/never_cxb" align="center"></p>
<h2 id="爬虫思路"><a href="#爬虫思路" class="headerlink" title="爬虫思路"></a>爬虫思路</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">st=&gt;start: 开始</div><div class="line">e=&gt;end: 结束</div><div class="line">op1=&gt;operation: 基于Get请求获取URL对于的网页Html</div><div class="line">op2=&gt;operation: 利用Jsoup把Html解析为Document</div><div class="line">op3=&gt;operation: 利用Dom的getElementsById等方法获取标题、发布时间、内容等</div><div class="line">op4=&gt;operation: 根据标题、发布时间、内容构建javabean给APP使用</div><div class="line"></div><div class="line">st-&gt;op1-&gt;op2-&gt;op3-&gt;op4-&gt;e</div></pre></td></tr></table></figure>
<p>关于 App 的实现过程可以参看这几篇文章，本文主要讲解一下如何爬虫数据。</p>
<ul>
<li>Android 下如何录制App操作生成Gif动态图  <a href="http://blog.csdn.net/never_cxb/article/details/50515216" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50515216</a></li>
<li>Android Material Design学习之RecyclerView代替 ListView <a href="http://blog.csdn.net/never_cxb/article/details/50495505" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50495505</a></li>
<li>仿网易新闻的页面（ViewPager作为RecyclerView的Header） <a href="http://blog.csdn.net/never_cxb/article/details/50520270" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50520270</a></li>
</ul>
<h2 id="Jsoup-简介"><a href="#Jsoup-简介" class="headerlink" title="Jsoup 简介"></a>Jsoup 简介</h2><p>Jsoup 是一个 Java 的开源HTML解析器，可直接解析某个URL地址、HTML文本内容。</p>
<p>Jsoup主要有以下功能：</p>
<pre><code>- 从一个URL，文件或字符串中解析HTML；

- 使用DOM或CSS选择器来查找、取出数据；

- 对HTML元素、属性、文本进行操作；

- 清除不受信任的HTML (来防止XSS攻击)
</code></pre><p>到官网下载相应的Jsoup依赖包 <a href="http://jsoup.org/download" target="_blank" rel="external">http://jsoup.org/download</a></p>
<h2 id="Get-请求获取网页-HTML"><a href="#Get-请求获取网页-HTML" class="headerlink" title="Get 请求获取网页 HTML"></a>Get 请求获取网页 HTML</h2><p>新闻网页Html的DOM树如下所示：</p>
<p><img src="http://img.blog.csdn.net/20160116104215213" alt="http://blog.csdn.net/never_cxb"></p>
<p>下面这段代码根据指定的 url，用代码获取get 请求返回的 html 源代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">public static String doGet(String urlStr) throws CommonException &#123;</div><div class="line">	URL url;</div><div class="line">	String html = &quot;&quot;;</div><div class="line">	try &#123;</div><div class="line">		url = new URL(urlStr);</div><div class="line">		HttpURLConnection connection = (HttpURLConnection) url.openConnection();</div><div class="line">		connection.setRequestMethod(&quot;GET&quot;);</div><div class="line">		connection.setConnectTimeout(5000);</div><div class="line">		connection.setDoInput(true);</div><div class="line">		connection.setDoOutput(true);</div><div class="line">		if (connection.getResponseCode() == 200) &#123;</div><div class="line">			InputStream in = connection.getInputStream();</div><div class="line">			html = StreamTool.inToStringByByte(in);</div><div class="line">		&#125; else &#123;</div><div class="line">			throw new CommonException(&quot;新闻服务器返回值不为200&quot;);</div><div class="line">		&#125;</div><div class="line">	&#125; catch (Exception e) &#123;</div><div class="line">		e.printStackTrace();</div><div class="line">		throw new CommonException(&quot;get请求失败&quot;);</div><div class="line">	&#125;</div><div class="line">	return html;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>InputStream in = connection.getInputStream();</code>将得到输入流转化为字符串是个普遍需求，我们将其抽象出来，写一个工具方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public class StreamTool &#123;</div><div class="line">	public static String inToStringByByte(InputStream in) throws Exception &#123;</div><div class="line">		ByteArrayOutputStream outStr = new ByteArrayOutputStream();</div><div class="line">		byte[] buffer = new byte[1024];</div><div class="line">		int len = 0;</div><div class="line">		StringBuilder content = new StringBuilder();</div><div class="line">		while ((len = in.read(buffer)) != -1) &#123;</div><div class="line">			content.append(new String(buffer, 0, len, &quot;UTF-8&quot;));</div><div class="line">		&#125;</div><div class="line">		outStr.close();</div><div class="line">		return content.toString();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="解析-HTML-获取标题"><a href="#解析-HTML-获取标题" class="headerlink" title="解析 HTML 获取标题"></a>解析 HTML 获取标题</h2><p>利用 google 浏览器的审查元素，找出新闻标题对于的html 代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;article_title&quot;&gt;</div><div class="line">  &lt;h1&gt;</div><div class="line">    &lt;a href=&quot;http://see.xidian.edu.cn/html/news/7428.html&quot;&gt;</div><div class="line">      关于举办《经典音乐作品欣赏与人文审美》讲座的通知</div><div class="line">    &lt;/a&gt;</div><div class="line">  &lt;/h1&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>我们需要从上面的 HTML 中找出<code>id=&quot;article_title&quot;</code>的部分，使用    getElementById(String id) 方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String htmlStr = HttpTool.doGet(urlStr);</div><div class="line"></div><div class="line">// 将获取的网页 HTML 源代码转化为 Document</div><div class="line">Document doc = Jsoup.parse(htmlStr);</div><div class="line"></div><div class="line">Element articleEle = doc.getElementById(&quot;article&quot;);</div><div class="line">// 标题</div><div class="line">Element titleEle = articleEle.getElementById(&quot;article_title&quot;);</div><div class="line">String titleStr = titleEle.text();</div></pre></td></tr></table></figure>
<h2 id="获取发布日期、信息来源"><a href="#获取发布日期、信息来源" class="headerlink" title="获取发布日期、信息来源"></a>获取发布日期、信息来源</h2><p>同样找出对于的 HTML 代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line"> &lt;head&gt;&lt;/head&gt;</div><div class="line"> &lt;body&gt;</div><div class="line">  &lt;div id=&quot;article_detail&quot;&gt; </div><div class="line">   &lt;span&gt; 2015-05-28 &lt;/span&gt; </div><div class="line">   &lt;span&gt; 来源: &lt;/span&gt; </div><div class="line">   &lt;span&gt; 浏览次数: &lt;script language=&quot;JavaScript&quot; src=&quot;http://see.xidian.edu.cn/index.php/news/click/id/7428&quot;&gt;</div><div class="line">    &lt;/script&gt; 477 &lt;/span&gt; </div><div class="line">  &lt;/div&gt;</div><div class="line"> &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>思路也和上面类似，使用    getElementById(String id) 方法找出<code>id=&quot;article_detail&quot;</code>为Element，再利用<code>getElementsByTag</code>获取<code>span 部分</code>。因为一共有3个<code>&lt;span&gt; ... &lt;/span&gt;</code>，所以返回的是Elements而不是Element。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// article_detail包括了 2016-01-15 来源: 浏览次数:177</div><div class="line">Element detailEle = articleEle.getElementById(&quot;article_detail&quot;);</div><div class="line">Elements details = detailEle.getElementsByTag(&quot;span&quot;);</div><div class="line"></div><div class="line">// 发布时间</div><div class="line">String dateStr = details.get(0).text();</div><div class="line"></div><div class="line">// 新闻来源</div><div class="line">String sourceStr = details.get(1).text();</div></pre></td></tr></table></figure>
<h2 id="解析浏览次数"><a href="#解析浏览次数" class="headerlink" title="解析浏览次数"></a>解析浏览次数</h2><p>如果打印出上面的<code>details.get(2).text()</code>，只会得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">浏览次数:</div></pre></td></tr></table></figure>
<p>没有浏览次数？为什么呢？</p>
<blockquote>
<p>因为浏览次数是JavaScript 渲染出来的， Jsoup爬虫可能仅仅提取HTML内容，得不到动态渲染出的数据。</p>
</blockquote>
<p>解决方法有两种</p>
<ul>
<li><p>在爬虫的时候，内置一个浏览器内核，执行js渲染页面后，再抓取。这方面对应的工具有Selenium、HtmlUnit或者PhantomJs。可以查看这篇文章 《抓取前端渲染的页面》 <a href="http://webmagic.io/docs/zh/posts/chx-cases/js-render-page.html" target="_blank" rel="external">http://webmagic.io/docs/zh/posts/chx-cases/js-render-page.html</a>。</p>
</li>
<li><p>所以分析JS请求，找到对应数据的请求url</p>
</li>
</ul>
<p>如果你访问上面的 url<code>http://see.xidian.edu.cn/index.php/news/click/id/7428</code>，会得到下面的结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document.write(478)</div></pre></td></tr></table></figure>
<p>这个<code>478</code>就是我们需要的浏览次数，我们对上面的url做get 请求，得到返回的字符串，利用正则找出其中的数字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 访问这个新闻页面，浏览次数会+1，次数是 JS 渲染的</div><div class="line">String jsStr = HttpTool.doGet(COUNT_BASE_URL + currentPage);</div><div class="line">int readTimes = Integer.parseInt(jsStr.replaceAll(&quot;\\D+&quot;, &quot;&quot;));</div><div class="line">// 或者使用下面这个正则方法</div><div class="line">// String readTimesStr = jsStr.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);</div></pre></td></tr></table></figure>
<hr>
<h2 id="解析新闻内容"><a href="#解析新闻内容" class="headerlink" title="解析新闻内容"></a>解析新闻内容</h2><p>笔者本来是获取新闻内容纯文字的形式，但后来发现 Android 端也可以显示 CSS 格式，所以后来内容保留了 HTML 格式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Element contentEle = articleEle.getElementById(&quot;article_content&quot;);</div><div class="line">// 新闻主体内容</div><div class="line">String contentStr = contentEle.toString();</div><div class="line">// 如果用 text()方法，新闻主体内容的 html 标签会丢失</div><div class="line">// 为了在 Android 上用 WebView 显示 html，用toString()</div><div class="line">// String contentStr = contentEle.text();</div></pre></td></tr></table></figure></p>
<h2 id="解析图片-Url"><a href="#解析图片-Url" class="headerlink" title="解析图片 Url"></a>解析图片 Url</h2><p>注意一个网页上大大小小的图片很多，为了只获取新闻正文中的内容，我们最好首先定位到新闻内容的Element，然后再利用getElementsByTag(“img”)筛选出图片。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Element contentEle = articleEle.getElementById(&quot;article_content&quot;);</div><div class="line">// 新闻主体内容</div><div class="line">String contentStr = contentEle.toString();</div><div class="line">// 如果用 text()方法，新闻主体内容的 html 标签会丢失</div><div class="line">// 为了在 Android 上用 WebView 显示 html，用toString()</div><div class="line">// String contentStr = contentEle.text();</div><div class="line"></div><div class="line">Elements images = contentEle.getElementsByTag(&quot;img&quot;);</div><div class="line">String[] imageUrls = new String[images.size()];</div><div class="line">for (int i = 0; i &lt; imageUrls.length; i++) &#123;</div><div class="line">	imageUrls[i] = images.get(i).attr(&quot;src&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="新闻实体类-JavaBean"><a href="#新闻实体类-JavaBean" class="headerlink" title="新闻实体类 JavaBean"></a>新闻实体类 JavaBean</h2><p>上面获取了新闻的标题、发布日期、阅读次数、新闻内容等等，我们自然需要构造一个 javabean，把获取的内容封装进实体类中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">public class ArticleItem &#123;</div><div class="line"></div><div class="line">	private int index;</div><div class="line">	private String[] imageUrls;</div><div class="line">	private String title;</div><div class="line">	private String publishDate;</div><div class="line">	private String source;</div><div class="line">	private int readTimes;</div><div class="line">	private String body;</div><div class="line"></div><div class="line">	public ArticleItem(int index, String[] imageUrls, String title, String publishDate, String source, int readTimes,</div><div class="line">			String body) &#123;</div><div class="line">		this.index = index;</div><div class="line">		this.imageUrls = imageUrls;</div><div class="line">		this.title = title;</div><div class="line">		this.publishDate = publishDate;</div><div class="line">		this.source = source;</div><div class="line">		this.readTimes = readTimes;</div><div class="line">		this.body = body;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public String toString() &#123;</div><div class="line">		return &quot;ArticleItem [index=&quot; + index + &quot;,\n imageUrls=&quot; + Arrays.toString(imageUrls) + &quot;,\n title=&quot; + title</div><div class="line">				+ &quot;,\n publishDate=&quot; + publishDate + &quot;,\n source=&quot; + source + &quot;,\n readTimes=&quot; + readTimes + &quot;,\n body=&quot; + body</div><div class="line">				+ &quot;]&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">public static ArticleItem getNewsItem(int currentPage) throws CommonException &#123;</div><div class="line">	// 根据后缀的数字，拼接新闻 url</div><div class="line">	String urlStr = ARTICLE_BASE_URL + currentPage + &quot;.html&quot;;</div><div class="line"></div><div class="line">	String htmlStr = HttpTool.doGet(urlStr);</div><div class="line"></div><div class="line">	Document doc = Jsoup.parse(htmlStr);</div><div class="line"></div><div class="line">	Element articleEle = doc.getElementById(&quot;article&quot;);</div><div class="line">	// 标题</div><div class="line">	Element titleEle = articleEle.getElementById(&quot;article_title&quot;);</div><div class="line">	String titleStr = titleEle.text();</div><div class="line"></div><div class="line">	// article_detail包括了 2016-01-15 来源: 浏览次数:177</div><div class="line">	Element detailEle = articleEle.getElementById(&quot;article_detail&quot;);</div><div class="line">	Elements details = detailEle.getElementsByTag(&quot;span&quot;);</div><div class="line"></div><div class="line">	// 发布时间</div><div class="line">	String dateStr = details.get(0).text();</div><div class="line"></div><div class="line">	// 新闻来源</div><div class="line">	String sourceStr = details.get(1).text();</div><div class="line"></div><div class="line">	// 访问这个新闻页面，浏览次数会+1，次数是 JS 渲染的</div><div class="line">	String jsStr = HttpTool.doGet(COUNT_BASE_URL + currentPage);</div><div class="line">	int readTimes = Integer.parseInt(jsStr.replaceAll(&quot;\\D+&quot;, &quot;&quot;));</div><div class="line">	// 或者使用下面这个正则方法</div><div class="line">	// String readTimesStr = jsStr.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);</div><div class="line"></div><div class="line">	Element contentEle = articleEle.getElementById(&quot;article_content&quot;);</div><div class="line">	// 新闻主体内容</div><div class="line">	String contentStr = contentEle.toString();</div><div class="line">	// 如果用 text()方法，新闻主体内容的 html 标签会丢失</div><div class="line">	// 为了在 Android 上用 WebView 显示 html，用toString()</div><div class="line">	// String contentStr = contentEle.text();</div><div class="line"></div><div class="line">	Elements images = contentEle.getElementsByTag(&quot;img&quot;);</div><div class="line">	String[] imageUrls = new String[images.size()];</div><div class="line">	for (int i = 0; i &lt; imageUrls.length; i++) &#123;</div><div class="line">		imageUrls[i] = images.get(i).attr(&quot;src&quot;);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	return new ArticleItem(currentPage, imageUrls, titleStr, dateStr, sourceStr, readTimes, contentStr);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">public static void main(String[] args) throws CommonException &#123;</div><div class="line">	System.out.println(getNewsItem(7928));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ArticleItem [index=7928,</div><div class="line"> imageUrls=[/uploads/image/20160114/20160114225911_34428.png],</div><div class="line"> title=电院2014级开展“让诚信之花开遍冬日校园”教育活动,</div><div class="line"> publishDate=2016-01-14,</div><div class="line"> source=来源: 电影新闻网,</div><div class="line"> readTimes=200,</div><div class="line"> body=&lt;div id=&quot;article_content&quot;&gt;</div><div class="line"> &lt;p style=&quot;text-indent:2em;&quot; align=&quot;justify&quot;&gt; &lt;strong&gt;&lt;span style=&quot;font-size:16px;line-height:1.5;&quot;&gt;西电新闻网讯&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;font-size:16px;line-height:1.5;&quot;&gt;&amp;nbsp;（通讯员&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;font-size:16px;line-height:1.5;&quot;&gt; 丁彤 王朱丹&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;font-size:16px;line-height:1.5;&quot;&gt;...）</div></pre></td></tr></table></figure>
<h2 id="展望"><a href="#展望" class="headerlink" title="展望"></a>展望</h2><p> 最近用 Material Design 重构了自己的新闻 App，新闻数据是利用 Jsoup 实现的。第1版爬虫是在手机端实现的（我承认这设计很不好，既费流量又增加客户端负担），后来在新浪云上实现了一个简单的 JSP ，过滤了原网页的图片、一级栏目等，只返回新闻标题、阅读次数、新闻内容等等。</p>
<p>本文链接 <a href="http://blog.csdn.net/never_cxb/article/details/50524571" target="_blank" rel="external">http://blog.csdn.net/never_cxb/article/details/50524571</a> 转载请注明出处</p>
<p>后期的打算是把爬虫这步移到新浪云上，返回格式化的 JSON 数据给客户端使用。可能的话，图片使用七牛CDN（Content Delivery Network 内容分发网络），在云上利用 Mysql 数据库缓存新闻信息。</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul>
<li>《Android网络爬虫程序（基于Jsoup）》<a href="http://songlee24.github.io/2015/01/11/android-crawler/" target="_blank" rel="external">http://songlee24.github.io/2015/01/11/android-crawler/</a></li>
<li>《 抓取csdn上的各类别的文章 （制作csdn app 二）》 <a href="http://blog.csdn.net/lmj623565791/article/details/23532797" target="_blank" rel="external">http://blog.csdn.net/lmj623565791/article/details/23532797</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/jsoup-crawler/" data-id="ciyyds55t000ibuxbcj9n7y97" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/爬虫/">爬虫</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-interview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/android-interview/" class="article-date">
  <time datetime="2016-08-25T04:31:36.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/android-interview/">Android程序员面试常见知识点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>根据笔者自己的阅读以及项目经验总结而言，不同于网上的copy来copy去。</p>
<p>转载请注明出处 <a href="http://www.baidujava.com/android-interview/" target="_blank" rel="external">http://www.baidujava.com/android-interview/</a> </p>
<h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><p>在子线程里面创建 Handler 对象会抛出异常<code>Can&#39;t create handler inside thread that has not called Looper.prepare()</code>。</p>
<p>但是加上<code>Looper.prepare();</code>不会抛出异常， 这个因为 Handler 对应一个 Looper，一个 Looper 对应一个线程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">new Thread(new Runnable() &#123;</div><div class="line">	@Override</div><div class="line">	public void run() &#123;</div><div class="line">		Looper.prepare();</div><div class="line">		handler2 = new Handler();</div><div class="line">        Looper.loop();</div><div class="line">	&#125;</div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<p>用 ThreadLocal 保存 Looper 对象<br><code>ThreadLocal&lt;Looper&gt; sThreadLocal = new ThreadLocal&lt;Looper&gt;();</code></p>
<p> 通过Looper.prepare()来创建Looper对象(消息队列封装在Looper对象中)，并且保存在sThreadLoal中，然后通过Looper.loop()来执行消息循环，这两步通常是成对出现的！！   </p>
<h2 id="xml解析"><a href="#xml解析" class="headerlink" title="xml解析"></a>xml解析</h2><p>个人理解：<br>Dom把xml全部加载，比较耗内存。<br>Sax是事件驱动，但是不支持随机读取，不能只处理部分元素。<br>Pull是Sax的改进，可以提前结束读取，Sax不能提前结束。</p>
<p>基本的解析方式包含两种，一种是事件驱动的（代表SAX），另一种方式是基于文档结构（代表DOM）。其他的只不过语法不一样而已。</p>
<p>Dom 方式解析xml，比较简单，并可以访问兄弟元素，但是需要将整个xml文档加载到内存中，对于android设备来说，不推荐使用dom的方式解析xml。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//    接收一个xml的字符串来解析xml,Document代表整个xml文档</div><div class="line">Document document = builder.parse(inputStream);</div><div class="line">//    得到xml文档的根元素节点</div><div class="line">Element personsElement = document.getDocumentElement();</div><div class="line">//    得到标签为person的Node对象的集合NodeList</div><div class="line">NodeList nodeList = personsElement.getElementsByTagName(&quot;person&quot;);</div><div class="line"></div><div class="line">Dom解析加载整个xml文档的树形结构，可以随时访问兄弟节点，父节点等。Sax只能向前遍历（单遍解析），使它不能支持随机访问。</div></pre></td></tr></table></figure>
<p>sax和pull都是基于事件驱动的xml解析器，在解析xml时并不会加载整个的xml文档，占用内存较少，因此在android开发中建议使用sax或者pull来解析xml文档。</p>
<p>SAX，全称Simple API for XML，既是一种接口，也是一种软件包。它是一种XML解析的替代方法。SAX不同于DOM解析，它逐行扫描文档，一边扫描一边解析。由于应用程序只是在读取数据时检查数据，因此不需要将数据存储在内存中，这对于大型文档的解析是个巨大优势。</p>
<p>继承 extends DefaultHandler 需要复写下面几个方法。这几个方法是回调方法，解析时，若发生事件（文档开头结尾 元素开头结尾）的话会被调用这些回调方法。</p>
<ul>
<li>startDocument() and endDocument() – Method called at the start and end of an XML document. </li>
<li>startElement() and endElement() – Method called at the start and end of a document element.  </li>
<li>characters() – Method called with the text contents in between the start and end tags of an XML document element.</li>
</ul>
<h2 id="pull和sax的区别"><a href="#pull和sax的区别" class="headerlink" title="pull和sax的区别"></a>pull和sax的区别</h2><p>Pull解析器和SAX解析器虽有区别但也有相似性。他们的区别为：SAX解析器的工作方式是自动将事件推入注册的事件处理器进行处理，因此你不能控制事件的处理主动结束；</p>
<p>而Pull解析器的工作方式为允许你的应用程序代码主动从解析器中获取事件，正因为是主动获取事件，因此可以在满足了需要的条件后不再获取事件，结束解析。这是他们主要的区别。</p>
<h2 id="Android-系统架构"><a href="#Android-系统架构" class="headerlink" title="Android 系统架构"></a>Android 系统架构</h2><ol>
<li>Linux 内核层，为 Android 设备提供了底层的驱动，如蓝牙驱动、照相机驱动等等</li>
<li>系统运行库层，这些曾通过一些 C/C++ 库为 Android 系统提供了主要的特性支持，如 SQlite 提宫数据库，Webkit 提高了浏览器内核<br>  需要注意的是这一层也有 Android 运行时候需要的核心库<br>  Android 运行时库包括了 <strong>Dalvik</strong> 虚拟机</li>
<li>应用框架层，这一层提供了编写 App 时候需要用到的 Api</li>
<li>应用层，所有安装在手机上的 App 都属于这一层，包括短信、QQ 等</li>
</ol>
<h2 id="四大组件"><a href="#四大组件" class="headerlink" title="四大组件"></a>四大组件</h2><blockquote>
<p>activity和service默认是运行在应用进程的主线程中，四大组件默认都是和activity运行在同一个主线程中的</p>
</blockquote>
<ul>
<li>Activity 活动</li>
<li>Service 服务<br> Service的Oncreate()方法只有第一次执行，而OnStartCommand()每次启动服务都会调用</li>
<li>Broadcast 广播接收器<br> 最常用的广播就是<code>android.provider.Telephony.SMS_RECEIVED</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// AndroidManifest.xml</div><div class="line">&lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot; /&gt;</div><div class="line">...</div><div class="line">&lt;application ...&gt;</div><div class="line">	&lt;receiver android:name=&quot;.SMSReceiver&quot;&gt; </div><div class="line">	  &lt;intent-filter&gt; </div><div class="line">	    &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt; </div><div class="line">	  &lt;/intent-filter&gt; </div><div class="line">	&lt;/receiver&gt;  </div><div class="line">&lt;/application&gt;</div><div class="line"></div><div class="line">// SMSReceiver.java</div><div class="line">public class SMSReceiver extends BroadcastReceiver </div><div class="line">&#123; </div><div class="line">    @Override </div><div class="line">    public void onReceive(Context context, Intent intent) &#123; </div><div class="line">        Log.i(TAG, &quot;SMS received.&quot;);</div><div class="line">        ....</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ContentProvider 内容提供者 <blockquote>
<p>注意如果自己定义一个ContentProvider暴露为其他 App 使用，通常用SQLite或者文件实现，也可以用 Json 或者 Xml 实现等等。</p>
</blockquote>
</li>
</ul>
<p>4大组件都需要在 xml 文件里注册，注意它们是平级的关系。</p>
<h2 id="存储化技术"><a href="#存储化技术" class="headerlink" title="存储化技术"></a>存储化技术</h2><ul>
<li>文件存储 存储一些图片、视频、doc 等等，保密性不强</li>
<li>SharedPreference 多用于存储用户配置、密码等等<br>也可在里面存储视频当前播放的位置，按home键返回后重新从当前位置读取</li>
<li>数据库 Sqlite 存储一些格式复杂的数据，比如短信中 联系人和对应的短信记录<h2 id="文件的操作模式"><a href="#文件的操作模式" class="headerlink" title="文件的操作模式"></a>文件的操作模式</h2></li>
<li>MODE_APPEND  追加内容</li>
<li>MODE_PRIVATE  覆盖文件中的内容</li>
<li><del>MODE_WORLD_READABLE</del>  已经在4.2废弃</li>
<li><del>MODE_WORLD_WRITEABLE</del> 已经在4.2废弃</li>
</ul>
<h2 id="打开文件示例代码"><a href="#打开文件示例代码" class="headerlink" title="打开文件示例代码"></a>打开文件示例代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">FileOutputStream out  = null;</div><div class="line">BufferedWriter writer = null;</div><div class="line">try &#123;</div><div class="line">    out = openFileOutput(&quot;data&quot;, Context.MODE_PRIVATE);</div><div class="line">    writer = new BufferedWriter(new OutputStreamWriter(out));</div><div class="line"></div><div class="line">&#125; catch (FileNotFoundException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125; finally &#123;</div><div class="line">    try &#123;</div><div class="line">        if (writer != null)</div><div class="line">        writer.close();</div><div class="line">    &#125; catch (IOException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="读取文件-代码示例"><a href="#读取文件-代码示例" class="headerlink" title="读取文件 代码示例"></a>读取文件 代码示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">FileInputStream in = null;</div><div class="line"> BufferedReader reader = null;</div><div class="line"> StringBuilder content = null;</div><div class="line"></div><div class="line"> try &#123;</div><div class="line">     in = openFileInput(&quot;data&quot;);</div><div class="line">     reader = new BufferedReader(new InputStreamReader(in));</div><div class="line">     String line = &quot;&quot;;</div><div class="line">     if ((line = reader.readLine()) != null) &#123;</div><div class="line">         content.append(line);</div><div class="line">     &#125;</div><div class="line"> &#125; catch (FileNotFoundException e) &#123;</div><div class="line">     e.printStackTrace();</div><div class="line"> &#125; catch (IOException e) &#123;</div><div class="line">     e.printStackTrace();</div><div class="line"> &#125; finally &#123;</div><div class="line">     try &#123;</div><div class="line">         if(reader != null)</div><div class="line">         reader.close();</div><div class="line">     &#125; catch (IOException e) &#123;</div><div class="line">         e.printStackTrace();</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h2 id="TestUtils"><a href="#TestUtils" class="headerlink" title="TestUtils"></a>TestUtils</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String x = &quot;test&quot;;</div><div class="line">TextUtils.isEmpty(x);</div></pre></td></tr></table></figure>
<p>这儿的 isEmpty  方法可以判断 x 为 null 或者长度为 0</p>
<h2 id="SQlite"><a href="#SQlite" class="headerlink" title="SQlite"></a>SQlite</h2><p>使用<code>adb shell</code>中的<code>sqlite3</code>打开数据库</p>
<h2 id="getWritableDatabase-VS-getReadableDatabase"><a href="#getWritableDatabase-VS-getReadableDatabase" class="headerlink" title="getWritableDatabase VS getReadableDatabase"></a>getWritableDatabase VS getReadableDatabase</h2><p><code>getWritableDatabase</code> 和 <code>getReadableDatabase</code> 取得的实例对数据库进行读和写的功能，不是像字面意思上一个读写权限和只读权限</p>
<p>两者的区别在于</p>
<ul>
<li>getWritableDatabase取得的实例是以读写的方式打开数据库，如果打开的数据库磁盘满了，此时只能读不能写，此时调用了getWritableDatabase的实例，那么将会发生错误（异常）</li>
<li>getReadableDatabase取得的实例是先调用getWritableDatabase以读写的方式打开数据库，如果数据库的磁盘满了，此时返回打开失败，继而用getReadableDatabase的实例以只读的方式去打开数据库<h2 id="intent-filter"><a href="#intent-filter" class="headerlink" title="intent-filter"></a>intent-filter</h2>intent-filter 可以动态注册也可以静态注册<br>下面是静态注册的代码，直接写在xml文件里<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;application&gt;</div><div class="line">	&lt;activity name=&quot;&quot;/&gt;</div><div class="line">	&lt;receiver android:name=&quot;.MyBroadcastReceiver&quot;&gt;</div><div class="line">		&lt;!-- intent过滤器,指定可以匹配哪些intent, 一般需要定义action 可以是自定义的也可是系统的 --&gt; </div><div class="line">		&lt;intent-filter&gt;</div><div class="line">			&lt;action android:name=&quot;com.app.bc.test&quot;/&gt;</div><div class="line">		&lt;/intent-filter&gt;</div><div class="line">	&lt;/receiver&gt;</div><div class="line">&lt;/application&gt;</div><div class="line"></div><div class="line">//</div><div class="line">// java code 这儿的intent也叫隐式intent</div><div class="line">Intent intent = new Intent(“com.app.bc.test”);</div><div class="line">sendBroadcast(intent);//发送广播事件</div></pre></td></tr></table></figure>
</li>
</ul>
<p>动态注册</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//生成一个BroadcastReceiver对象</div><div class="line">SMSReceiver smsReceiver = new SMSReceiver();</div><div class="line">//生成一个IntentFilter对象</div><div class="line">IntentFilter filter = new IntentFilter(); 		</div><div class="line">filter.addAction(“android.provider.Telephony.SMS_RECEIVED”);</div><div class="line">//将BroadcastReceiver对象注册到系统当中</div><div class="line">//此处表示该接收器会处理短信事件</div><div class="line">TestBC1Activity.this.registerReceiver(smsReceiver, filter);</div></pre></td></tr></table></figure>
<ul>
<li>静态注册：在AndroidManifest.xml注册，android不能自动销毁广播接收器，也就是说当应用程序关闭后，还是会接收广播。</li>
<li>动态注册：在代码中通过registerReceiver()手工注册.当程序关闭时,该接收器也会随之销毁。当然，也可手工调用unregisterReceiver()进行销毁。</li>
</ul>
<h2 id="显示intent-和隐式intent"><a href="#显示intent-和隐式intent" class="headerlink" title="显示intent 和隐式intent"></a>显示intent 和隐式intent</h2><p>显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Intent intent = new Intent(this, SecondActivity.class);  </div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure>
<p>隐式，它会自动寻找能处理 intent-filter 里面设置了处理该的 action 的Activity。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent intent = new Intent();</div><div class="line">intent.setAction(“android.provider.Telephony.SMS_RECEIVED”);</div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure></p>
<p>比如有手机装了多个浏览器，使用隐式intent会弹出让用户选择哪个浏览器。</p>
<h2 id="Timer-和-Alarm"><a href="#Timer-和-Alarm" class="headerlink" title="Timer  和 Alarm"></a>Timer  和 Alarm</h2><p>Timer 不适用需要长期在后台运行的定时任务，长时间不操作，CPU会睡眠状态，这会影响Timer的定时任务无法执行<br>Alarm 机制具有唤醒CPU的功能</p>
<h2 id="工具方法"><a href="#工具方法" class="headerlink" title="工具方法"></a>工具方法</h2><p>訪問Url，利用get請求，請返回的數據轉化為字符串<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">HttpURLConnection connection = null;</div><div class="line">...</div><div class="line">connection.setReadTimeOut(8000);</div><div class="line">InputStream in = connection.getInputStream();</div><div class="line">BufferedReader reader = new BufferedReader(new InputStreamReader(in));</div><div class="line">StringBuilder response = new StringBuilder();</div><div class="line">String line = &quot;&quot;;</div><div class="line">while( (line = reader.readLine()) !=null ) &#123;</div><div class="line"> response.append(line);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="怎么更新UI"><a href="#怎么更新UI" class="headerlink" title="怎么更新UI"></a>怎么更新UI</h2><p>注意不能使用子线程更新 UI，可以用 Handler 或者 Activity.runOnUiThread</p>
<blockquote>
<p>public final void runOnUiThread (Runnable action)</p>
</blockquote>
<pre><code>Added in API level 1
Runs the specified action on the UI thread. If the current thread is the UI thread, then the action is executed immediately. If the current thread is not the UI thread, the action is posted to the event queue of the UI thread.

Parameters
action    the action to run on the UI thread
</code></pre><h2 id="Adapter-4个重写方法"><a href="#Adapter-4个重写方法" class="headerlink" title="Adapter 4个重写方法"></a>Adapter 4个重写方法</h2><p>BaseAdapter基本结构</p>
<ul>
<li>public int getCount() ：适配器中数据集中 数据的个数，即ListView需要显示的数据个数</li>
<li>public Object getItem(int position) ： 获取数据集中与指定索引对应的数据项</li>
<li>public long getItemId(int position) ： 获取指定行对应的ID</li>
<li>public View getView(int position, View convertView, ViewGroup parent) ：获取每一个Item的显示内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">public class MyBaseAdapter extends BaseAdapter &#123;</div><div class="line"></div><div class="line">    ArrayList myList = new ArrayList();</div><div class="line">    LayoutInflater inflater;</div><div class="line">    Context context;</div><div class="line"></div><div class="line"></div><div class="line">    public MyBaseAdapter(Context context, ArrayList myList) &#123;</div><div class="line">        this.myList = myList;</div><div class="line">        this.context = context;</div><div class="line">        inflater = LayoutInflater.from(this.context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getCount() &#123;</div><div class="line">        return myList.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public ListData getItem(int position) &#123;</div><div class="line">        return myList.get(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public long getItemId(int position) &#123;</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public View getView(int position, View convertView, ViewGroup parent) &#123;</div><div class="line">        MyViewHolder mViewHolder;</div><div class="line"></div><div class="line">        if (convertView == null) &#123;</div><div class="line">            convertView = inflater.inflate(R.layout.layout_list_item, parent, false);</div><div class="line">            mViewHolder = new MyViewHolder(convertView);</div><div class="line">            convertView.setTag(mViewHolder);</div><div class="line">        &#125; else &#123;</div><div class="line">            mViewHolder = (MyViewHolder) convertView.getTag();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        ListData currentListData = getItem(position);</div><div class="line"></div><div class="line">        mViewHolder.tvTitle.setText(currentListData.getTitle());</div><div class="line">        mViewHolder.tvDesc.setText(currentListData.getDescription());</div><div class="line">        mViewHolder.ivIcon.setImageResource(currentListData.getImgResId());</div><div class="line"></div><div class="line">        return convertView;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private class MyViewHolder &#123;</div><div class="line">        TextView tvTitle, tvDesc;</div><div class="line">        ImageView ivIcon;</div><div class="line"></div><div class="line">        public MyViewHolder(View item) &#123;</div><div class="line">            tvTitle = (TextView) item.findViewById(R.id.tvTitle);</div><div class="line">            tvDesc = (TextView) item.findViewById(R.id.tvDesc);</div><div class="line">            ivIcon = (ImageView) item.findViewById(R.id.ivIcon);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在使用BaseAdapter时，我们需要自己创建一个类继承BaseAdapter，然后Eclipse会提醒我们实现上述四个方法，当给ListView设置了我们自己写的Adapter后，ListView内部会调用上述四个方法。</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://blog.csdn.net/jueblog/article/details/12667463" target="_blank" rel="external">【Android】BroadCast广播机制应用与实例</a></p>
<p>ListView using BaseAdapter – Android <a href="http://www.pcsalt.com/android/listview-using-baseadapter-android/" target="_blank" rel="external">http://www.pcsalt.com/android/listview-using-baseadapter-android/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/android-interview/" data-id="ciyyds54u0000buxbxq2505pf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-viewpager-photos" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/24/viewpager-photos/" class="article-date">
  <time datetime="2016-08-24T11:22:32.000Z" itemprop="datePublished">2016-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/24/viewpager-photos/">Android 新闻客户端基于 ViewPager 实现轮播图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>新闻 App 首页最上方一般会循环播放热点图片，如下图所示。</p>
<p><img src="http://img.blog.csdn.net/20160117162640833" alt="http://blog.csdn.net/never_cxb"></p>
<p>本文主要介绍了利用 ViewPager 实现轮播图片，图片下方加上小圆点指示器标记当前位置，并利用 Timer+Handler 实现了自动轮播播放。</p>
<p>本文链接 <a href="http://www.alijava.com/viewpager-photos/" target="_blank" rel="external">http://www.alijava.com/viewpager-photos/</a> 转载请注明出处</p>
<h1 id="ViewPager展示图片"><a href="#ViewPager展示图片" class="headerlink" title="ViewPager展示图片"></a>ViewPager展示图片</h1><h2 id="xml-布局"><a href="#xml-布局" class="headerlink" title="xml 布局"></a>xml 布局</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;!--ViewPager 热门文章图片展示--&gt;</div><div class="line">    &lt;FrameLayout</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;200dp&quot;</div><div class="line">        android:background=&quot;@color/gray_light&quot;&gt;</div><div class="line"></div><div class="line">        &lt;android.support.v4.view.ViewPager</div><div class="line">            android:id=&quot;@+id/vp_hottest&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;match_parent&quot;</div><div class="line">            android:background=&quot;@color/colorPrimary&quot; /&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:id=&quot;@+id/ll_hottest_indicator&quot;</div><div class="line">            android:layout_width=&quot;wrap_content&quot;</div><div class="line">            android:layout_height=&quot;20dp&quot;</div><div class="line">            android:layout_gravity=&quot;bottom|right&quot;</div><div class="line">            android:layout_marginBottom=&quot;5dp&quot;</div><div class="line">            android:layout_marginRight=&quot;10dp&quot;</div><div class="line">            android:layout_marginTop=&quot;5dp&quot;</div><div class="line">            android:gravity=&quot;center&quot;</div><div class="line">            android:orientation=&quot;horizontal&quot; /&gt;</div><div class="line">    &lt;/FrameLayout&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>FrameLayout里面包含了ViewPager和LinearLayout，ViewPager 显示图片，LinearLayout是小圆点指示器区域，标记现在滑到哪张图片。</p>
<p>查看 xml 预览图，由于没有图片内容，当前只显示出红色矩形区域。</p>
<p><img src="http://img.blog.csdn.net/20160116201446285" width="20%" height="20%" alt="http://blog.csdn.net/never_cxb" align="center"></p>
<h2 id="新建javabean"><a href="#新建javabean" class="headerlink" title="新建javabean"></a>新建javabean</h2><p>首页的图片地址是新闻的一个属性，我们新建一个ItemArticle类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">public class ItemArticle &#123;</div><div class="line">	// 新闻的 id</div><div class="line">    private int index;</div><div class="line">    // 新闻里的图片 url</div><div class="line">    private String imageUrl;</div><div class="line"></div><div class="line">    public ItemArticle(int index, String imageUrl) &#123;</div><div class="line">        this.index = index;</div><div class="line">        this.imageUrl = imageUrl;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public int getIndex() &#123;</div><div class="line">        return index;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setIndex(int index) &#123;</div><div class="line">        this.index = index;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getImageUrl() &#123;</div><div class="line">        return imageUrl;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setImageUrl(String imageUrl) &#123;</div><div class="line">        this.imageUrl = imageUrl;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="适配器-PagerAdapter"><a href="#适配器-PagerAdapter" class="headerlink" title="适配器  PagerAdapter"></a>适配器  PagerAdapter</h2><p>继承自 <code>android.support.v4.view.PagerAdapter</code>，复写4个方法</p>
<ul>
<li>instantiateItem(ViewGroup, int)</li>
<li>destroyItem(ViewGroup, int, Object)</li>
<li>getCount()</li>
<li>isViewFromObject(View, Object)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">public class HeaderAdapter extends PagerAdapter &#123;</div><div class="line">    private static final String LOG = &quot;NEWS_LOG&quot;;</div><div class="line"></div><div class="line">    private Activity context;</div><div class="line">    private List&lt;ItemArticle&gt; articles;</div><div class="line">    private List&lt;SimpleDraweeView&gt; images = new ArrayList&lt;SimpleDraweeView&gt;();</div><div class="line"></div><div class="line"></div><div class="line">    public HeaderAdapter(Activity context, List&lt;ItemArticle&gt; articles) &#123;</div><div class="line">        this.context = context;</div><div class="line">        if (articles == null || articles.size() == 0) &#123;</div><div class="line">            this.articles = new ArrayList&lt;&gt;();</div><div class="line">        &#125; else &#123;</div><div class="line">            this.articles = articles;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        for (int i = 0; i &lt; articles.size(); i++) &#123;</div><div class="line">            SimpleDraweeView image = new SimpleDraweeView(context);</div><div class="line">            Uri uri = Uri.parse(articles.get(i).getImageUrl());</div><div class="line">            image.setImageURI(uri);</div><div class="line">            images.add(image);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public Object instantiateItem(ViewGroup container, int position) &#123;</div><div class="line">        container.addView(images.get(position));</div><div class="line">        return images.get(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void destroyItem(ViewGroup container, int position, Object object) &#123;</div><div class="line">        container.removeView(images.get(position));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getCount() &#123;</div><div class="line">        return articles.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean isViewFromObject(View view, Object object) &#123;</div><div class="line">        Log.i(LOG, &quot;in isViewFromObject view: &quot; + view + &quot; object: &quot;</div><div class="line">                + object + &quot; equal: &quot; + (view == (View) object));</div><div class="line">        return view == (View) object;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="深入解析-isViewFromObject-方法"><a href="#深入解析-isViewFromObject-方法" class="headerlink" title="深入解析 isViewFromObject 方法"></a>深入解析 isViewFromObject 方法</h2><p>isViewFromObject(View view, Object object)的通用写法是return view == (View) object;<br>其中(View) object可根据具体情形替换成LinearLayout等等。</p>
<p>查看 ViewPager 源代码（<a href="https://code.google.com/p/openintents/source/browse/trunk/compatibility/AndroidSupportV2/src/android/support/v2/view/ViewPager.java?r=3488" target="_blank" rel="external">戳这里</a>）</p>
<p><code>isViewFromObject</code>是在infoForChild里被调用的，而且在该方法内会被调用mItems.size()次，mItems.size()是 ViewPager 里面图片的个数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">static class ItemInfo &#123;</div><div class="line">    Object object;</div><div class="line">    int position;</div><div class="line">    boolean scrolling;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private final ArrayList&lt;ItemInfo&gt; mItems = new ArrayList&lt;ItemInfo&gt;();</div><div class="line"></div><div class="line">ItemInfo infoForChild(View child) &#123;</div><div class="line">    for (int i=0; i&lt;mItems.size(); i++) &#123;</div><div class="line">        ItemInfo ii = mItems.get(i);</div><div class="line">        if (mAdapter.isViewFromObject(child, ii.object)) &#123;</div><div class="line">            return ii;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ViewPager里面用了一个mItems 存储每个page的信息(ItemInfo)，当界面要展示或者发生变化时，需要依据page的当前信息来调整，但此时只能通过view来查找，遍历mItems通过比较view和object来找到对应的ItemInfo。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Log.i(LOG, &quot;in isViewFromObject view: &quot; + view + &quot; object: &quot;</div><div class="line">        + object + &quot; equal: &quot; + (view == (View) object));</div></pre></td></tr></table></figure>
<p>所以我们如果打印出 Log 的话，会看到isViewFromObject()被调用多次，只有1次返回 true （表示找到了对应的ItemInfo），其他返回 false。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">01-17 10:15:21.207 I/NEWS_LOG﹕ in isViewFromObject </div><div class="line">view: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">object: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">equal: false</div><div class="line"></div><div class="line">01-17 10:15:21.207 I/NEWS_LOG﹕ in isViewFromObject </div><div class="line">view: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">object: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">equal: false</div><div class="line"></div><div class="line">01-17 10:15:21.207 I/NEWS_LOG﹕ in isViewFromObject </div><div class="line">view: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">object: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">equal: false</div><div class="line"></div><div class="line">01-17 10:15:21.207 I/NEWS_LOG﹕ in isViewFromObject </div><div class="line">view: SimpleDraweeView&#123;holder=DraweeHolder&#123;...&#125; </div><div class="line">object: SimpleDraweeView&#123;....&#125;&#125; </div><div class="line">equal: true</div></pre></td></tr></table></figure>
<h1 id="底部小圆点指示器"><a href="#底部小圆点指示器" class="headerlink" title="底部小圆点指示器"></a>底部小圆点指示器</h1><h2 id="图片增加小圆点"><a href="#图片增加小圆点" class="headerlink" title="图片增加小圆点"></a>图片增加小圆点</h2><p>轮播图片的底部都会加上小圆点，指示当前访问图片的位置。</p>
<p><img src="http://img.blog.csdn.net/20160117164201413" width="50%" height="50%" alt="http://blog.csdn.net/never_cxb" align="center"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">private ImageView[] mBottomImages;//底部只是当前页面的小圆点</div><div class="line"></div><div class="line"></div><div class="line">//创建底部指示位置的导航栏</div><div class="line">mBottomImages = new ImageView[headerArticles.size()];</div><div class="line"></div><div class="line">for (int i = 0; i &lt; mBottomImages.length; i++) &#123;</div><div class="line">    ImageView imageView = new ImageView(mAct);</div><div class="line">    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(10, 10);</div><div class="line">    params.setMargins(5, 0, 5, 0);</div><div class="line">    imageView.setLayoutParams(params);</div><div class="line">    if (i == 0) &#123;</div><div class="line">        imageView.setBackgroundResource(R.drawable.indicator_select);</div><div class="line">    &#125; else &#123;</div><div class="line">        imageView.setBackgroundResource(R.drawable.indicator_not_select);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    mBottomImages[i] = imageView;</div><div class="line">    //把指示作用的原点图片加入底部的视图中</div><div class="line">    llHottestIndicator.addView(mBottomImages[i]);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这段代码是小圆点的初始步骤，最开始是第0张图片被选中，所以是第0张小圆点是蓝色，其他小圆点是灰色。</p>
<h2 id="addOnPageChangeListener小圆点动态变化"><a href="#addOnPageChangeListener小圆点动态变化" class="headerlink" title="addOnPageChangeListener小圆点动态变化"></a>addOnPageChangeListener小圆点动态变化</h2><p>切换图片的时候，小圆点也要随着改变，这需要利用ViewPager.OnPageChangeListener，主要是下面这个方法：</p>
<blockquote>
<p>public abstract void onPageSelected (int position)</p>
</blockquote>
<pre><code>This method will be invoked when a new page becomes selected. Animation is not necessarily complete.

Parameters
position    Position index of the new selected page.
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">vpHottest.addOnPageChangeListener(new ViewPager.OnPageChangeListener() &#123;	</div><div class="line">	//图片左右滑动时候，将当前页的圆点图片设为选中状态</div><div class="line">	@Override</div><div class="line">	public void onPageSelected(int position) &#123;</div><div class="line">	    // 一定几个图片，几个圆点，但注意是从0开始的</div><div class="line">	    int total = mBottomImages.length;</div><div class="line">	    for (int j = 0; j &lt; total; j++) &#123;</div><div class="line">	        if (j == position) &#123;</div><div class="line">	            mBottomImages[j].setBackgroundResource(R.drawable.indicator_select);</div><div class="line">	        &#125; else &#123;</div><div class="line">	            mBottomImages[j].setBackgroundResource(R.drawable.indicator_not_select);</div><div class="line">	        &#125;</div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@Override</div><div class="line">	public void onPageScrolled(int i, float v, int i1) &#123;	</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onPageScrollStateChanged(int state) &#123;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>onPageSelected()中，利用 for 循环，将当前选中位置对应的小圆点置为蓝色，其他小圆点置为灰色。</p>
<h2 id="自动播放"><a href="#自动播放" class="headerlink" title="自动播放"></a>自动播放</h2><p>先定义一个 Handler，在主线程里面更新 UI</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//定时轮播图片，需要在主线程里面修改 UI</div><div class="line">private Handler mHandler = new Handler() &#123;</div><div class="line">    public void handleMessage(Message msg) &#123;</div><div class="line">        switch (msg.what) &#123;</div><div class="line">            case UPTATE_VIEWPAGER:</div><div class="line">                if (msg.arg1 != 0) &#123;</div><div class="line">                    vpHottest.setCurrentItem(msg.arg1);</div><div class="line">                &#125; else &#123;</div><div class="line">                    //false 当从末页调到首页是，不显示翻页动画效果，</div><div class="line">                    vpHottest.setCurrentItem(msg.arg1, false);</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>利用 Timer 实现每隔 5s 向 Handler 发送message来更新图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// 设置自动轮播图片，5s后执行，周期是5s</div><div class="line">timer.schedule(new TimerTask() &#123;</div><div class="line">    @Override</div><div class="line">    public void run() &#123;</div><div class="line">        Message message = new Message();</div><div class="line">        message.what = UPTATE_VIEWPAGER;</div><div class="line">        if (autoCurrIndex == headerArticles.size() - 1) &#123;</div><div class="line">            autoCurrIndex = -1;</div><div class="line">        &#125;</div><div class="line">        message.arg1 = autoCurrIndex + 1;</div><div class="line">        mHandler.sendMessage(message);</div><div class="line">    &#125;</div><div class="line">&#125;, 5000, 5000);</div></pre></td></tr></table></figure>
<p>为了使得滑到最后一页后能滑到首页，我们对于<code>autoCurrIndex == headerArticles.size() - 1</code>进行了处理。</p>
<h1 id="一些知识点"><a href="#一些知识点" class="headerlink" title="一些知识点"></a>一些知识点</h1><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><p>基于上面的分析，我们实现了自动轮播图片</p>
<p><img src="http://img.blog.csdn.net/20160117172421660" width="40%" height="40%" alt="http://blog.csdn.net/never_cxb" align="center"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div></pre></td><td class="code"><pre><div class="line">public class MasterArticleFragment extends Fragment &#123;</div><div class="line"></div><div class="line">    private static final String ARTICLE_LATEST_PARAM = &quot;param&quot;;</div><div class="line"></div><div class="line">    private static final int UPTATE_VIEWPAGER = 0;</div><div class="line"></div><div class="line">    //轮播的最热新闻图片</div><div class="line">    @InjectView(R.id.vp_hottest)</div><div class="line">    ViewPager vpHottest;</div><div class="line">    //轮播图片下面的小圆点</div><div class="line">    @InjectView(R.id.ll_hottest_indicator)</div><div class="line">    LinearLayout llHottestIndicator;</div><div class="line"></div><div class="line">    //存储的参数</div><div class="line">    private String mParam;</div><div class="line"></div><div class="line">    //获取 fragment 依赖的 Activity，方便使用 Context</div><div class="line">    private Activity mAct;</div><div class="line"></div><div class="line">    //设置当前 第几个图片 被选中</div><div class="line">    private int autoCurrIndex = 0;</div><div class="line">    </div><div class="line">    private ImageView[] mBottomImages;//底部只是当前页面的小圆点 </div><div class="line">    </div><div class="line">    private Timer timer = new Timer(); //为了方便取消定时轮播，将 Timer 设为全局</div><div class="line"></div><div class="line">    //定时轮播图片，需要在主线程里面修改 UI</div><div class="line">    private Handler mHandler = new Handler() &#123;</div><div class="line">        public void handleMessage(Message msg) &#123;</div><div class="line">            switch (msg.what) &#123;</div><div class="line">                case UPTATE_VIEWPAGER:</div><div class="line">                    if (msg.arg1 != 0) &#123;</div><div class="line">                        vpHottest.setCurrentItem(msg.arg1);</div><div class="line">                    &#125; else &#123;</div><div class="line">                        //false 当从末页调到首页是，不显示翻页动画效果，</div><div class="line">                        vpHottest.setCurrentItem(msg.arg1, false);</div><div class="line">                    &#125;</div><div class="line">                    break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    public static MasterArticleFragment newInstance(String param) &#123;</div><div class="line">        MasterArticleFragment fragment = new MasterArticleFragment();</div><div class="line">        Bundle args = new Bundle();</div><div class="line">        args.putString(ARTICLE_LATEST_PARAM, param);</div><div class="line">        fragment.setArguments(args);</div><div class="line">        return fragment;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        if (savedInstanceState != null) &#123;</div><div class="line">            mParam = savedInstanceState.getString(ARTICLE_LATEST_PARAM);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Nullable</div><div class="line">    @Override</div><div class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123;</div><div class="line"></div><div class="line">        View view = inflater.inflate(R.layout.fragment_one_master, container, false);</div><div class="line">        mAct = getActivity();</div><div class="line">        ButterKnife.inject(this, view);</div><div class="line">        return view;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onActivityCreated(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onActivityCreated(savedInstanceState);</div><div class="line">        new ImageTask().execute();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onDestroyView() &#123;</div><div class="line">        super.onDestroyView();</div><div class="line">        ButterKnife.reset(this);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    private void setUpViewPager(final List&lt;ItemArticle&gt; headerArticles) &#123;</div><div class="line">        HeaderAdapter imageAdapter = new HeaderAdapter(mAct, headerArticles);</div><div class="line">        vpHottest.setAdapter(imageAdapter);</div><div class="line"></div><div class="line">        //创建底部指示位置的导航栏</div><div class="line">        mBottomImages = new ImageView[headerArticles.size()];</div><div class="line"></div><div class="line">        for (int i = 0; i &lt; mBottomImages.length; i++) &#123;</div><div class="line">            ImageView imageView = new ImageView(mAct);</div><div class="line">            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(10, 10);</div><div class="line">            params.setMargins(5, 0, 5, 0);</div><div class="line">            imageView.setLayoutParams(params);</div><div class="line">            if (i == 0) &#123;</div><div class="line">                imageView.setBackgroundResource(R.drawable.indicator_select);</div><div class="line">            &#125; else &#123;</div><div class="line">                imageView.setBackgroundResource(R.drawable.indicator_not_select);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            mBottomImages[i] = imageView;</div><div class="line">            //把指示作用的原点图片加入底部的视图中</div><div class="line">            llHottestIndicator.addView(mBottomImages[i]);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        vpHottest.addOnPageChangeListener(new ViewPager.OnPageChangeListener() &#123;</div><div class="line"></div><div class="line">              //图片左右滑动时候，将当前页的圆点图片设为选中状态</div><div class="line">              @Override</div><div class="line">              public void onPageSelected(int position) &#123;</div><div class="line">                  // 一定几个图片，几个圆点，但注意是从0开始的</div><div class="line">                  int total = mBottomImages.length;</div><div class="line">                  for (int j = 0; j &lt; total; j++) &#123;</div><div class="line">                      if (j == position) &#123;</div><div class="line">                          mBottomImages[j].setBackgroundResource(R.drawable.indicator_select);</div><div class="line">                      &#125; else &#123;</div><div class="line">                          mBottomImages[j].setBackgroundResource(R.drawable.indicator_not_select);</div><div class="line">                      &#125;</div><div class="line">                  &#125;</div><div class="line"></div><div class="line">                  //设置全局变量，currentIndex为选中图标的 index</div><div class="line">                  autoCurrIndex = position;</div><div class="line">              &#125;</div><div class="line"></div><div class="line">              @Override</div><div class="line">              public void onPageScrolled(int i, float v, int i1) &#123;</div><div class="line">              &#125;</div><div class="line"></div><div class="line">              @Override</div><div class="line">              public void onPageScrollStateChanged(int state) &#123;</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">        );</div><div class="line"></div><div class="line">		// 设置自动轮播图片，5s后执行，周期是5s</div><div class="line">		timer.schedule(new TimerTask() &#123;</div><div class="line">		    @Override</div><div class="line">		    public void run() &#123;</div><div class="line">		        Message message = new Message();</div><div class="line">		        message.what = UPTATE_VIEWPAGER;</div><div class="line">		        if (autoCurrIndex == headerArticles.size() - 1) &#123;</div><div class="line">		            autoCurrIndex = -1;</div><div class="line">		        &#125;</div><div class="line">		        message.arg1 = autoCurrIndex + 1;</div><div class="line">		        mHandler.sendMessage(message);</div><div class="line">		    &#125;</div><div class="line">		&#125;, 5000, 5000);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    class ImageTask extends AsyncTask&lt;String, Void, List&lt;ItemArticle&gt;&gt; &#123;</div><div class="line">        @Override</div><div class="line">        protected List&lt;ItemArticle&gt; doInBackground(String... params) &#123;</div><div class="line">            List&lt;ItemArticle&gt; articles = new ArrayList&lt;ItemArticle&gt;();</div><div class="line">            articles.add(</div><div class="line">                    new ItemArticle(1123, &quot;http://***20151231105648_11790.jpg&quot;));</div><div class="line">            articles.add(</div><div class="line">                    new ItemArticle(1123, &quot;http://***20151230152544_36663.jpg&quot;));</div><div class="line">            articles.add(</div><div class="line">                    new ItemArticle(1123, &quot;http://***20151229204329_75030.jpg&quot;));</div><div class="line">            articles.add(</div><div class="line">                    new ItemArticle(1123, &quot;http://***20151221151031_36136.jpg&quot;));</div><div class="line">            return articles;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        protected void onPostExecute(List&lt;ItemArticle&gt; articles) &#123;</div><div class="line">            //这儿的 是 url 的集合</div><div class="line">            super.onPostExecute(articles);</div><div class="line">            setUpViewPager(articles);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="schedule和scheduleAtFixedRate方法"><a href="#schedule和scheduleAtFixedRate方法" class="headerlink" title="schedule和scheduleAtFixedRate方法"></a>schedule和scheduleAtFixedRate方法</h2><p>（1）schedule方法：下一次执行时间相对于 上一次 实际<strong>执行完成</strong>的时间点 ，因此执行时间会不断延后。保持间隔时间的稳定<br>（2）scheduleAtFixedRate方法：下一次执行时间相对于上一次<strong>开始的 时间点</strong> ，因此执行时间不会延后，<strong>存在并发性</strong> 。保持执行频率的稳定。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><p>LoremPixel 图片资源网站，随机生成图片 <a href="http://lorempixel.com/" target="_blank" rel="external">http://lorempixel.com/</a></p>
</li>
<li><p>Android Image Slideshow using ViewPager with PagerAdapter <a href="http://codetheory.in/android-image-slideshow-using-viewpager-pageradapter/" target="_blank" rel="external">http://codetheory.in/android-image-slideshow-using-viewpager-pageradapter/</a></p>
</li>
<li><p>安卓PagerAdapter中的isViewFromObject()方法有什么用？ <a href="http://segmentfault.com/q/1010000000484617" target="_blank" rel="external">http://segmentfault.com/q/1010000000484617</a></p>
</li>
<li><p>Timer的schedule和scheduleAtFixedRate方法的区别解析 <a href="http://blog.csdn.net/gtuu0123/article/details/6040159" target="_blank" rel="external">http://blog.csdn.net/gtuu0123/article/details/6040159</a> </p>
</li>
</ul>
<ul>
<li><p>Android 仿首页广告轮播效果 <a href="http://blog.csdn.net/xiyou_android/article/details/45566129" target="_blank" rel="external">http://blog.csdn.net/xiyou_android/article/details/45566129</a></p>
</li>
<li><p>Android Material Design之Toolbar与Palette实践 <a href="http://blog.csdn.net/bbld_/article/details/41439715" target="_blank" rel="external">http://blog.csdn.net/bbld_/article/details/41439715</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/24/viewpager-photos/" data-id="ciyyds56l001hbuxba67dcmwm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-material-setting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/23/material-setting/" class="article-date">
  <time datetime="2016-08-23T02:34:23.000Z" itemprop="datePublished">2016-08-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/23/material-setting/">Android实现Material Design风格的设置页面（滑动开关控件）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文链接 <a href="http://www.alijava.com/material-setting/" target="_blank" rel="external">http://www.alijava.com/material-setting/</a> 转载请注明出处</p>
<p>参考了这篇文章 <a href="http://drakeet.me/material-design-settings-activity" target="_blank" rel="external">Material Design 风格的设置页面
</a> </p>
<p>笔者对原文章做了3个改进：</p>
<ul>
<li><p>把勾选框 改成了 Switch 的滑动开关，Material Design 更彻底</p>
</li>
<li><p>替换后的 SwitchCompat 与整个 Preference 点击事件联动，保存到SharedPreferences</p>
</li>
<li><p>在页面上方增加了 ToolBar，更贴近真实项目场景</p>
</li>
</ul>
<p><img src="http://img.blog.csdn.net/20160229100707194" alt="blog.csdn.net/never_cxb" width="270" height="370" style="max-width:100%;"></p>
<p>项目源代码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>
<h1 id="基础：PreferenceScreen和PreferenceCategory"><a href="#基础：PreferenceScreen和PreferenceCategory" class="headerlink" title="基础：PreferenceScreen和PreferenceCategory"></a>基础：PreferenceScreen和PreferenceCategory</h1><h2 id="新建-res-xml-preferences-xml"><a href="#新建-res-xml-preferences-xml" class="headerlink" title="新建 res/xml/preferences.xml"></a>新建 res/xml/preferences.xml</h2><blockquote>
<p>Note:  是 <strong>xml</strong> 文件夹，不是 layout 文件夹</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- res/xml/preferences.xml --&gt;</span></div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;<span class="comment">&lt;!--最新栏目的新闻--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">PreferenceScreen</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout</span>=<span class="string">"@layout/preference_item"</span></div><div class="line">    <span class="attr">android:title</span>=<span class="string">"@string/title_activity_setting"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">PreferenceCategory</span></span></div><div class="line">        <span class="attr">android:layout</span>=<span class="string">"@layout/preference_category_widget"</span></div><div class="line">        <span class="attr">android:title</span>=<span class="string">"基本设置"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">CheckBoxPreference</span></span></div><div class="line">            <span class="attr">android:key</span>=<span class="string">"@string/save_net_mode"</span></div><div class="line">            <span class="attr">android:layout</span>=<span class="string">"@layout/preference_item"</span></div><div class="line">            <span class="attr">android:summary</span>=<span class="string">"仅在Wi-Fi环境下才自动加载图片"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"省流量模式"</span>/&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">Preference</span></span></div><div class="line">            <span class="attr">android:layout</span>=<span class="string">"@layout/preference_item"</span></div><div class="line">            <span class="attr">android:summary</span>=<span class="string">"删除已缓存的文章内容及图片"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"清空缓存"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">PreferenceCategory</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">PreferenceCategory</span></span></div><div class="line">        <span class="attr">android:layout</span>=<span class="string">"@layout/preference_category_widget"</span></div><div class="line">        <span class="attr">android:title</span>=<span class="string">"其他说明"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">Preference</span></span></div><div class="line">            <span class="attr">android:layout</span>=<span class="string">"@layout/preference_item"</span></div><div class="line">            <span class="attr">android:summary</span>=<span class="string">"V 1.0"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"当前版本"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">Preference</span></span></div><div class="line">            <span class="attr">android:layout</span>=<span class="string">"@layout/preference_item"</span></div><div class="line">            <span class="attr">android:summary</span>=<span class="string">"博客：http://blog.csdn.net/never_cxb"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"TomChen"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">PreferenceCategory</span>&gt;</span></div><div class="line">    </div><div class="line"><span class="tag">&lt;/<span class="name">PreferenceScreen</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="android-layout-实现-Material-Design-布局"><a href="#android-layout-实现-Material-Design-布局" class="headerlink" title="android:layout 实现  Material Design 布局"></a>android:layout 实现  Material Design 布局</h2><p>上面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">PreferenceCategory</span></span></div><div class="line">	<span class="attr">android:layout</span>=<span class="string">"@layout/preference_category_widget"</span></div><div class="line">	<span class="attr">android:title</span>=<span class="string">"基本设置"</span>&gt;</div><div class="line"><span class="comment">&lt;!-- ... --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">PreferenceCategory</span>&gt;</span></div></pre></td></tr></table></figure>
<p>使用 <code>android:layout=&quot;@layout/preference_category_widget&quot;</code> 改变  <code>PreferenceCategory</code> 布局</p>
<blockquote>
<p>Note:   一定要使用系统的 id <code>android:id=&quot;@android:id/title&quot;</code></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- preference_category_widget.xml --&gt;</span></div><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"@color/white"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@android:id/title"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:paddingLeft</span>=<span class="string">"8dp"</span></div><div class="line">        <span class="attr">android:paddingTop</span>=<span class="string">"16dp"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"@color/primary"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"indroduce"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>preference_item.xml</code> 定制 <code>CheckBoxPreference</code> 布局，勾选框或者滑动开关的布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- preference_item.xml --&gt;</span></div><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">    <span class="attr">android:minHeight</span>=<span class="string">"?android:listPreferredItemHeight"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></div><div class="line">    <span class="attr">android:padding</span>=<span class="string">"16dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@android:id/title"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:ellipsize</span>=<span class="string">"marquee"</span></div><div class="line">            <span class="attr">android:fadingEdge</span>=<span class="string">"horizontal"</span></div><div class="line">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"title"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"16sp"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@android:id/summary"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_below</span>=<span class="string">"@android:id/title"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"summary"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#AAAAAA"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@android:id/widget_frame"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"right|center_vertical"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="在PreferenceFragment载入设置布局文件"><a href="#在PreferenceFragment载入设置布局文件" class="headerlink" title="在PreferenceFragment载入设置布局文件"></a>在PreferenceFragment载入设置布局文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SettingFragment</span> <span class="keyword">extends</span> <span class="title">PreferenceFragment</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        addPreferencesFromResource(R.xml.preferences);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样就实现了原文里的效果图：</p>
<p><img src="http://img.blog.csdn.net/20160229101350922" alt="blog.csdn.net/never_cxb" width="270" height="486" style="max-width:100%;"></p>
<h1 id="CheckBox改为开关控件SwitchCompat"><a href="#CheckBox改为开关控件SwitchCompat" class="headerlink" title="CheckBox改为开关控件SwitchCompat"></a>CheckBox改为开关控件SwitchCompat</h1><h2 id="修改-CheckBoxPreference"><a href="#修改-CheckBoxPreference" class="headerlink" title="修改 CheckBoxPreference"></a>修改 CheckBoxPreference</h2><p>使用 <code>android:widgetLayout</code> 帮助我们修改<code>CheckBoxPreference</code>布局。</p>
<p>建立 <code>layout/switch_layout.xml</code> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;!-- switch_layout.xml --&gt;</div><div class="line">&lt;!--此处代码有bug，下面会说明如何修正--&gt;</div><div class="line">&lt;android.support.v7.widget.SwitchCompat xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;wrap_content&quot;</div><div class="line">    android:layout_height=&quot;wrap_content&quot;</div><div class="line">    android:textOff=&quot;OFF&quot;</div><div class="line">    android:textOn=&quot;ON&quot; /&gt;</div></pre></td></tr></table></figure>
<p>在原来的CheckBoxPreference加上<code>android:widgetLayout=&quot;@layout/switch_layout&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;!-- res/xml/preferences.xml --&gt;</div><div class="line">&lt;CheckBoxPreference</div><div class="line">    android:key=&quot;@string/save_net_mode&quot;</div><div class="line">    android:layout=&quot;@layout/preference_item&quot;</div><div class="line">    android:summary=&quot;仅在Wi-Fi环境下才自动加载图片&quot;</div><div class="line">    android:title=&quot;省流量模式&quot;</div><div class="line">    android:widgetLayout=&quot;@layout/switch_layout&quot; /&gt;</div></pre></td></tr></table></figure>
<h2 id="把控件是否选中保存到SharedPreferences中"><a href="#把控件是否选中保存到SharedPreferences中" class="headerlink" title="把控件是否选中保存到SharedPreferences中"></a>把控件是否选中保存到SharedPreferences中</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- res/values/strings.xml --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"save_net_mode"</span>&gt;</span>save_net_mode<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div></pre></td></tr></table></figure>
<p>设置 <code>android:key=&quot;@string/save_net_mode&quot;</code>属性，这是为了后续获取<code>CheckBoxPreference</code>。</p>
<p>保存到 <code>SharedPreferences</code> 为了方便也使用这个字符串 <code>save_net_mode</code>。</p>
<p>Java代码中用<code>getPreferenceManager().findPreference(&quot;key的名称&quot;)</code>来获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager()</div><div class="line">        .findPreference(getString(R.string.save_net_mode));</div><div class="line"></div><div class="line">checkboxPref.setOnPreferenceChangeListener(<span class="keyword">new</span> Preference.OnPreferenceChangeListener() &#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> preference The changed Preference.</div><div class="line">     * <span class="doctag">@param</span> newValue   The new value of the Preference.</div><div class="line">     * <span class="doctag">@return</span> True to update the state of the Preference with the new value.</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onPreferenceChange</span><span class="params">(Preference preference, Object newValue)</span> </span>&#123;</div><div class="line">        <span class="keyword">boolean</span> checked = Boolean.valueOf(newValue.toString());</div><div class="line">        <span class="comment">//保存到SharedPreferences中</span></div><div class="line">        PrefUtils.setSaveNetMode(checked);</div><div class="line">        Logger.d(<span class="string">"Pref "</span> + preference.getKey() + <span class="string">" changed to "</span> + newValue.toString());</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="onPreferenceChange-没有调用"><a href="#onPreferenceChange-没有调用" class="headerlink" title="onPreferenceChange 没有调用"></a>onPreferenceChange 没有调用</h2><p>在代码加上了Log输出，但是点击开关控件，却没有反应。</p>
<p>笔者把<code>android:widgetLayout=&quot;@layout/switch_layout&quot;</code>去掉<br>使用刚才的CheckBox，点击勾选或者取消勾选，发现可以保存到<code>SharedPreferences</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">D/LoggerTag﹕ ║ Pref save_net_mode changed to false</div><div class="line">D/LoggerTag﹕ ║ Pref save_net_mode changed to true</div></pre></td></tr></table></figure>
<h2 id="修改xml的SwitchCompat布局"><a href="#修改xml的SwitchCompat布局" class="headerlink" title="修改xml的SwitchCompat布局"></a>修改xml的SwitchCompat布局</h2><p>增加 <code>android:id=&quot;@android:id/checkbox&quot;</code></p>
<p>增加<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">android:clickable="false"</div><div class="line">android:focusable="false"</div><div class="line">android:focusableInTouchMode="false"</div></pre></td></tr></table></figure></p>
<p>变成如下代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- switch_layout.xml --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.SwitchCompat</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@android:id/checkbox"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:clickable</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:focusable</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:focusableInTouchMode</span>=<span class="string">"false"</span></div><div class="line">    <span class="attr">android:textOff</span>=<span class="string">"OFF"</span></div><div class="line">    <span class="attr">android:textOn</span>=<span class="string">"ON"</span> /&gt;</div></pre></td></tr></table></figure>
<p>这样点击开关按钮，按钮开或者关，会将 <code>true</code> 或 <code>false</code> 保存到 <code>SharedPreferences</code> 中</p>
<h1 id="增加ToolBar"><a href="#增加ToolBar" class="headerlink" title="增加ToolBar"></a>增加ToolBar</h1><h2 id="新增-layout-setting-xml"><a href="#新增-layout-setting-xml" class="headerlink" title="新增  layout/setting.xml"></a>新增  layout/setting.xml</h2><p>在<code>res/xml/preferences.xml</code>中增加ToolBar是不可能的<br>因为它的父节点是<code>PreferenceScreen</code></p>
<p>我们新建一个 <code>layout/setting.xml</code><br>在这个里面使用 <code>Toolbar</code>，下面的 <code>FrameLayout</code> 展示刚才的设置界面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- setting.xml --&gt;</span></div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--Toolbar--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar_preference"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></div><div class="line">        <span class="attr">android:minHeight</span>=<span class="string">"?attr/actionBarSize"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/content_frame"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="标题设置"><a href="#标题设置" class="headerlink" title="标题设置"></a>标题设置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getFragmentManager().beginTransaction().replace(R.id.content_frame, <span class="keyword">new</span> SettingFragment()).commit();</div></pre></td></tr></table></figure>
<p>把上面的 <code>FrameLayout</code> 布局区域设为 <code>SettingFragment</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SettingActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@InjectView</span>(R.id.toolbar_preference)</div><div class="line">    Toolbar mToolbar;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_setting);</div><div class="line">        ButterKnife.inject(<span class="keyword">this</span>);</div><div class="line">        initToolbar();</div><div class="line">        getFragmentManager().beginTransaction().replace(R.id.content_frame, <span class="keyword">new</span> SettingFragment()).commit();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 初始化Toolbar</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initToolbar</span><span class="params">()</span> </span>&#123;</div><div class="line">        mToolbar.setTitle(getResources().getString(R.string.title_activity_setting));</div><div class="line">        mToolbar.setTitleTextColor(getResources().getColor(R.color.white));</div><div class="line">        setSupportActionBar(mToolbar);</div><div class="line">        ActionBar actionBar = getSupportActionBar();</div><div class="line">        <span class="keyword">if</span> (actionBar != <span class="keyword">null</span>) &#123;</div><div class="line">            actionBar.setHomeAsUpIndicator(R.drawable.ic_left_back);</div><div class="line">            actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 选项菜单</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">            <span class="keyword">case</span> android.R.id.home:</div><div class="line">                finish();</div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过 <code>actionBar.setHomeAsUpIndicator(R.drawable.ic_left_back);</code><br>增加了一个返回的白色箭头</p>
<p>通过 <code>android.R.id.home</code>获取白色箭头的点击事件，返回上一个Activity</p>
<p>本文链接 <a href="http://www.alijava.com/material-setting/" target="_blank" rel="external">http://www.alijava.com/material-setting/</a> 转载请注明出处</p>
<p>项目源代码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><a href="http://stackoverflow.com/questions/19821979/value-from-checkboxpreference-is-not-retained" target="_blank" rel="external">Value from CheckBoxPreference is not retained</a></li>
<li><a href="http://drakeet.me/material-design-settings-activity" target="_blank" rel="external">Material Design 风格的设置页面
</a></li>
<li><a href="http://stackoverflow.com/questions/3618172/customizing-checkboxpreference-via-androidwidgetlayout" target="_blank" rel="external">Customizing CheckBoxPreference via android:widgetLayout</a></li>
<li><a href="http://stackoverflow.com/questions/26564400/creating-a-preference-screen-with-support-v21-toolbar" target="_blank" rel="external">Creating a Preference Screen with support (v21) Toolbar</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/23/material-setting/" data-id="ciyyds562000tbuxb1qsmkeoj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MaterialDesign/">MaterialDesign</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MaterialDesign/">MaterialDesign</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/七牛/">七牛</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/命令行/">命令行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 18px;">Android</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MaterialDesign/" style="font-size: 10px;">MaterialDesign</a> <a href="/tags/Python/" style="font-size: 12px;">Python</a> <a href="/tags/七牛/" style="font-size: 10px;">七牛</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/工具/" style="font-size: 14px;">工具</a> <a href="/tags/排序/" style="font-size: 10px;">排序</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/面试/" style="font-size: 16px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/04/hexo-tips/">从 CSDN 博客迁移到个人 Hexo 站点的一点坑</a>
          </li>
        
          <li>
            <a href="/2017/02/09/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2016/11/25/campus-interview/">2017互联网校园招聘的一些面试题</a>
          </li>
        
          <li>
            <a href="/2016/10/03/javac-error/">javac、javap命令行执行 java 程序的一点小坑</a>
          </li>
        
          <li>
            <a href="/2016/10/02/sort-summary/">经典排序算法总结--冒泡、快排、插入、希尔、归并、选择</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>