<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-python-basics" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/31/python-basics/" class="article-date">
  <time datetime="2016-08-31T14:21:43.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/python-basics/">日积月累 Python 有意思的一些小技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="括号的区别"><a href="#括号的区别" class="headerlink" title="括号的区别"></a>括号的区别</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'list'</span>&gt;</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;type <span class="string">'tuple'</span>&gt;</div></pre></td></tr></table></figure>
<ul>
<li><p><code>( )</code> 表示 tuple，不可变类型</p>
</li>
<li><p><code>[ ]</code> 表示 list，可变类型</p>
</li>
</ul>
<h2 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[ ea*<span class="number">2</span> <span class="keyword">for</span> ea <span class="keyword">in</span> a ]</div><div class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<blockquote>
<p>元组没有元组推导式</p>
</blockquote>
<h2 id="交换"><a href="#交换" class="headerlink" title="交换"></a>交换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">12</span>  </div><div class="line">b = <span class="number">24</span>  </div><div class="line"><span class="comment"># exchange a  b</span></div><div class="line">a, b = b, a</div></pre></td></tr></table></figure>
<h2 id="输出序列以及倒序输出"><a href="#输出序列以及倒序输出" class="headerlink" title="输出序列以及倒序输出"></a>输出序列以及倒序输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> range(<span class="number">1</span>,<span class="number">10</span>)</div><div class="line"><span class="keyword">print</span> range(<span class="number">1</span>,<span class="number">10</span>)[::<span class="number">-1</span>]</div><div class="line"></div><div class="line"><span class="comment">#output:</span></div><div class="line"><span class="comment">#[1, 2, 3, 4, 5, 6, 7, 8, 9]</span></div><div class="line"><span class="comment">#[9, 8, 7, 6, 5, 4, 3, 2, 1]</span></div></pre></td></tr></table></figure>
<h2 id="加-r-不转义"><a href="#加-r-不转义" class="headerlink" title="加 r 不转义"></a>加 r 不转义</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">"\\savc\nff"</span></div><div class="line"><span class="keyword">print</span> <span class="string">r"\\savc\nff"</span></div><div class="line"></div><div class="line"><span class="comment">#output:</span></div><div class="line"><span class="comment">#\savc</span></div><div class="line"><span class="comment">#ff</span></div><div class="line"><span class="comment">#\\savc\nff</span></div></pre></td></tr></table></figure>
<h2 id="格式化-对其输出-log-信息"><a href="#格式化-对其输出-log-信息" class="headerlink" title="格式化 对其输出 log 信息"></a>格式化 对其输出 log 信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">print &apos;succeed&apos;.center(20,&apos;=&apos;)</div><div class="line">print &apos;fail&apos;.center(20,&apos;=&apos;)</div><div class="line"></div><div class="line"># output</div><div class="line"># ======succeed=======</div><div class="line"># ========fail========</div></pre></td></tr></table></figure>
<p>center 表示居中的意思</p>
<h2 id="单引号和双引号都可以表示字符串"><a href="#单引号和双引号都可以表示字符串" class="headerlink" title="单引号和双引号都可以表示字符串"></a>单引号和双引号都可以表示字符串</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">'hello world'</span></div><div class="line"><span class="keyword">print</span> <span class="string">"hello world"</span></div></pre></td></tr></table></figure>
<p>都是输出 <code>hello world</code></p>
<p>这点要注意和java区分，因为java单引号表示字符<code>char</code>，双引号表示字符串<code>string</code></p>
<h2 id="pass的使用"><a href="#pass的使用" class="headerlink" title="pass的使用"></a>pass的使用</h2><p>如果想定义一个空函数，可以这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">staCorrect</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>如果把上面的pass去掉是会报错的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/31/python-basics/" data-id="ciyyds564000ybuxbwax5telm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-network-interview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/31/network-interview/" class="article-date">
  <time datetime="2016-08-31T13:37:07.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/network-interview/">程序员常见面试之 计算机网络 知识点小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>悉心整理校正了计算机网络的面试常用知识点，图文并茂，通俗易懂，希望对大家有所帮助。</p>
<p>文章链接 <a href="http://www.alijava.com/network-interview/" target="_blank" rel="external">http://www.alijava.com/network-interview/</a> ，分享请保留出处。</p>
<h1 id="TCP-IP-参考模型"><a href="#TCP-IP-参考模型" class="headerlink" title="TCP/IP 参考模型"></a>TCP/IP 参考模型</h1><h2 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h2><p>每一层都是独立存在的，因此分配到各层的任务能够独立地执行，变更其中某层提供的方案时不影响其他层。</p>
<p>这也可以理解为一个松耦合的设计。</p>
<p><img src="http://7xqo2w.com1.z0.glb.clouddn.com/image/hexo/tcp_ip.jpg" alt="tcpip 模型" title="tcpip 模型"></p>
<h2 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h2><blockquote>
<p><em>网络层</em> 主要是 ip 协议，可以通过 ip 找到某个机器，但是机器上有很多应用程序，每个程序都占用相应的端口，<em>传输层</em>  不同协议有不同的端口，通过 ip + 端口 就可以确定某个机器上的具体应用程序了。</p>
</blockquote>
<p>Server A 和 Server B 直接传输数据，有封装和解封装的过程。</p>
<p>数据从A 的<strong>应用层往下走到物理层</strong>，会在每一层都会加上头部信息，进行封装，然后再发送到B。</p>
<p>然后 Server B 从 <strong>最下面的物理层往上</strong> 每一层进行解封装，最后到达应用层，得到数据。</p>
<ul>
<li><p>物理层：将电脑连起来，可以用光缆、电缆、双绞线、无线电波等方式</p>
</li>
<li><p>链路层：数据包会带上发送地址和接收地址，也就是MAC地址</p>
</li>
<li><p>网络层：网络地址帮助我们确定计算机所在的子网络，MAC地址则将数据包送到该子网络中的目标网卡。<br>  因此，从逻辑上可以推断，必定是先处理网络地址，然后再处理MAC地址。</p>
</li>
<li><p>传输层：同一台主机上有许多程序都需要用到网络，端口可以确定表示这个数据包到底供哪个程序使用。<br>  传输层建立”端口到端口”的通信，”网络层”的功能是建立”主机到主机”的通信。<br>  （ftp 21，ssh 22，dns 53，http 80）</p>
</li>
<li><p>应用层 我们在传输数据时，可以只使用(传输层)TCP/IP协议，但是那样的话，如果没有应用层，便无法识别数据内容。<br>  如果想要使传输的数据有意义，则必须使用到应用层协议。</p>
</li>
</ul>
<p>　　</p>
<h2 id="TCP-区别-UDP"><a href="#TCP-区别-UDP" class="headerlink" title="TCP 区别 UDP"></a>TCP 区别 UDP</h2><p>TCP连接是由4个值来识别的： &lt;源IP地址、源端口号、目的IP地址、目的端口号&gt;</p>
<ul>
<li>TCP是面向连接的、可靠的<br>  其实网络的不安全不稳定特性，无论多少次握手都不能保证连接的可靠性<br>  但TCP的三次握手在最低限度上(实际上也很大程度上保证了)保证了连接的可靠性 </li>
</ul>
<ul>
<li>UDP 无连接的、不可靠<br>  UDP传送数据前并不与对方建立连接，对接收到的数据也不发送确认信号，发送端不知道数据是否会正确接收，当然也不用重发，</li>
</ul>
<blockquote>
<p>　UDP 交给上层进行差错控制，可以代码对UDP的数据收发进行验证，比如发送方对每个数据包进行编号然后由接收方进行验证啊什么的</p>
<p>　即使是这样，UDP因为在底层协议的封装上没有采用类似TCP的“三次握手”而实现了TCP所无法达到的传输效率</p>
</blockquote>
<p>　　</p>
<h1 id="IP-协议"><a href="#IP-协议" class="headerlink" title="IP 协议"></a>IP 协议</h1><h2 id="A-类-B-类-C-类"><a href="#A-类-B-类-C-类" class="headerlink" title="A 类 B 类 C 类"></a>A 类 B 类 C 类</h2><blockquote>
<p>IP的地址字段范围是0~127，但是由于全0和全1的地址用作特殊用途，实际可指派的第一个字段范围是1~126。</p>
</blockquote>
<p>A类地址范围：0.0.0.1   —— 126.255.255.254，    默认网络掩码为 255.0.0.0</p>
<p>B类地址范围：128.0.0.1 —— 191.255.255.254，默认子网掩码为255.255.0.0</p>
<p>C类地址范围：192.0.0.1 —— 223.255.255.254，默认子网掩码为255.255.255.0</p>
<blockquote>
<p>0 到 128 相差128，128 到192相差64，后面192到224相差32。</p>
<p>A 类地址， 0   开头， 128  个<br>B 类地址，10   开头，16,384    个<br>C 类地址，110 开头，2,097,152 个</p>
</blockquote>
<h2 id="特殊的地址"><a href="#特殊的地址" class="headerlink" title="特殊的地址"></a>特殊的地址</h2><p>ip 地址= 网络号 + 主机号</p>
<table>
<thead>
<tr>
<th style="text-align:center">网络号</th>
<th style="text-align:center">主机号</th>
<th style="text-align:left">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">全为0</td>
<td style="text-align:center">全为0</td>
<td style="text-align:left">表示本主机，用作源地址，启动时用，获取了 IP 地址后不再使用</td>
</tr>
<tr>
<td style="text-align:center">全为0</td>
<td style="text-align:center">host-id</td>
<td style="text-align:left">本地网络上主机号为 host-id 的主机，只作为源地址</td>
</tr>
<tr>
<td style="text-align:center">全为1</td>
<td style="text-align:center">全为1</td>
<td style="text-align:left">有限广播（本地网络），只作目的地址，各路由器都不转发</td>
</tr>
<tr>
<td style="text-align:center">net-id</td>
<td style="text-align:center">全为1</td>
<td style="text-align:left">定向广播（net-id标识的网络），只作目的地址</td>
</tr>
<tr>
<td style="text-align:center">net-id</td>
<td style="text-align:center">全为0</td>
<td style="text-align:left">标识一个网络</td>
</tr>
<tr>
<td style="text-align:center">127</td>
<td style="text-align:center">任意</td>
<td style="text-align:left">本地软件回送地址</td>
</tr>
</tbody>
</table>
<p>B类中169.254.0.0到169.254.255.255是保留地址。如果你的IP地址是自动获取IP地址，而你在网络上又没有找到可用的DHCP服务器，这时你将会从169.254.0.0到169.254.255.255中临得获得一个IP地址。 </p>
<h2 id="私有地址"><a href="#私有地址" class="headerlink" title="私有地址"></a>私有地址</h2><p>私有地址包括3组<br>A类：10.0.0.0~10.255.255.255<br>B类：172.16.0.0~172.31.255.255<br>C类：192.168.0.0~192.168.255.255</p>
<blockquote>
<p>学校里的局域网，因为大概有几十万人，所以是10开头的局域网。</p>
<p>而我们买的无线路由器，也要设置局域网，一般为192开头的，比如192.168.0.1或者192.168.199.1（比如极路由就是这个地址）</p>
<p>我们建企业网（单位网络）时，一般是使用私有地址来分配内部主机，小企业使用C类的192.168.0.0网络，中型企业使用172.16.0.0网络，如果还不够用，还有10.0.0.0 网络。 </p>
</blockquote>
<h2 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h2><p>以C类网络为例，原有8位主机位，2的8次方即256个主机地址，默认子网掩码255.255.255.0。</p>
<p>借用1位主机位，产生2个子网，每个子网有126个主机地址；借用2位主机位，产生4个子网，每个子网有62个主机地址……</p>
<h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><p>把子网掩码为255.255.0.0的网络40.15.0.0分为两个子网，假设第一个子网为40.15.0.0/17，则第二个子网为?</p>
<blockquote>
<p>40.15.0.0/17  表示网段是40.15.0.0，子网掩码是17位。</p>
<p>子网掩码为：255.255.128.0，用二进制表示为：11111111 11111111 10000000 00000000 ，斜杠后面的17表示子网掩码前17位为1.</p>
</blockquote>
<p>答案：</p>
<p>划分为两个子网的话子网掩码应该为255.255.128.0<br>第一个子网是40.15.0.0/17，可用地址范围是40.15.0.1~40.15.127.254<br>第二个子网是40.15.128.0/17，可用地址范围是40.15.128.1~40.15.255.254 </p>
<p>解析：</p>
<p>掩码的前两个八位是255，第三个八位是128，有2的一次方个子网（因为第三个八位只有一个1，后面七位都是0），所以ip 地址第三个8位是0000,0000或者1000,0000，即0或者128。</p>
<p>因为第3个8位是1000,0000，可以区分开头第一个数是0还是1, 区分了两个子网。所以这两个子网是40.15.0.0和40.15.128.0</p>
<h1 id="NAT穿透技术"><a href="#NAT穿透技术" class="headerlink" title="NAT穿透技术"></a>NAT穿透技术</h1><p>NAT（<strong>Network Address Translation</strong>，网络地址转换）是一种网络地址翻译技术，将内部私有IP地址改变成可以在公网上使用的.</p>
<p><img src="http://img.blog.csdn.net/20151230110424992" alt="NAT"></p>
<h2 id="NAT三种实现方式"><a href="#NAT三种实现方式" class="headerlink" title="NAT三种实现方式"></a>NAT三种实现方式</h2><ul>
<li><p>静态地址转换：一个公网IP对应一个内部IP,一对一转换</p>
</li>
<li><p>动态地址转换：N个公网IP对应M个内部Ip,不固定的一对一IP转换关系．同一时间，有M-N个主机无法联网．</p>
</li>
<li><p>端口多路复用：对外只有一个公网IP,通过端口来区别不同内部IP主机的数据．</p>
</li>
</ul>
<h2 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h2><ul>
<li><p>网关（gateway）能在不同协议间移动数据</p>
</li>
<li><p>路由器（router）是在不同网络间移动数据<br>  相当于传统所说的IP网关（IP gateway）</p>
</li>
</ul>
<h1 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h1><h2 id="一些名词"><a href="#一些名词" class="headerlink" title="一些名词"></a>一些名词</h2><ul>
<li>seq （Sequence Number）序列号，这是为了连接以后传送数据用的</li>
<li>ack（Acknowledgment Number）确认序列号，是对收到的数据包的确认，值是等待接收的数据包的序列号。 </li>
<li>SYN synchronous 同步信号</li>
<li>ACK Acknowledgement 应答信号， 当 ACK=1时候表示ack字段有意义</li>
<li>SYN 和 ACK 也表示 TCP 的标志位?</li>
</ul>
<h2 id="三次握手的步骤"><a href="#三次握手的步骤" class="headerlink" title="三次握手的步骤"></a>三次握手的步骤</h2><p><img src="http://img.blog.csdn.net/20151230191655477" alt="三次握手"></p>
<ol>
<li>客户端 发起握手，目的端点是 服务端 的端点 post_server<ul>
<li>生成一个随机数作为它的初始化发送序号 x</li>
<li>发出一个同步报文段，SYN=1，发送序号 seq=x</li>
<li>并进入SYN_SEND状态，等待服务器确认</li>
</ul>
</li>
<li>服务端监听到端口 post_server 上有连接请求，响应<ul>
<li>生成一个随机数作为它的初始发送序号 seq = y</li>
<li>发出同步报文字段并对主机 A 端口1的连接请求进行确认，发送ack=x+1</li>
<li>即发送 SYN+ACK 包，此时服务器进入SYN_RECV状态</li>
</ul>
</li>
<li>主机 A <ul>
<li>发出对 服务端 端口 post_server 的确认，确认序号 ack=y+1，还有seq=x+1</li>
<li>客户端和服务器进入ESTABLISHED状态，完成三次握手</li>
</ul>
</li>
</ol>
<h2 id="为什么采用3次握手而不是2次握手"><a href="#为什么采用3次握手而不是2次握手" class="headerlink" title="为什么采用3次握手而不是2次握手?"></a>为什么采用3次握手而不是2次握手?</h2><ul>
<li>第一次握手  客户端发，服务端 知道 客户端 可以 <strong>发消息</strong></li>
<li>第二次握手  服务端收和发，客户端 知道 服务端 可以 <strong>接收消息 和 发消息</strong></li>
<li>第三次握手 客户端收和发，服务端 知道 客户端可以 <strong>接收消息 和 发消息</strong></li>
</ul>
<p>3 次是双向通信的最小值，也就是 SYN, SYN ACK, ACK ，<strong>两个发送、两个接收</strong> ，其中第二次把接收和发送合在一起了</p>
<p>如果两次握手的话，客户端有可能因为网络阻塞等原因会发送多个请求报文，这时服务器就会建立连接，浪费掉许多服务器的资源。所以要增加第三次握手。</p>
<h2 id="第3次失败会怎么办"><a href="#第3次失败会怎么办" class="headerlink" title="第3次失败会怎么办?"></a>第3次失败会怎么办?</h2><p>第三次失败，只有客户端处于成功状态（因为第2次服务器返回了ACK），服务器端没有接收到客户端的 ACK。</p>
<p>这要分几种情况讨论：</p>
<ul>
<li><p>In other words, if the ACK is dropped but the next packet is not dropped, then everything is fine.<br>也就是说客户端发出的 ACK 丢失了，发出的 下一个数据包 没有丢失，则服务端接收到下一个数据包（这个数据包里也会带上 ACK 信息），能够进入正常的 ESTABLISHED 状态</p>
</li>
<li><p>如果服务端和客户端都没有数据发送，或者服务端想发送数据（但是发不了，因为没有收到客户端的 ACK），服务器都会有定时器发送第二步SYN+ACK数据包，如果客户端再次发送ACK成功，建立连接。</p>
<p>  如果一直不成功，服务器肯定会有超时设置，超时之后会给客户端发RTS报文，进入CLOSED状态，<strong>防止SYN洪泛攻击。</strong></p>
</li>
</ul>
<h2 id="四次握手关闭连接"><a href="#四次握手关闭连接" class="headerlink" title="四次握手关闭连接"></a>四次握手关闭连接</h2><p><img src="http://img.blog.csdn.net/20151230191800837" alt="四次握手"></p>
<p>（1）主机 A 关闭 A主机的 <strong>端口1</strong> 到 B主机的 <strong>端口2</strong> 的传输连接： </p>
<ul>
<li>应用程序通知 TCP 数据已经发送完毕时，关闭连接</li>
<li>TCP 向主机 B 发送一个带 FIN 附加标记的报文段（FIN 表示 finish），FIN=1，seq=x</li>
</ul>
<p>（2）主机 B 响应：</p>
<ul>
<li>收到这个 FIN 报文段之后，并不立刻用 FIN 报文段回复主机 A，而是先向主机 A 发送一个确认序号 ，ACK=1，ack=x+1</li>
<li>同时通知自己相应的应用程序，主机 A 方传输已经结束，对方要求关闭连接（先发送 ACK 的目的是为了防止这段时间内，主机 A 重传 FIN 报文段）</li>
</ul>
<p>（3）主机 B 关闭 端口2到端口1的传输连接： </p>
<ul>
<li>应用程序告诉 TCP: 我要彻底地关闭连接</li>
<li>TCP 收到对最后数据的确认后，向主机 A 发送一个 FIN 报文段。FIN=1，seq=y，ACK=1，seq=x+1。</li>
</ul>
<p>（4）主机 A 响应： </p>
<ul>
<li>收到这个 FIN 报文段之后，向主机 B 发送一个 ACK 表示连接彻底释放。ACK=1，ack=y+1</li>
<li>主机B收到主机A的ACK报文段以后，就关闭连接；此时，主机A等待2MSL （Maximum Segment Lifetime）后依然没有收到回复，则证明主机 B 已正常关闭，那好，主机A也可以关闭连接了。</li>
</ul>
<h2 id="为什么连接的时候是三次握手，关闭的时候却是四次握手"><a href="#为什么连接的时候是三次握手，关闭的时候却是四次握手" class="headerlink" title="为什么连接的时候是三次握手，关闭的时候却是四次握手?"></a>为什么连接的时候是三次握手，关闭的时候却是四次握手?</h2><p>TCP是全双工模式，关闭连接时，每个方向都必须单独进行关闭。</p>
<p>当 主机 B 收到主机 A 的FIN报文时，仅仅表示主机 A 不再发送数据了但是 A 还能接收数据。</p>
<p>如果主机 B 全部数据都已经发送给 A 了，B 可以立即close；也可以发送一些数据给 A 后，再发送 FIN 报文关闭连接。</p>
<p>因此， 主机 B 的 ACK 和 FIN 一般都会分开发送。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><p><a href="https://books.google.com/books?id=STd0TTcAbdwC&amp;pg=PA51&amp;dq=%E5%B9%BF%E6%92%AD%E5%9C%B0%E5%9D%80&amp;hl=zh-CN&amp;sa=X&amp;ved=0ahUKEwjloLm5o_7JAhVK6SYKHfKyBWYQ6AEIJjAB#v=onepage&amp;q=%E5%B9%BF%E6%92%AD%E5%9C%B0%E5%9D%80&amp;f=false" target="_blank" rel="external">TCP/IP网络与协议</a></p>
</li>
<li><p><a href="http://baike.baidu.com/view/1023913.htm" target="_blank" rel="external">子网划分</a></p>
</li>
<li><p><a href="https://books.google.com/books?id=cLaW117bi4sC&amp;pg=PA117&amp;dq=%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;hl=zh-CN&amp;sa=X&amp;ved=0ahUKEwjLxYjev_3JAhXGKh4KHatxC_YQ6AEIMzAE#v=onepage&amp;q=%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2&amp;f=false" target="_blank" rel="external">实现Server 2003网络服务基础结构</a></p>
</li>
<li><p><a href="http://www.wildlee.org/2010_02_152.html" target="_blank" rel="external">UDP穿透NAT的原理</a></p>
</li>
<li><p><a href="http://www.jellythink.com/archives/705" target="_blank" rel="external">简析TCP的三次握手与四次分手</a></p>
</li>
<li><p><a href="https://books.google.com/books?id=9-kAI9-VwDsC&amp;pg=PA299&amp;dq=%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B&amp;hl=zh-CN&amp;sa=X&amp;ved=0ahUKEwjOoazApYPKAhVEJCYKHfYfBG8Q6AEIIzAB#v=onepage&amp;q=%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B&amp;f=false" target="_blank" rel="external">计算机网络</a></p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html" target="_blank" rel="external">互联网协议入门（一）</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/31/network-interview/" data-id="ciyyds562000vbuxbyvqrw19t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络/">网络</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-simulate-bbs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/31/simulate-bbs/" class="article-date">
  <time datetime="2016-08-31T01:31:39.000Z" itemprop="datePublished">2016-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/simulate-bbs/">Java 模拟 HTTP Get Post 请求实现论坛自动回帖</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h1><p>最近想自动发帖回帖，拿某论坛试验了一下，发现可行，不过后续没有再使用，以免影响论坛正常运行。</p>
<p>本文链接 <a href="http://www.alijava.com/simulate-bbs/" target="_blank" rel="external">http://www.alijava.com/simulate-bbs/</a> 转载请注明出处</p>
<ol>
<li><p>帖子链接的格式为<br>  <code>http://bbs.***.***.**/forum.php?mod=viewthread&amp;tid=774210</code><br> 最后面774210数字变化, 就可以得到不同的帖子</p>
</li>
<li><p>防止帖子发表会又被删了的情况, 进行判断帖子是否存在</p>
</li>
<li><p>递增后面的 id 数字, 对每个链接做回帖的 POST 请求</p>
</li>
</ol>
<h1 id="重难点"><a href="#重难点" class="headerlink" title="重难点"></a>重难点</h1><p>回帖需要用户登录信息</p>
<ul>
<li><p>一种是利用Cookie</p>
</li>
<li><p>另一种是进行模拟登录</p>
</li>
</ul>
<p>本文采用前者</p>
<h1 id="判断-url-对应的帖子是否存在"><a href="#判断-url-对应的帖子是否存在" class="headerlink" title="判断 url 对应的帖子是否存在"></a>判断 url 对应的帖子是否存在</h1><p>有可能用户发了帖子，比如 url 为 <code>http://bbs.***.***.**/forum.php?mod=viewthread&amp;tid=774200</code> </p>
<p>后来该帖子用户删除了或者被管理员删除了，虽然帖子不在了，但是该 <code>tid=774200</code> 还是存在的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">	String tmpPath = baseRefer + id;</div><div class="line"></div><div class="line">	URL url;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		url = <span class="keyword">new</span> URL(tmpPath);</div><div class="line"></div><div class="line">		HttpURLConnection con = (HttpURLConnection) url.openConnection();</div><div class="line">		con.addRequestProperty(<span class="string">"Content-Type"</span>, <span class="string">"text/html; charset=UTF-8"</span>);</div><div class="line">		con.addRequestProperty(</div><div class="line">				<span class="string">"User-Agent"</span>,</div><div class="line">				<span class="string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.104 Safari/537.36"</span>);</div><div class="line">		con.addRequestProperty(<span class="string">"Referer"</span>, <span class="string">"http://t.dianping.com/register"</span>);</div><div class="line">		con.setRequestMethod(<span class="string">"GET"</span>);</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (con.getResponseCode() == <span class="number">200</span>) &#123;</div><div class="line">			InputStream inputStr = con.getInputStream();</div><div class="line">			String info = <span class="keyword">new</span> String(StreamTool.read(inputStr), <span class="string">"UTF-8"</span>);</div><div class="line">			<span class="keyword">if</span> (info.contains(<span class="string">"抱歉，指定的主题不存在或已被删除或正在被审核"</span>)) &#123;</div><div class="line">				System.out.println(<span class="string">"id="</span> + id + <span class="string">"帖子存在或已被删除！"</span>);</div><div class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="模拟发帖"><a href="#模拟发帖" class="headerlink" title="模拟发帖"></a>模拟发帖</h1><p>代码比较简单，注意事项是找到自己的<code>Cookie</code>，赋给<code>String yourCookeie</code></p>
<p>用post发送一个回帖，回帖信息在 <code>mapData.put(&quot;message&quot;, &quot;友情帮顶了&quot;)</code> 中 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String baseRefer = <span class="string">"http://bbs.**.**.**/forum.php?mod=viewthread&amp;tid="</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String yourCookeie = <span class="string">"Q8qA_2132_saltkey=**; Q8qA_2132_lastvisit=****3699;"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> startId = <span class="number">774210</span>; <span class="comment">// you need change</span></div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">		postMessage(startId);</div><div class="line">		startId++;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postMessage</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (!isExist(id)) &#123;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	String tmpPath = baseRefer + id;</div><div class="line"></div><div class="line">	StringBuilder path = <span class="keyword">new</span> StringBuilder(tmpPath);</div><div class="line">	Map&lt;String, String&gt; mapData = <span class="keyword">new</span> LinkedHashMap&lt;String, String&gt;();</div><div class="line">	mapData.put(<span class="string">"mod"</span>, <span class="string">"post"</span>);</div><div class="line">	mapData.put(<span class="string">"action"</span>, <span class="string">"reply"</span>);</div><div class="line">	mapData.put(<span class="string">"replysubmit"</span>, <span class="string">"yes"</span>);</div><div class="line">	mapData.put(<span class="string">"infloat"</span>, <span class="string">"yes"</span>);</div><div class="line">	mapData.put(<span class="string">"handlekey"</span>, <span class="string">"fastpost"</span>);</div><div class="line">	mapData.put(<span class="string">"inajax"</span>, <span class="string">"1"</span>);</div><div class="line">	mapData.put(<span class="string">"message"</span>, <span class="string">"友情帮顶了"</span>);</div><div class="line">	mapData.put(<span class="string">"formhash"</span>, <span class="string">"86ec5d81"</span>);</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		<span class="keyword">for</span> (Map.Entry&lt;String, String&gt; mapEnt : mapData.entrySet()) &#123;</div><div class="line">			path.append(<span class="string">"&amp;"</span>);</div><div class="line">			path.append(mapEnt.getKey() + <span class="string">"="</span>);</div><div class="line">			path.append(URLEncoder.encode(mapEnt.getValue(), <span class="string">"UTF-8"</span>));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		URL url = <span class="keyword">new</span> URL(path.toString());</div><div class="line">		HttpURLConnection con = (HttpURLConnection) url.openConnection();</div><div class="line">		con.setRequestMethod(<span class="string">"POST"</span>);</div><div class="line">		con.setRequestProperty(<span class="string">"Content-Type"</span>,</div><div class="line">				<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">		con.setRequestProperty(<span class="string">"Content-Length"</span>,</div><div class="line">				String.valueOf(path.length()));</div><div class="line">		con.setRequestProperty(</div><div class="line">				<span class="string">"User-Agent"</span>,</div><div class="line">				<span class="string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.104 Safari/537.36"</span>);</div><div class="line">		con.setRequestProperty(<span class="string">"Cookie"</span>, yourCookeie);</div><div class="line">		con.setDoOutput(<span class="keyword">true</span>);</div><div class="line">		OutputStream outStr = con.getOutputStream();</div><div class="line">		outStr.write(path.toString().getBytes());</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (con.getResponseCode() == <span class="number">200</span>) &#123;</div><div class="line">			InputStream inputStr = con.getInputStream();</div><div class="line">			String info = <span class="keyword">new</span> String(StreamTool.read(inputStr), <span class="string">"UTF-8"</span>);</div><div class="line">			System.out.println(<span class="string">"在id="</span> + id + <span class="string">"成功发帖！"</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">20</span> * <span class="number">1000</span>);</div><div class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">				<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">		<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">		e.printStackTrace();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一个工具方法，将输入流转化为字节</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamTool</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] read(InputStream inputStr) <span class="keyword">throws</span> Exception &#123;</div><div class="line">		ByteArrayOutputStream outStr = <span class="keyword">new</span> ByteArrayOutputStream();</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		<span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = inputStr.read(buffer)) != -<span class="number">1</span>) &#123;</div><div class="line">			outStr.write(buffer, <span class="number">0</span>, len);</div><div class="line">		&#125;</div><div class="line">		inputStr.close();</div><div class="line">		<span class="keyword">return</span> outStr.toByteArray();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="http://7xqo2w.com1.z0.glb.clouddn.com/image/hexo/auto_bbs.jpg" alt="www.alijava.com"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/31/simulate-bbs/" data-id="ciyyds56g0019buxb45sr3usg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux-basics" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/30/linux-basics/" class="article-date">
  <time datetime="2016-08-30T12:50:42.000Z" itemprop="datePublished">2016-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/30/linux-basics/">Linux Shell Vim 常用命令、使用技巧总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文总结了自己实际开发中的常用命令，不定时更新，方便自己和其他人查阅。</p>
<p>如有其他提高效率的使用技巧，欢迎留言。</p>
<p>本文地址 <a href="http://www.alijava.com/linux-basics/" target="_blank" rel="external">http://www.alijava.com/linux-basics/</a> 转载请注明出处</p>
<h1 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux 常用命令"></a>Linux 常用命令</h1><h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><ul>
<li><p><code>cd -</code> 返回到上一次的工作目录</p>
</li>
<li><p><code>export LANG=en_US</code>，export 对于环境变量的设置也能作用于子shell</p>
</li>
<li><p><code>ps -ef | grep nginx</code> ，搜索，这儿用到了管道</p>
</li>
<li><p><code>passwd root</code> 修改密码 </p>
</li>
<li><p><code>top</code> 监控CPU 内存等 </p>
</li>
<li><p><code>$?</code> 上一个命令执行的退出状态，成功为0，不成功为非0</p>
</li>
<li><p><code>hostname</code> 获取 ip </p>
</li>
<li><p><code>alias vi=&quot;vim&quot;</code> 在/etc/profile (用户登录自运行配置文件)的末尾添加vi的别名设置</p>
</li>
</ul>
<h2 id="ls-常用参数"><a href="#ls-常用参数" class="headerlink" title="ls 常用参数"></a>ls 常用参数</h2><ul>
<li><code>-a</code> 列出所有(含隐藏文件等):  </li>
<li><code>-ltr</code> 按照时间升序 </li>
<li><p><code>-lt</code> 按照时间降序</p>
</li>
<li><p>统计文件数目 </p>
<p>  <code>wc -l</code>输出文件行数，也就是文件的个数</p>
<p>  可以通过 <code>grep</code> 过滤文件</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@** _posts]# ls -l</div><div class="line">total 156</div><div class="line">-rw-r--r-- 1 root root 13607 Aug 26 14:07 android-interview.md</div><div class="line">-rw-r--r-- 1 root root 16287 Aug 26 14:07 arrays-sort.md</div><div class="line">-rw-r--r-- 1 root root  2951 Aug 30 12:03 common-tools.md</div><div class="line">[root@** _posts]# ls | wc -l</div><div class="line">3</div><div class="line">[root@** _posts]# ls | grep &quot;.md&quot; | wc -l</div><div class="line">3</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h2><ul>
<li><code>locate</code><br> locate 是基于内部系统表的, 速度快, 但是可能更新不即时</li>
<li><code>find . -name &quot;*.sh&quot; -or -name &quot;*.c&quot;</code><br>  find 即时查找, 速度相对较慢</li>
</ul>
<h2 id="端口占用情况"><a href="#端口占用情况" class="headerlink" title="端口占用情况"></a>端口占用情况</h2><ul>
<li><code>netstat -tnpl | grep 12</code></li>
<li><code>kill -9 42312</code> 杀掉进程，-9 表示强制杀</li>
</ul>
<h2 id="sed-使用"><a href="#sed-使用" class="headerlink" title="sed 使用"></a>sed 使用</h2><ul>
<li><code>sed &#39;$d&#39; datafile</code> 除最后一行，其余行都被显示</li>
<li><code>sed &#39;/my/d&#39; datafile</code> 除包含 my 的行，其余行都被显示<br>  这两个命令并不会真的删除文本里的某些行</li>
<li><code>sed -e &#39;s/\.md$//&#39;</code>去掉后缀 <code>.md</code></li>
<li><code>sed -e &#39;s/^/http:\/\/www.alijava.com\//&#39;</code>加上网站前缀</li>
<li><code>sed &#39;s/old/new/&#39;</code> 将 <code>old</code> 替换为<code>new</code></li>
</ul>
<h1 id="shell-常见用法"><a href="#shell-常见用法" class="headerlink" title="shell 常见用法"></a>shell 常见用法</h1><p><code>$#</code> 表示接收到的参数个数<br><code>$1</code> 表示第几个参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">if [ $# -ne 4 ]</div><div class="line">then</div><div class="line">	echo &quot;usage: bash autofetch.sh &lt;space&gt; &lt;windows/linux&gt; &lt;command&gt; &lt;number&gt;&quot;</div><div class="line">	exit -1</div><div class="line">fi</div><div class="line">which=$1</div><div class="line">if [ $2 = &quot;windows&quot; ]</div><div class="line">then</div><div class="line">	machine=WINDOWS</div><div class="line">elif [ $2 = &quot;linux&quot; ]</div><div class="line">then</div><div class="line">	machine=LINUX</div><div class="line">fi</div></pre></td></tr></table></figure>
<h1 id="vim-常用命令"><a href="#vim-常用命令" class="headerlink" title="vim 常用命令"></a>vim 常用命令</h1><h2 id="方向移动"><a href="#方向移动" class="headerlink" title="方向移动"></a>方向移动</h2><ul>
<li><p><code>h, j, k, l</code> 分别代表向左、下、上、右移动</p>
<p>  在这些j前加一个数字，表示移动的倍数。例如，”10j“表示向下移动10行</p>
</li>
<li><p><code>^</code> 移动光标到行首 0(数字0)也可以实现相同功能<br>  ^ 是移到第一个到行首的第一个非空白字符<br>  0 只是移动到行首，不区分空白或非空白</p>
</li>
<li><p><code>$</code> 移动光标到行尾</p>
</li>
<li><p><code>gg</code> 回到文件开头 <code>H</code> 也可以回到文件最上面</p>
</li>
<li><code>G</code> 到最下面</li>
</ul>
<h2 id="复制粘贴"><a href="#复制粘贴" class="headerlink" title="复制粘贴"></a>复制粘贴</h2><ul>
<li><code>dd</code>  删除，前面加上数字表示删除多少行，比如100dd</li>
<li><code>dw</code> 删除单词 </li>
<li><code>d$</code> 删除到这行末尾的单词</li>
<li><code>yy</code>  复制</li>
<li><code>p</code>   粘贴<br> 它们都可以加上数字参数表示操作多少行</li>
</ul>
<h2 id="输入文字"><a href="#输入文字" class="headerlink" title="输入文字"></a>输入文字</h2><ul>
<li><code>i</code> 当前文字位置插入 insert</li>
<li><code>a</code> 当前文字的后面插入 append</li>
<li><code>o</code> 下一行插入</li>
<li><code>w</code> 光标到下一个单词的词首</li>
<li><code>e</code> 移动光标到下一个单词的结尾</li>
</ul>
<h2 id="查找替换"><a href="#查找替换" class="headerlink" title="查找替换"></a>查找替换</h2><ul>
<li><code>/string</code> 查找 </li>
<li><code>n</code> 查找下一个匹配的</li>
<li><code>:set nu</code> 显示行号</li>
</ul>
<h2 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h2><ul>
<li><code>:wq</code> 写入并退出</li>
<li><code>:q!</code> 强制退出 不保存修改</li>
</ul>
<h2 id="在线学习"><a href="#在线学习" class="headerlink" title="在线学习"></a>在线学习</h2><p>推荐一个在线学习vim网站 <a href="http://www.atool.org/vim.php" target="_blank" rel="external">http://www.atool.org/vim.php</a></p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="http://easwy.com/blog/archives/advanced-vim-skills-basic-move-method/" target="_blank" rel="external">http://easwy.com/blog/archives/advanced-vim-skills-basic-move-method/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/30/linux-basics/" data-id="ciyyds55z000pbuxbpm3w16km" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-qiniu-fetch" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/30/qiniu-fetch/" class="article-date">
  <time datetime="2016-08-30T09:57:50.000Z" itemprop="datePublished">2016-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/30/qiniu-fetch/">Java抓取网络图片上传七牛云全纪录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>项目想把图片上传到七牛云存储上，笔者把七牛最简单的用法示范一下，方便初学者。</p>
<p>如果您还没有注册七牛，可以通过我的邀请链接注册 <a href="https://portal.qiniu.com/signup?code=3lpzf1unpyr0y" target="_blank" rel="external">https://portal.qiniu.com/signup?code=3lpzf1unpyr0y</a>，可以享受特有优惠以及免费空间。</p>
<p><img src="http://img.blog.csdn.net/20160119111734404" alt="http://www.alijava.com/qiniu-fetch/"></p>
<p>比如上面的 beautiful girl 图片的 url 是<br><a href="http://img.blog.csdn.net/20160119111734404" target="_blank" rel="external">http://img.blog.csdn.net/20160119111734404</a></p>
<p>我们最终用代码上传到七牛图床后，七牛云存储的 url 为<br><a href="http://7xq7ik.com1.z0.glb.clouddn.com/testimage" target="_blank" rel="external">http://7xq7ik.com1.z0.glb.clouddn.com/testimage</a></p>
<p>本文地址 <a href="http://www.alijava.com/qiniu-fetch/" target="_blank" rel="external">http://www.alijava.com/qiniu-fetch/</a> 转载请注明出处</p>
<h1 id="使用七牛"><a href="#使用七牛" class="headerlink" title="使用七牛"></a>使用七牛</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li><p>注册一个七牛账户<br>网址 <a href="https://portal.qiniu.com/signup?code=3lpzf1unpyr0y" target="_blank" rel="external">https://portal.qiniu.com/signup?code=3lpzf1unpyr0y</a></p>
</li>
<li><p>登录七牛开发者自助平台，查看 Access Key 和 Secret Key （这两个 Key 代码会用到）</p>
<p><img src="http://img.blog.csdn.net/20160118094058279" alt="http://www.alijava.com/qiniu-fetch/"></p>
</li>
</ol>
<h2 id="下载七牛依赖-jar-包"><a href="#下载七牛依赖-jar-包" class="headerlink" title="下载七牛依赖 jar 包"></a>下载七牛依赖 jar 包</h2><ul>
<li>可以用包管理器 gradle 下载（查看这篇文章 <a href="http://blog.csdn.net/never_cxb/article/details/50539040" target="_blank" rel="external">《Eclipse 使用 Gradle 下载 Jar 包全纪录》</a>）</li>
<li>或者手动下载依赖包 qiniu-java-sdk-7 依赖包， Google Gson 、 okhttp， okhttp 依赖 okio。</li>
</ul>
<h2 id="新建空间"><a href="#新建空间" class="headerlink" title="新建空间"></a>新建空间</h2><p>图片会上传到某个空间里，代码里会用到空间名，本项目空间名为 <code>seenews</code>。</p>
<p><img src="http://img.blog.csdn.net/20160119112859756" alt="http://www.alijava.com/qiniu-fetch/"></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="抓取图片"><a href="#抓取图片" class="headerlink" title="抓取图片"></a>抓取图片</h2><p>我们的项目需求是抓取网络图片：</p>
<p>输入图片<strong>原始的的 url</strong>，然后利用代码抓取到七牛图床上，返回图片在<strong>七牛上的 url</strong> 。</p>
<p>首先定义变量存放你的 Key 和空间名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public static final String ACCESS_KEY = &quot;******&quot;; // 你的access_key</div><div class="line">public static final String SECRET_KEY = &quot;******&quot;; // 你的secret_key</div><div class="line">public static final String BUCKET_NAME = &quot;******&quot;; // 你的secret_key</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//获取到 Access Key 和 Secret Key 之后，您可以按照如下方式进行密钥配置</div><div class="line">Auth auth = Auth.create(ACCESS_KEY, SECRET_KEY);</div><div class="line"></div><div class="line">//获取空间管理器</div><div class="line">BucketManager bucketManager = new BucketManager(auth);</div><div class="line">try &#123;</div><div class="line"></div><div class="line">	// 要求url可公网正常访问BucketManager.fetch(url, bucketName, key);</div><div class="line">	// @param url 网络上一个资源文件的URL</div><div class="line">	// @param bucketName 空间名称</div><div class="line">	// @param key 空间内文件的key[唯一的]</div><div class="line">	DefaultPutRet putret = bucketManager.fetch(originalUrl, BUCKET_NAME, &quot;testimage&quot;);</div><div class="line"></div><div class="line">	System.out.println(putret.key);</div><div class="line">	System.out.println(&quot;succeed upload image&quot;);</div><div class="line">&#125; catch (QiniuException e1) &#123;</div><div class="line">	e1.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码思路很简单，根据 key 获取到空间管理器，再指定图片的原始 url、空间名、图片的 key，就可以把图片上传到七牛上了</p>
<p>在七牛的空间内容管理部分可以看到图片已经上传好了，新的 url 为 <a href="http://7xq7ik.com1.z0.glb.clouddn.com/testimage" target="_blank" rel="external">http://7xq7ik.com1.z0.glb.clouddn.com/testimage</a></p>
<p><img src="http://img.blog.csdn.net/20160119114539174" alt="http://www.alijava.com/qiniu-fetch/"></p>
<p>那么问题来了，如何获取图片新的 url 呢？总不能每次都通过浏览器访问七牛的网站，如何在代码里获取我们图片在七牛上的 url 呢？</p>
<h2 id="域名-key-获取新的-url"><a href="#域名-key-获取新的-url" class="headerlink" title="域名+key 获取新的 url"></a>域名+key 获取新的 url</h2><p>还记得刚才的代码里我们给图片指定了 key 吗，只是图片在七牛空间里的唯一表示。</p>
<p>刚才我们指定的 key 为<code>testimage</code>，看新的图片 url 为<code>http://7xq7ik.com1.z0.glb.clouddn.com/testimage</code>，新url就是刚才的 key 结尾的。</p>
<p>前面一大串的字符是七牛给我们的默认域名，你也可以自定义域名。</p>
<p><img src="http://img.blog.csdn.net/20160119115059978" alt="http://www.alijava.com/qiniu-fetch/"></p>
<p>那么代码思路也很简单，定义一个变量存放空间的域名，然后域名拼接图片的 key 就得到图片上传后的 url。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">private static final String BUCKET_HOST_NAME = &quot;7xq7ik.com1.z0.glb.clouddn.com&quot;;  </div><div class="line">public String uploadByUrl(String originalUrl) &#123;</div><div class="line">		//...</div><div class="line">		String imageKey = &quot;testimage&quot;;</div><div class="line">		DefaultPutRet putret = bucketManager.fetch(originalUrl, BUCKET_NAME, imageKey);</div><div class="line">		newUrl = BUCKET_HOST_NAME + &quot;/&quot; + imageKey;</div><div class="line">		System.out.println(newUrl);</div><div class="line">		System.out.println(&quot;succeed upload image&quot;);</div><div class="line">	&#125; catch (QiniuException e1) &#123;</div><div class="line">		e1.printStackTrace();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">7xq7ik.com1.z0.glb.clouddn.com/testimage</div><div class="line">succeed upload image</div></pre></td></tr></table></figure>
<h2 id="邀请注册"><a href="#邀请注册" class="headerlink" title="邀请注册"></a>邀请注册</h2><p>如果您还没有注册七牛，可以通过我的邀请链接注册 <a href="https://portal.qiniu.com/signup?code=3lpzf1unpyr0y" target="_blank" rel="external">https://portal.qiniu.com/signup?code=3lpzf1unpyr0y</a>，体验用户有一些免费空间。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="http://iamyida.iteye.com/blog/2262613" target="_blank" rel="external">七牛操作工具类(Java版)</a></p>
<p><a href="http://blog.csdn.net/netdxy/article/details/50222631" target="_blank" rel="external">七牛关于JAVA SDK的各种Demo</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/30/qiniu-fetch/" data-id="ciyyds565000zbuxbmetk46ik" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/七牛/">七牛</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-random-image" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/30/random-image/" class="article-date">
  <time datetime="2016-08-30T04:21:01.000Z" itemprop="datePublished">2016-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/30/random-image/">Java 基于七牛云实现随机图库 API</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>项目源代码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>
<p>本文链接 <a href="http://www.alijava.com/random-image/" target="_blank" rel="external">http://www.alijava.com/random-image/</a> 转载请注明出处</p>
<p>在实现APP 过程中，有些文章没有图片，想随机获取一张图片作为封面。</p>
<p>网上找到一个 API，访问 <a href="https://unsplash.it/300/200/?random" target="_blank" rel="external">https://unsplash.it/300/200/?random</a> 可以获取一张随机产生的图片。</p>
<p>后面笔者为了方便国内网络访问，把图片转移到了七牛云，共享给大家。</p>
<h1 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h1><p>把图片的 src 设为 <a href="https://unsplash.it/300/200/?random" target="_blank" rel="external">https://unsplash.it/300/200/?random</a> ，图片是随机的了，但是两张随机图片是一模一样的，参加下面的代码和效果图。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;img src=&quot;https://unsplash.it/300/200/?random&quot; alt=&quot;blog.csdn.net/never_cxb&quot; title=&quot;&quot;&gt;</div><div class="line"></div><div class="line">&lt;img src=&quot;https://unsplash.it/300/200/?random&quot; alt=&quot;blog.csdn.net/never_cxb&quot; title=&quot;&quot;&gt;</div></pre></td></tr></table></figure>
<p>你可以刷新本博客文章，两张图会随机变化，但是两张图依然保持一样。</p>
<blockquote>
<p>不知道这是不是和浏览器缓存有关系，请大神赐教。</p>
</blockquote>
<p> <img src="https://unsplash.it/300/200/?random" alt="blog.csdn.net/never_cxb"></p>
<p><img src="https://unsplash.it/300/200/?random" alt="blog.csdn.net/never_cxb"></p>
<h1 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h1><p>该网站也提供了根据 id 来获取图片，使用方法在 url 后面加上 <code>?image</code>参数。</p>
<p><a href="https://unsplash.it/200/200?image=100" target="_blank" rel="external">https://unsplash.it/200/200?image=100</a> 的图片内容为：</p>
<p><img src="https://unsplash.it/200/200?image=100" alt="blog.csdn.net/never_cxb"></p>
<p>笔者使用下面的代码来随机产生 id，从而获取随机图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Random randrom = new Random(47);</div><div class="line">String url = &quot;https://unsplash.it/640/427/?image=&quot; +randrom.nextInt(1000);</div></pre></td></tr></table></figure>
<p>但是测试发现，一小部分id对应的图片不存在，比如 <a href="https://unsplash.it/200/300?image=86" target="_blank" rel="external">https://unsplash.it/200/300?image=86</a>   、 <a href="https://unsplash.it/200/300?image=105" target="_blank" rel="external">https://unsplash.it/200/300?image=105</a>  等等。</p>
<h1 id="抓取图片"><a href="#抓取图片" class="headerlink" title="抓取图片"></a>抓取图片</h1><p>笔者把该 API 提供的图片抓取到了七牛云上，<strong>保证图片的 id 是连续的</strong>。</p>
<p>可以通过我的邀请链接 <a href="https://portal.qiniu.com/signup?code=3lpzf1unpyr0y" target="_blank" rel="external">https://portal.qiniu.com/signup?code=3lpzf1unpyr0y</a> 注册七牛，享受优惠及免费空间。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">public class UploadRandomImage &#123;</div><div class="line"></div><div class="line">	private static final String RANDOM_URL = &quot;https://unsplash.it/640/427/?image=&quot;;</div><div class="line">	private static final String ACCESS_KEY = &quot;*****&quot;; // 你的access_key</div><div class="line">	private static final String SECRET_KEY = &quot;*****&quot;; // 你的secret_key</div><div class="line">	private static final String BUCKET_NAME = &quot;*****&quot;; // 你的空间名称</div><div class="line"></div><div class="line">	public static void main(String[] args) throws InterruptedException, IOException &#123;</div><div class="line">		Auth auth = Auth.create(ACCESS_KEY, SECRET_KEY);</div><div class="line">		// 获取空间管理</div><div class="line">		BucketManager bucketManager = new BucketManager(auth);</div><div class="line"></div><div class="line">		int key = 0;</div><div class="line">		for (int i = 0; i &lt; 1025; i++) &#123;</div><div class="line">			// 如果 i 对应的图片存在，上传七牛</div><div class="line">			if (exists(i)) &#123;</div><div class="line">				bucketManager.fetch(RANDOM_URL + i, BUCKET_NAME, key + &quot;&quot;);</div><div class="line">				// 只有上传了七牛，key 才+1，保证七牛的 key 连续</div><div class="line">				key++;</div><div class="line">				// sleep一段时间，免得对网站负载过大</div><div class="line">				Thread.sleep(1000 * 10 + new Random().nextInt(1000 * 10));</div><div class="line">			&#125; else &#123;</div><div class="line">				System.out.println(i + &quot;不存在&quot;);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		System.out.println(key + &quot;最终图片数目&quot;);</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 判断地址对于的图片是否存在</div><div class="line">	 * @param id</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public static boolean exists(int id) &#123;</div><div class="line">		try &#123;</div><div class="line">			HttpURLConnection.setFollowRedirects(false);</div><div class="line">			HttpURLConnection con = (HttpURLConnection) new URL(RANDOM_URL + id).openConnection();</div><div class="line">			con.setRequestMethod(&quot;HEAD&quot;);</div><div class="line">			return (con.getResponseCode() == HttpURLConnection.HTTP_OK);</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>可以访问 <a href="http://7xr4g8.com1.z0.glb.clouddn.com/671" target="_blank" rel="external">http://7xr4g8.com1.z0.glb.clouddn.com/671</a> 获取图片，后面数字671是图片编号 </p>
<p><img src="http://7xr4g8.com1.z0.glb.clouddn.com/671" alt="blog.csdn.net/never_cxb"></p>
<p>目前有效图标编号的是 0 到 964，可以通过随机产生 id 来获取随机图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Random randrom = new Random(47);</div><div class="line">String url = &quot;http://7xr4g8.com1.z0.glb.clouddn.com/&quot; +randrom.nextInt(964+1);</div></pre></td></tr></table></figure>
<p>项目源代码地址（欢迎star） <a href="https://github.com/studychen/SeeNewsV2" target="_blank" rel="external">https://github.com/studychen/SeeNewsV2</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/30/random-image/" data-id="ciyyds5690012buxbm0a3ci25" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-continuous-ports" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/30/continuous-ports/" class="article-date">
  <time datetime="2016-08-30T03:32:30.000Z" itemprop="datePublished">2016-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/30/continuous-ports/">Python 找出多个连续的空闲端口</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="项目需求"><a href="#项目需求" class="headerlink" title="项目需求"></a>项目需求</h1><p>代码检测某个端口是否被占用，从而找出多个连续空闲的端口，由于需要 Windows、Linux 都能运行，所以选择了 Python，而不是 shell。</p>
<h1 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h1><h2 id="Python-的-socket-模块"><a href="#Python-的-socket-模块" class="headerlink" title="Python 的 socket 模块"></a>Python 的 socket 模块</h2><p>思路是 try 尝试连接某个端口，如果能连接上，表示端口被占用，否则端口空闲。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">def isInuse(ipList, port):</div><div class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">    flag=True</div><div class="line">    for ip in ipList:</div><div class="line">        try:</div><div class="line">            s.connect((ip, int(port)))</div><div class="line">            s.shutdown(2)</div><div class="line">            print &apos;%d is inuse&apos; % port</div><div class="line">            flag=True</div><div class="line">            break</div><div class="line">        except:</div><div class="line">            print &apos;%d is free&apos; % port</div><div class="line">            flag=False</div><div class="line">    return flag</div></pre></td></tr></table></figure>
<p>在<code>try</code> 模块中 如果 <code>s.connect((ip, int(port)))</code> 如果能成功, 说明端口被占用. </p>
<p>否则, <code>connect</code> 不成功, 会进到<code>except</code> 中, 说明端口不被占用.</p>
<h2 id="存在问题"><a href="#存在问题" class="headerlink" title="存在问题"></a>存在问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">netstat -tnpl</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name           </div><div class="line">tcp        0      0 0.0.0.0:8080                0.0.0.0:*                   LISTEN      11563/java                      </div><div class="line">tcp        0      0 127.0.0.1:8005              0.0.0.0:*                   LISTEN      11563/java</div></pre></td></tr></table></figure>
<p>源 ip 、源端口 + 目的 ip、目的端口 可以确定一条 tcp 连接。</p>
<p>本来以为 <code>s.connect((ip, int(port)))</code> ，只需要检测 <code>&quot;127.0.0.1&quot;,&quot;0.0.0.0&quot;</code> </p>
<p>后来发现还有可能是局域网ip 如 <code>10.170.70.87</code> 等等</p>
<p>可以通过这个方法根据远程 hostname 获得其 ip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def getLocalIp():</div><div class="line">    localIP = socket.gethostbyname(socket.gethostname())</div><div class="line">    return localIP</div></pre></td></tr></table></figure>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>从某个端口 port 开始，进行检测，port + 1、port + 2 … ，如果连续的空闲端口数目达到需求的 N，则 port ~ port + N 为需求的端口。</p>
<p>如果中途某个 port + L 端口被占用，那么从新的端口 port + L + 1 开始寻找。</p>
<p>本代码只针对 <code>ipList = (&quot;127.0.0.1&quot;,&quot;0.0.0.0&quot;,getLocalIp())</code> 这3个 ip 进行 <code>connect</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">import sys</div><div class="line">import os</div><div class="line">import socket</div><div class="line"></div><div class="line"></div><div class="line">def isInuse(ipList, port):</div><div class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">    flag=True</div><div class="line">    for ip in ipList:</div><div class="line">        try:</div><div class="line">            s.connect((ip, int(port)))</div><div class="line">            s.shutdown(2)</div><div class="line">            print &apos;%d is inuse&apos; % port</div><div class="line">            flag=True</div><div class="line">            break</div><div class="line">        except:</div><div class="line">            print &apos;%d is free&apos; % port</div><div class="line">            flag=False</div><div class="line">    return flag</div><div class="line"></div><div class="line"></div><div class="line">def getLocalIp():</div><div class="line">    localIP = socket.gethostbyname(socket.gethostname())</div><div class="line">    return localIP</div><div class="line"></div><div class="line">def checkNinePort(startPort):</div><div class="line">    flag = True</div><div class="line">    ipList = (&quot;127.0.0.1&quot;,&quot;0.0.0.0&quot;,getLocalIp())</div><div class="line">    for i in range(1, 10):</div><div class="line">        if (isInuse(ipList, startPort)):</div><div class="line">            flag = False</div><div class="line">            break</div><div class="line">        else:</div><div class="line">            startPort = startPort + 1</div><div class="line">    return flag, startPort</div><div class="line"></div><div class="line"></div><div class="line">def findPort(startPort):</div><div class="line">    while True:</div><div class="line">        flag, endPort = checkNinePort(startPort)</div><div class="line">        if (flag == True):  #ninePort is ok</div><div class="line">            break</div><div class="line">        else:</div><div class="line">            startPort = endPort + 1</div><div class="line">    return startPort</div><div class="line"></div><div class="line"></div><div class="line">def main():</div><div class="line">    startPort=51988</div><div class="line">    # startPort = int(sys.argv[1])</div><div class="line">    print findPort(startPort)</div><div class="line"></div><div class="line">main()</div></pre></td></tr></table></figure>
<h1 id="字符串匹配"><a href="#字符串匹配" class="headerlink" title="字符串匹配"></a>字符串匹配</h1><p>第一种方法的准确性依赖于 <code>connect((ip, int(port)))</code> 中的 ip，</p>
<p>需要找到完备的 ip 集合的， 才可以确定这个端口不被占用，难度较大</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>**在 linux 用 <code>netstat -tnpl</code> 可以得到端口监听信息, </p>
<p>观察 <code>tcp        0      0 0.0.0.0:8080                0.0.0.0:*                   LISTEN      11563/java</code></p>
<p>出现了 <code>0 0.0.0.0:8080</code> 所以 8080端口是被占用的</p>
<hr>
<p>对这些输出的字符信息进行搜索 <code>:8080</code>, 如果存在, 就表示 8080 端口是<strong>LISTEN</strong>.</p>
<p>如果输出结果中不存在 <code>:8080</code> 的相关字符，表示这个端口不被占用.</p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><p>WINDOWS、 LINUX 这几个平台查看端口信息的方式不同,</p>
<p>先进行机器平台的判断，然后调用各个平台的端口占用判断函数</p>
<p>因为需求是找出连续的空闲端口，当中途只要有一个端口占用, 就跳出循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">import platform</div><div class="line">import sys</div><div class="line"></div><div class="line"></div><div class="line">def isInuseWindow(port):</div><div class="line">    if os.popen(&apos;netstat -an | findstr :&apos; + str(port)).readlines():</div><div class="line">        portIsUse = True</div><div class="line">        print &apos;%d is inuse&apos; % port</div><div class="line">    else:</div><div class="line">        portIsUse = False</div><div class="line">        print &apos;%d is free&apos; % port</div><div class="line">    return portIsUse</div><div class="line"></div><div class="line">def isInuseLinux(port):</div><div class="line">    #lsof -i:8080</div><div class="line">    #not show pid to avoid complex</div><div class="line">    if os.popen(&apos;netstat -na | grep :&apos; + str(port)).readlines():</div><div class="line">        portIsUse = True</div><div class="line">        print &apos;%d is inuse&apos; % port</div><div class="line">    else:</div><div class="line">        portIsUse = False</div><div class="line">        print &apos;%d is free&apos; % port</div><div class="line">    return portIsUse</div><div class="line"></div><div class="line">def choosePlatform():</div><div class="line">    #&apos;Windows-7-6.1.7601-SP1&apos;</div><div class="line">    #&apos;linux-2.6.32-431.23.3.el6.x86_64-x86_64-with-centos-6.5-final&apos;</div><div class="line">    machine = platform.platform().lower()</div><div class="line">    if &apos;windows-&apos; in machine:</div><div class="line">        return isInuseWindow</div><div class="line">    elif &apos;linux-&apos; in machine:</div><div class="line">        return isInuseLinux</div><div class="line">    else:</div><div class="line">        print &apos;Error, sorry, platform is unknown&apos;</div><div class="line">        exit(-1)</div><div class="line"></div><div class="line">def checkNinePort(startPort):</div><div class="line">    isInuseFun = choosePlatform()</div><div class="line">    nineIsFree = True</div><div class="line">    for i in range(1, 10):</div><div class="line">        if (isInuseFun(startPort)):</div><div class="line">            nineIsFree = False</div><div class="line">            break</div><div class="line">        else:</div><div class="line">            startPort = startPort + 1</div><div class="line">    return nineIsFree, startPort</div><div class="line"></div><div class="line"></div><div class="line">def findPort(startPort):</div><div class="line">    while True:</div><div class="line">        flag, endPort = checkNinePort(startPort)</div><div class="line">        if (flag == True):  # ninePort is ok</div><div class="line">            break</div><div class="line">        else:</div><div class="line">            startPort = endPort + 1</div><div class="line">    return startPort</div><div class="line"></div><div class="line"></div><div class="line">def main(startPort):</div><div class="line">    firstPort=findPort(startPort)</div><div class="line">    print &apos;First port of nine free ports is &apos;, firstPort</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos; :</div><div class="line">    if len(sys.argv) &gt; 1:</div><div class="line">        print len(sys.argv)</div><div class="line">        startPort = int(sys.argv[1])</div><div class="line">    else:</div><div class="line">        startPort = 500</div><div class="line">    main(startPort)</div></pre></td></tr></table></figure>
<h1 id="相关知识点总结"><a href="#相关知识点总结" class="headerlink" title="相关知识点总结"></a>相关知识点总结</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.popen()</div></pre></td></tr></table></figure>
<p>可以调用系统的一些shell命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.popen().readlines()</div></pre></td></tr></table></figure>
<p>读取调用shell命令后的回显信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> netstat -tnpl </div><div class="line"></div><div class="line">-tnpl 各个参数的含义</div><div class="line">-l或--listening   显示监控中的服务器的Socket。</div><div class="line">-n或--numeric   直接使用IP地址，而不通过域名服务器。</div><div class="line">-p或--programs   显示正在使用Socket的程序识别码和程序名称。</div><div class="line">-t或--tcp   显示TCP传输协议的连线状况</div><div class="line"></div><div class="line"></div><div class="line">tcp        0      0 0.0.0.0:80                  0.0.0.0:*                   LISTEN      9890/nginx   </div><div class="line">最后的9890/nginx   表示 进程号 9890 进程名 nginx</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/30/continuous-ports/" data-id="ciyyds55e0008buxba4b2zc7f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-common-tools" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/29/common-tools/" class="article-date">
  <time datetime="2016-08-29T14:24:31.000Z" itemprop="datePublished">2016-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/29/common-tools/">程序员开发过程中值得推荐的常用工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>工欲善其事，必先利其器。下面总结了这些年开发中使用的一些还不错的小工具，希望能够提高编码效率</p>
<p>本文链接 <a href="http://www.alijava.com/common-tools/" target="_blank" rel="external">http://www.alijava.com/common-tools/</a> 转载请注明出处</p>
<h1 id="办公常用"><a href="#办公常用" class="headerlink" title="办公常用"></a>办公常用</h1><h2 id="7-zip"><a href="#7-zip" class="headerlink" title="7 zip"></a>7 zip</h2><p>优点在于开源、无广告、免费，缺点界面有点丑</p>
<h2 id="在线流程图"><a href="#在线流程图" class="headerlink" title="在线流程图"></a>在线流程图</h2><p>可以通过这个网站 <a href="https://www.processon.com/" target="_blank" rel="external">https://www.processon.com/</a> 在线制作流程图</p>
<p>当然 visio 更加专业了，可惜收费</p>
<h1 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h1><h2 id="在线-Markdown"><a href="#在线-Markdown" class="headerlink" title="在线 Markdown"></a>在线 Markdown</h2><p><a href="https://stackedit.io/editor" target="_blank" rel="external">https://stackedit.io/editor</a></p>
<p>支持实时预览，自带实时保存效果，不小心关了这个网页，重新打开后会恢复上次内容</p>
<h2 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h2><p>微软出的一款编辑器，很轻量，没有繁琐的功能，界面酷炫，黑色背景，支持 markdown实时预览</p>
<p>下载地址 <a href="https://code.visualstudio.com/download" target="_blank" rel="external">https://code.visualstudio.com/download</a></p>
<h2 id="Gitbook-Editor"><a href="#Gitbook-Editor" class="headerlink" title="Gitbook Editor"></a>Gitbook Editor</h2><p>主要是为 Gitbook 服务，可以生成章节、目录，还可以利用 git 进行版本控制，对于团队发布整理 wiki 很有帮助，也可以用它基于 markdown 编写文档</p>
<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h2><p>chrome 扩展，可以很方便输入数据模拟 get post 请求</p>
<h2 id="Fiddler"><a href="#Fiddler" class="headerlink" title="Fiddler"></a>Fiddler</h2><p>windows 下的抓包工具，它是在 web server 和 web 客户端 之间搭了一层 代理，所有的请求都会经过它</p>
<p>用过的很惊艳的功能如下：</p>
<ul>
<li>重定向 远程资源文件 到 本地文件，比如一个 js 文件址url <code>www.alijava.com/web/test.js</code>，当无法修改服务端 js 文件或者部署到服务端 js 文件麻烦时，可以在本地修改该文件，然后将 <code>www.alijava.com/web/test.js</code> 重定向到本地 <code>/usr/local/web/test_01.js</code></li>
<li>设置断点修改Request Response</li>
<li>过滤某些 url 请求、资源文件等</li>
</ul>
<h2 id="Charles"><a href="#Charles" class="headerlink" title="Charles"></a>Charles</h2><p>类似Fiddler，mac 下的抓包工具</p>
<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="PuTTY"><a href="#PuTTY" class="headerlink" title="PuTTY"></a>PuTTY</h2><p>终端远程连接 linux ，支持鼠标选中复制，右键粘贴</p>
<h2 id="MTPuTTY"><a href="#MTPuTTY" class="headerlink" title="MTPuTTY"></a>MTPuTTY</h2><p>有时候需要连接多个linux机器，使用putty接环不方便。mtputty把putty当作标签显示，切换方便很多，提高效率</p>
<h2 id="FileZilla"><a href="#FileZilla" class="headerlink" title="FileZilla"></a>FileZilla</h2><p>FTP客户端，图形用户界面(GUI)，方便 windows 连接 linux 机器传输文件，类似的软件还有很多</p>
<h2 id="WinSCP"><a href="#WinSCP" class="headerlink" title="WinSCP"></a>WinSCP</h2><p>同上，FTP客户端</p>
<h2 id="VPSMate"><a href="#VPSMate" class="headerlink" title="VPSMate"></a>VPSMate</h2><p>安装结束使用 <a href="http://ip:8888" target="_blank" rel="external">http://ip:8888</a> 来打开 vpsmate 的后台</p>
<p>可以通过浏览器网页端编辑文件、修改文件等，可视化操作</p>
<h2 id="AppNode"><a href="#AppNode" class="headerlink" title="AppNode"></a>AppNode</h2><p>上面的 vpsmate 停止更新了，现在有个升级版 AppNode</p>
<h1 id="协作"><a href="#协作" class="headerlink" title="协作"></a>协作</h1><h2 id="SourceTree"><a href="#SourceTree" class="headerlink" title="SourceTree"></a>SourceTree</h2><p>命令行使用 git 虽然很棒，而 SourceTree 提供了图形化，可以更方便查看提交记录log、对比文件的修改</p>
<blockquote>
<p>当 git 仓库 有主模块、子模块，注意 SourceTree 可能会分支漂移，当主模块切到某个分子，子模块可能并没有切到某个分支，这时候需要手动切下子模块。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/29/common-tools/" data-id="ciyyds5590005buxbn8201d0y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-string-intern" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/26/string-intern/" class="article-date">
  <time datetime="2016-08-26T08:09:40.000Z" itemprop="datePublished">2016-08-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/26/string-intern/">深入解析 Java 使用==或equals()比较字符串</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Java-字符串常量"><a href="#Java-字符串常量" class="headerlink" title="Java 字符串常量"></a>Java 字符串常量</h1><p>Java 字符串在面试、笔试中都是常考知识点，下面进行相关知识点讲解。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String strOne = <span class="string">"testString"</span>;</div><div class="line">String strTwo = <span class="string">"testString"</span>;</div><div class="line">System.out.println(strOne.equals(strTwo));</div><div class="line">System.out.println(strOne == strTwo);</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">true</div><div class="line">true</div><div class="line">*/</div></pre></td></tr></table></figure>
<h2 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h2><p>String的equals()是比较字符串的内容。故equals得到true很容易理解。</p>
<p> ==是比较内存地址的，第一个true说明strOne 和strTwo的地址相同。</p>
<p> 为什么呢？</p>
<p>java有常量池，存储所有的字符串常量。</p>
<p>String strOne = “testString”<br>java首先会在常量池查找是否有 “testString”这个常量，发现没有，于是创建一个 “testString”，然后将其赋给strOne。 </p>
<p>String strTwo= “String”;<br>java同样会在常量池中查找 “testString”，这次常量池中已经有strOne 创建的 “testString”，故不创建新的常量，将其地址赋给strTwo。</p>
<p>如此，strOne和strTwo便有了相同的地址。</p>
<h1 id="new建立String对象"><a href="#new建立String对象" class="headerlink" title="new建立String对象"></a>new建立String对象</h1><p>Java 字符串对象创建有两种形式：</p>
<ul>
<li>上文的字符串常量，如<code>String str = &quot;testString&quot;</code></li>
<li>使用用new这种标准的构造对象的方法，如<code>String str = new String(&quot;testString&quot;)</code></li>
</ul>
<h2 id="举例说明-1"><a href="#举例说明-1" class="headerlink" title="举例说明 1"></a>举例说明 1</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String strOne = <span class="string">"testString"</span>;</div><div class="line">String strThree = <span class="keyword">new</span> String(<span class="string">"testString"</span>);		   	</div><div class="line">System.out.println(strOne.equals(strThree));</div><div class="line">System.out.println(strOne==strThree);</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">true</div><div class="line">false</div><div class="line">*/</div></pre></td></tr></table></figure>
<h2 id="举例说明-2"><a href="#举例说明-2" class="headerlink" title="举例说明 2"></a>举例说明 2</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String strOne = <span class="keyword">new</span> String(<span class="string">"testString"</span>);</div><div class="line">String strThree = <span class="keyword">new</span> String(<span class="string">"testString"</span>);</div><div class="line">System.out.println(strOne.equals(strThree ));</div><div class="line">System.out.println(strOne==strThree);	</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">true</div><div class="line">false</div><div class="line">*/</div></pre></td></tr></table></figure>
<h2 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h2><p>而用new String(“testString”)创建的两个字符串，用equals()比较相等，用==比较则不相等。</p>
<p>为什么呢？</p>
<p>new String()每次会在堆中创建一个对象，每次创建的对象内存地址都不同，故==不相等。但字符串内容是相同的，故equals()相等。</p>
<h1 id="String-intern-方法"><a href="#String-intern-方法" class="headerlink" title="String intern() 方法"></a>String intern() 方法</h1><p>看下官方文档的说明，大致意思是：</p>
<p>如果常量池中存在当前字符串, 就会直接返回当前字符串. 如果常量池中没有此字符串, 会将此字符串放入常量池中后, 再返回。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">intern</span><span class="params">()</span></span></div><div class="line">Returns a canonical representation <span class="keyword">for</span> the string object.</div><div class="line">A pool of strings, initially empty, is maintained privately by the class String.</div><div class="line"></div><div class="line">When the intern method is invoked, <span class="keyword">if</span> the pool already contains a string equal to <span class="keyword">this</span> String object as determined by the <span class="title">equals</span><span class="params">(Object)</span> method, then the string from the pool is returned. Otherwise, <span class="keyword">this</span> String object is added to the pool and a reference to <span class="keyword">this</span> String object is returned.</div><div class="line"></div><div class="line">It follows that <span class="keyword">for</span> any two strings s and t, s.<span class="title">intern</span><span class="params">()</span> == t.intern() is <span class="keyword">true</span> <span class="keyword">if</span> and only <span class="keyword">if</span> s.equals(t) is <span class="keyword">true</span>.</div><div class="line"></div><div class="line">All literal strings and string-valued constant expressions are interned. String literals are defined in section <span class="number">3.10</span>.5 of the The Java™ Language Specification.</div><div class="line"></div><div class="line">Returns:</div><div class="line">a string that has the same contents as <span class="keyword">this</span> string, but is guaranteed to be from a pool of unique strings.</div></pre></td></tr></table></figure>
<h2 id="举例说明-1-1"><a href="#举例说明-1-1" class="headerlink" title="举例说明 1"></a>举例说明 1</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">String strOne = <span class="string">"testString"</span>;</div><div class="line">String strThree = <span class="keyword">new</span> String(<span class="string">"testString"</span>);		   	</div><div class="line">System.out.println(strOne==strThree.intern());</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">true</div><div class="line">*/</div></pre></td></tr></table></figure>
<p><code>String strOne = &quot;testString&quot;</code> 这行代码使得常量池中已经存在了<code>&quot;testString&quot;</code>，intern() 从字符串常量池中查询到当前字符串已经存在，返回常量池中的字符串</p>
<h2 id="举例说明-2-1"><a href="#举例说明-2-1" class="headerlink" title="举例说明 2"></a>举例说明 2</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">String strOne = <span class="keyword">new</span> String(<span class="string">"testString"</span>);</div><div class="line">String strThree = <span class="keyword">new</span> String(<span class="string">"testString"</span>);		   	</div><div class="line">System.out.println(strOne.intern()==strThree.intern());</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">true</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>如文档里所说 <code>s.intern() == t.intern() is true if and only if s.equals(t) is true</code> 。</p>
<p><code>strOne.intern()</code> 先查找常量池中是否存在当前字符串，发现不存在，于是会把字符串放入常量池中。<code>strThree.intern()</code>也先从常量池中查找，找到了刚才放入的字符串，所以两者相等。</p>
<h2 id="底层实现"><a href="#底层实现" class="headerlink" title="底层实现"></a>底层实现</h2><p>new 创建的String对象使用intern方法，intern方法，若不存在就会将当前字符串放入常量池中。</p>
<p>intern() 底层实现也是维护了一个hash表，保持字符串。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">oop StringTable::intern(Handle string_or_null, jchar* name,  </div><div class="line">                        <span class="keyword">int</span> len, TRAPS) &#123;  </div><div class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> hashValue = java_lang_String::hash_string(name, len);  </div><div class="line">  <span class="keyword">int</span> index = the_table()-&gt;hash_to_index(hashValue);  </div><div class="line">  oop <span class="built_in">string</span> = the_table()-&gt;lookup(index, name, len, hashValue);  </div><div class="line">  <span class="comment">// Found  </span></div><div class="line">  <span class="keyword">if</span> (<span class="built_in">string</span> != <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="built_in">string</span>;  </div><div class="line">  <span class="comment">// Otherwise, add to symbol to table  </span></div><div class="line">  <span class="keyword">return</span> the_table()-&gt;basic_add(index, string_or_null, name, len,  </div><div class="line">                                hashValue, CHECK_NULL);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>查看源码可知，intern() 是使用 jni 调用c++实现的StringTable的intern方法, StringTable的intern方法跟Java中的HashMap的实现是差不多的, 只是不能自动扩容。默认大小是1009。</p>
<blockquote>
<p>注意，数据量规模很大时，如果程序将很多字符串常量（类名、方法名、key值等）存入intern()的常量池，当池大小超过了默认值后，性能可能会急剧下降。</p>
</blockquote>
<h1 id="String-真的不可变么"><a href="#String-真的不可变么" class="headerlink" title="String 真的不可变么"></a>String 真的不可变么</h1><h2 id="不可继承"><a href="#不可继承" class="headerlink" title="不可继承"></a>不可继承</h2><p>源码可以看到 <code>public final class String</code>，所以 String 也不允许继承。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></div><div class="line">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> &#123;</div><div class="line">    <span class="comment">/** The value is used for character storage. */</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</div><div class="line"></div><div class="line">    <span class="comment">/** Cache the hash code for the string */</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes a newly created &#123;<span class="doctag">@code</span> String&#125; object so that it represents</div><div class="line">     * an empty character sequence.  Note that use of this constructor is</div><div class="line">     * unnecessary since Strings are immutable.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.value = <span class="string">""</span>.value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes a newly created &#123;<span class="doctag">@code</span> String&#125; object so that it represents</div><div class="line">     * the same sequence of characters as the argument; in other words, the</div><div class="line">     * newly created string is a copy of the argument string. Unless an</div><div class="line">     * explicit copy of &#123;<span class="doctag">@code</span> original&#125; is needed, use of this constructor is</div><div class="line">     * unnecessary since Strings are immutable.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  original</div><div class="line">     *         A &#123;<span class="doctag">@code</span> String&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(String original)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.value = original.value;</div><div class="line">        <span class="keyword">this</span>.hash = original.hash;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="不可改变"><a href="#不可改变" class="headerlink" title="不可改变"></a>不可改变</h2><p>如果对一个已有字符串进行修改，不会在原来内存地址上修改数据，而是重新指向一个新的对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">String x = <span class="string">"123456"</span>;</div><div class="line">x.substring(<span class="number">0</span>, <span class="number">3</span>);</div><div class="line">System.out.println(x);</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">123456</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>使用 substring 改变字符串，也是返回一个新的字符串，而不是原地修改。</p>
<h2 id="利用反射改变字符串"><a href="#利用反射改变字符串" class="headerlink" title="利用反射改变字符串"></a>利用反射改变字符串</h2><p>String 内部使用 <code>private final char value[];</code> 来保存值，而且也没有暴露关于value的引用。虽然数组<code>value</code>一旦赋值后，不允许修改，但是这仅仅是不能指向新的数组，数组的内容其实可以修改。</p>
<p>我们可以利用反射得到 value ，从而改变 value 的值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">String x = <span class="string">"123456"</span>;</div><div class="line">Field f = String.class.getDeclaredField(<span class="string">"value"</span>);</div><div class="line">f.setAccessible(<span class="keyword">true</span>);</div><div class="line">f.set(x, <span class="string">"helloworld"</span>.toCharArray()); </div><div class="line"><span class="comment">// 可以利用set改变value的值，final char value[] 不起作用？</span></div><div class="line">System.out.println(x);</div><div class="line"><span class="keyword">char</span>[] value = (<span class="keyword">char</span>[]) f.get(x);</div><div class="line"><span class="comment">// 得到value的引用，修改数据中的某个元素</span></div><div class="line">value[<span class="number">0</span>] = <span class="string">'H'</span>;</div><div class="line">value[<span class="number">1</span>] = <span class="string">'E'</span>;</div><div class="line">System.out.println(x);</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">helloworld</div><div class="line">HElloworld</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>看下面这段代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">String x = <span class="string">"123456"</span>;</div><div class="line">String y = <span class="string">"123456"</span>;</div><div class="line">Field f = String.class.getDeclaredField(<span class="string">"value"</span>);</div><div class="line">f.setAccessible(<span class="keyword">true</span>);</div><div class="line">f.set(x, <span class="string">"helloworld"</span>.toCharArray());</div><div class="line">System.out.println(x);</div><div class="line">System.out.println(y);</div><div class="line"><span class="keyword">char</span>[] value = (<span class="keyword">char</span>[]) f.get(x);</div><div class="line">value[<span class="number">0</span>] = <span class="string">'H'</span>;</div><div class="line">value[<span class="number">1</span>] = <span class="string">'E'</span>;</div><div class="line">System.out.println(x);</div><div class="line">System.out.println(y);</div><div class="line"></div><div class="line"><span class="comment">/** output 输出</span></div><div class="line">helloworld</div><div class="line">helloworld</div><div class="line">HElloworld</div><div class="line">HElloworld</div><div class="line">*/</div></pre></td></tr></table></figure>
<p><code>x</code> 和 <code>y</code> 本来都是<code>&quot;123456&quot;</code>，我们只利用反射改变了<code>x</code>的值，却发现<code>y</code>的值也跟着变了，因为这两者都是指向常量值中的字符串，所以修改一个，另外一个也变了。</p>
<blockquote>
<p>不推荐实际生产环境中使用反射改变字符串，违背String不可变行</p>
</blockquote>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><a href="http://tech.meituan.com/in_depth_understanding_string_intern.html" target="_blank" rel="external">深入解析String#intern</a></li>
<li><a href="https://www.zhihu.com/question/20618891" target="_blank" rel="external">如何理解 String 类型值的不可变？</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/26/string-intern/" data-id="ciyyds56k001ebuxbwbsxvnej" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/面试/">面试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-interview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/25/java-interview/" class="article-date">
  <time datetime="2016-08-25T12:47:14.000Z" itemprop="datePublished">2016-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/25/java-interview/">Java程序员的基本语法知识面试题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="软引用-VS-弱引用"><a href="#软引用-VS-弱引用" class="headerlink" title="软引用 VS 弱引用"></a>软引用 VS 弱引用</h2><ul>
<li><p>软引用 在内存不足时回收</p>
</li>
<li><p>弱引用 在垃圾回收时不管内存是否充足都回收</p>
</li>
</ul>
<h2 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别"></a>进程和线程的区别</h2><ol>
<li>一个程序至少一个进程，一个进程最少一个线程</li>
<li>进程间相互独立，同一个进程的各线程共享内存，某个进程内的线程在其他进程中不可见</li>
<li>操作系统中，一般把进程作为分配资源的基本单位，把线程作为独立运行和独立调度的基本单位</li>
</ol>
<h2 id="java-中-关键字-final-的理解"><a href="#java-中-关键字-final-的理解" class="headerlink" title="java 中 关键字 final 的理解"></a>java 中 关键字 final 的理解</h2><ol>
<li><strong>变量</strong>: 一旦初始化，变量值就不能修改</li>
<li><strong>方法</strong>: 该方法不能被子类重写 ( override )</li>
<li><strong>类</strong>: 该类不能派生子类<br> 比如 <code>public final class String extends Object</code></li>
</ol>
<h2 id="java-中-finally-关键字"><a href="#java-中-finally-关键字" class="headerlink" title="java 中 finally 关键字"></a>java 中 finally 关键字</h2><p>finally 常于 trt/catch 语句块配对使用，即使有异常抛出，也能确保某段代码一定能执行。</p>
<p>finally 常用于关闭流资源或者数据库连接等。</p>
<h2 id="overload-和-override-的区别"><a href="#overload-和-override-的区别" class="headerlink" title="overload 和 override 的区别"></a>overload 和 override 的区别</h2><ol>
<li><p>overload 重载，是指两个方法的<strong>名称</strong>相同，但参数类型或者个数不同，即方法的签名不同。注意：方法的返回值不能作为其签名</p>
</li>
<li><p>override 重写，是指某个方法与父类的方法拥有相同的名称和函数签名。比如实现某个接口，需要进行 override 其中的抽象方法</p>
</li>
</ol>
<h2 id="equal-和-hashCode-理解"><a href="#equal-和-hashCode-理解" class="headerlink" title="equal() 和 hashCode() 理解"></a>equal() 和 hashCode() 理解</h2><ul>
<li>equal() 相等，hashCode() 必定相同</li>
</ul>
<p>原因:</p>
<p> java按照hashCode来访问小内存块，所以hashCode必须相等。HashMap获取一个对象是比较key的hashCode相等和equal为true。HashMap比较对象时先通过hashcode缩小范围，然后再使用equal方法比较是否相等</p>
<ul>
<li>但是 hashCode() 相同，未必 equal() 相等</li>
</ul>
<p>原因:</p>
<p>比如对象 A 和 对象 B 有 id 和 name，hashCode 按照name 来计算，但是 equal 按照 id来进行比较. 可能出现 name 相同，id 不同的情况. (公司员工同名同姓的情况). 这时候 hashCode 相同，equal 不同 </p>
<h2 id="java-interface-接口-成员函数-可以是-private-吗"><a href="#java-interface-接口-成员函数-可以是-private-吗" class="headerlink" title="java interface 接口 成员函数 可以是 private 吗"></a>java interface 接口 成员函数 可以是 private 吗</h2><p>成员函数只有声明，没有方法体，自动都是 public 修饰的 (我们 code 时候 可以省去)，成员变量默认都是静态变量 static final。</p>
<h2 id="interface-和-抽象类"><a href="#interface-和-抽象类" class="headerlink" title="interface 和 抽象类"></a>interface 和 抽象类</h2><p>抽象类更相当于 is-a （是不是） 的关系 。接口是 has-a （有没有）的关系</p>
<p>比如抽象类 Bird 和 Plane 表示鸟、飞机，可以继承它们实现更具体的鸟（老鹰、麻雀等），更具体的飞机（直升机、战斗机）。</p>
<p>用 Fly 表示接口，一组抽象的飞行行为，不能设计为类，因此它只是一个行为特性，并不是对一类事物的抽象描述。此时可以将 飞行 设计为一个接口Fly，包含方法fly( )，然后Airplane和Bird分别根据自己的需要实现Fly这个接口。</p>
<h2 id="Collection和Collections的区别"><a href="#Collection和Collections的区别" class="headerlink" title="Collection和Collections的区别"></a>Collection和Collections的区别</h2><p>java.util.Collection 和 java.util.Collections</p>
<blockquote>
<p>Collection 是接口<br>The root interface in the collection hierarchy. A collection represents a group of objects，</p>
</blockquote>
<hr>
<blockquote>
<p>Collections 里面包含了一些 处理 集合的静态方法<br>This class consists exclusively of static methods that operate on or return collections. </p>
</blockquote>
<h2 id="HashSet，TreeSet-和-LinkedHashSet-的区别"><a href="#HashSet，TreeSet-和-LinkedHashSet-的区别" class="headerlink" title="HashSet，TreeSet 和 LinkedHashSet 的区别"></a>HashSet，TreeSet 和 LinkedHashSet 的区别</h2><ul>
<li><p>HashSet无序</p>
</li>
<li><p>LinkedHashSet 按照 插入顺序 排序，使用链表维护元素的次序。</p>
</li>
<li>TreeSet是SortedSet接口的唯一实现类，有序，TreeSet支持两种排序方式，自然排序 或者 定制排序</li>
</ul>
<h2 id="Comparable-Comparator-区别"><a href="#Comparable-Comparator-区别" class="headerlink" title="Comparable Comparator 区别"></a>Comparable Comparator 区别</h2><p>java.lang.Comparable 和 java.util.Comparator</p>
<p>从英文名字也可以看出，Comparable是一种 able，表示该对象可以比较，是 对象自身的属性，其中要Override的方法 compareTo，compareTo 是 同种对象 之间 比较。</p>
<p>Comparator是一个名词，如果一个对象没有实现 Comparable 时，就要外部实现 一个 单独的 Comparator 接口，传递给 sort 方法，其中要Override的方法 是 compare，compare 像是 外部 对两个对象比较。</p>
<p>sort(Object[])，所有对象都必须实现Comparable接口，它用来确定对象之间的大小关系 。</p>
<p>sort(Object[]，Comparator) 对象不必实现Comparable接口，各个对象根据 Comparator 确定大小关系。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/25/java-interview/" data-id="ciyyds55p000gbuxbn129n03u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MaterialDesign/">MaterialDesign</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/七牛/">七牛</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/命令行/">命令行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 18px;">Android</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MaterialDesign/" style="font-size: 10px;">MaterialDesign</a> <a href="/tags/Python/" style="font-size: 12px;">Python</a> <a href="/tags/七牛/" style="font-size: 10px;">七牛</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/工具/" style="font-size: 14px;">工具</a> <a href="/tags/排序/" style="font-size: 10px;">排序</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/面试/" style="font-size: 16px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/04/hexo-tips/">从 CSDN 博客迁移到个人 Hexo 站点的一点坑</a>
          </li>
        
          <li>
            <a href="/2017/02/09/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2016/11/25/campus-interview/">2017互联网校园招聘的一些面试题</a>
          </li>
        
          <li>
            <a href="/2016/10/03/javac-error/">javac、javap命令行执行 java 程序的一点小坑</a>
          </li>
        
          <li>
            <a href="/2016/10/02/sort-summary/">经典排序算法总结--冒泡、快排、插入、希尔、归并、选择</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>